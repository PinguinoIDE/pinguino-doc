\hypertarget{p8_2pinguino_2core_2analog_8c}{\section{/dvpt/pinguino/git/pinguino-\/libraries/p8/pinguino/core/analog.c File Reference}
\label{p8_2pinguino_2core_2analog_8c}\index{/dvpt/pinguino/git/pinguino-\/libraries/p8/pinguino/core/analog.\-c@{/dvpt/pinguino/git/pinguino-\/libraries/p8/pinguino/core/analog.\-c}}
}
{\ttfamily \#include $<$pic18fregs.\-h$>$}\\*
{\ttfamily \#include $<$typedef.\-h$>$}\\*
{\ttfamily \#include $<$pin.\-h$>$}\\*
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{p8_2pinguino_2core_2analog_8c_ae2a85afa16e167e2c0b16046f1b023d1}{\-\_\-\-\_\-\-A\-N\-A\-L\-O\-G\-\_\-\-C}
\item 
\#define \hyperlink{p8_2pinguino_2core_2analog_8c_a3da44afeba217135a680a7477b5e3ce3}{D\-E\-F\-A\-U\-L\-T}~0
\item 
\#define \hyperlink{p8_2pinguino_2core_2analog_8c_af3fe37c1cda80aa7202b5a3bb7557dc9}{E\-X\-T\-E\-R\-N\-A\-L}~1
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{p8_2pinguino_2core_2analog_8c_a55f66ff6f3449ef81d97b7e47f041918}{analog\-\_\-init} (void)
\item 
void \hyperlink{p8_2pinguino_2core_2analog_8c_a9489197360ff350183a73e8553582c11}{analogreference} (\hyperlink{p8_2pinguino_2core_2typedef_8h_aed742c436da53c1080638ce6ef7d13de}{u8} Type)
\item 
\hyperlink{p8_2pinguino_2core_2typedef_8h_a50b0d1c7a54fa09a64a3ac111c778520}{u16} \hyperlink{p8_2pinguino_2core_2analog_8c_a3a0b9b832aef0425ebbe53d2e80ba3f4}{analogread} (\hyperlink{p8_2pinguino_2core_2typedef_8h_aed742c436da53c1080638ce6ef7d13de}{u8} channel)
\item 
void \hyperlink{p8_2pinguino_2core_2analog_8c_a442b8d8f7bf072cefadb826ab90534e3}{analogwrite\-\_\-init} ()
\item 
void \hyperlink{p8_2pinguino_2core_2analog_8c_a14bff5a5e8a928b7fba5e30931f65e56}{analogwrite} (\hyperlink{p8_2pinguino_2core_2typedef_8h_aed742c436da53c1080638ce6ef7d13de}{u8} pin, \hyperlink{p8_2pinguino_2core_2typedef_8h_a50b0d1c7a54fa09a64a3ac111c778520}{u16} duty)
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{p8_2pinguino_2core_2analog_8c_ae2a85afa16e167e2c0b16046f1b023d1}{\index{p8/pinguino/core/analog.\-c@{p8/pinguino/core/analog.\-c}!\-\_\-\-\_\-\-A\-N\-A\-L\-O\-G\-\_\-\-C@{\-\_\-\-\_\-\-A\-N\-A\-L\-O\-G\-\_\-\-C}}
\index{\-\_\-\-\_\-\-A\-N\-A\-L\-O\-G\-\_\-\-C@{\-\_\-\-\_\-\-A\-N\-A\-L\-O\-G\-\_\-\-C}!p8/pinguino/core/analog.c@{p8/pinguino/core/analog.\-c}}
\subsubsection[{\-\_\-\-\_\-\-A\-N\-A\-L\-O\-G\-\_\-\-C}]{\setlength{\rightskip}{0pt plus 5cm}\#define \-\_\-\-\_\-\-A\-N\-A\-L\-O\-G\-\_\-\-C}}\label{p8_2pinguino_2core_2analog_8c_ae2a85afa16e167e2c0b16046f1b023d1}


Definition at line 10 of file analog.\-c.

\hypertarget{p8_2pinguino_2core_2analog_8c_a3da44afeba217135a680a7477b5e3ce3}{\index{p8/pinguino/core/analog.\-c@{p8/pinguino/core/analog.\-c}!D\-E\-F\-A\-U\-L\-T@{D\-E\-F\-A\-U\-L\-T}}
\index{D\-E\-F\-A\-U\-L\-T@{D\-E\-F\-A\-U\-L\-T}!p8/pinguino/core/analog.c@{p8/pinguino/core/analog.\-c}}
\subsubsection[{D\-E\-F\-A\-U\-L\-T}]{\setlength{\rightskip}{0pt plus 5cm}\#define D\-E\-F\-A\-U\-L\-T~0}}\label{p8_2pinguino_2core_2analog_8c_a3da44afeba217135a680a7477b5e3ce3}


Definition at line 12 of file analog.\-c.



Referenced by analogreference().

\hypertarget{p8_2pinguino_2core_2analog_8c_af3fe37c1cda80aa7202b5a3bb7557dc9}{\index{p8/pinguino/core/analog.\-c@{p8/pinguino/core/analog.\-c}!E\-X\-T\-E\-R\-N\-A\-L@{E\-X\-T\-E\-R\-N\-A\-L}}
\index{E\-X\-T\-E\-R\-N\-A\-L@{E\-X\-T\-E\-R\-N\-A\-L}!p8/pinguino/core/analog.c@{p8/pinguino/core/analog.\-c}}
\subsubsection[{E\-X\-T\-E\-R\-N\-A\-L}]{\setlength{\rightskip}{0pt plus 5cm}\#define E\-X\-T\-E\-R\-N\-A\-L~1}}\label{p8_2pinguino_2core_2analog_8c_af3fe37c1cda80aa7202b5a3bb7557dc9}


Definition at line 13 of file analog.\-c.



Referenced by analogreference().



\subsection{Function Documentation}
\hypertarget{p8_2pinguino_2core_2analog_8c_a55f66ff6f3449ef81d97b7e47f041918}{\index{p8/pinguino/core/analog.\-c@{p8/pinguino/core/analog.\-c}!analog\-\_\-init@{analog\-\_\-init}}
\index{analog\-\_\-init@{analog\-\_\-init}!p8/pinguino/core/analog.c@{p8/pinguino/core/analog.\-c}}
\subsubsection[{analog\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}void analog\-\_\-init (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{p8_2pinguino_2core_2analog_8c_a55f66ff6f3449ef81d97b7e47f041918}


Definition at line 25 of file analog.\-c.


\begin{DoxyCode}
26 \{
27 
28 \textcolor{preprocessor}{    #if defined(PINGUINO1220) || defined(PINGUINO1320)}
29 \textcolor{preprocessor}{}
30     TRISA=TRISA | 0x1F; \textcolor{comment}{// 0b00011111 = RA0,1,2,3,4 = AN0 to AN4 are INPUT}
31     ADCON1=0x1F;        \textcolor{comment}{// 0b00001000 = 0, 0, VRef-=VSS, VRef+=VDD, AN0 to AN4 enabled }
32     ADCON2=0xBD;        \textcolor{comment}{// 0b10111101 = Right justified, 0, 20 TAD, FOSC/16}
33 
34 \textcolor{preprocessor}{    #elif defined(PINGUINO4550)}
35 \textcolor{preprocessor}{}
36     TRISA=TRISA | 0x2F;
37     TRISE=TRISE | 0x07; 
38     ADCON1=0x07;
39     ADCON2=0xBD;
40 
41 \textcolor{preprocessor}{    #elif defined(PICUNO\_EQUO)}
42 \textcolor{preprocessor}{}
43     TRISA=TRISA | 0x2F; \textcolor{comment}{//RA0..2, RA5}
44     TRISE=TRISE | 0x03; \textcolor{comment}{//RE0..1}
45     ADCON1=0x08;        \textcolor{comment}{//AN0-AN6, Vref+ = VDD, RA4 as Digital o/p}
46     ADCON2=0xBD;        \textcolor{comment}{//Right justified, 20TAD, FOSC/16}
47 
48 \textcolor{preprocessor}{    #elif defined(PINGUINO26J50)}
49 \textcolor{preprocessor}{}
50     TRISA=TRISA | 0x2F; \textcolor{comment}{// 0b00101111 = RA0,1,2,3 and RA5 = AN0 to AN4 are INPUT}
51     \textcolor{comment}{//1 = Pin configured as a digital port}
52     \textcolor{comment}{//0 = Pin configured as an analog channel – digital input is disabled and reads ‘0’}
53     ANCON0=0xE0;\textcolor{comment}{//0x1F; // 0b11100000 = AN0 to AN4 enabled, AN5 to AN7 disabled}
54     ANCON1|=0x1F;\textcolor{comment}{//0x0A;// 0b00111111 = AN8 to AN12 disabled (1=digital/0=analog)}
55     ADCON0=0x00;        \textcolor{comment}{// 0b00000000 = VRef-=VSS, VRef+=VDD, No channel selected yet }
56     ADCON1=0xBD;        \textcolor{comment}{// 0b10111101 = Right justified, Calibration Normal, 20TAD, FOSC/16}
57 
58 \textcolor{preprocessor}{    #elif defined(PINGUINO47J53A)}
59 \textcolor{preprocessor}{}    \textcolor{comment}{// RB 09/09/2013: Analog Conversion Mode is set to 12-bit in Bootloader Config file}
60     \textcolor{comment}{// #pragma config ADCSEL = BIT12 // 12-bit conversion mode is enabled}
61 
62     \textcolor{comment}{// RB - March 2014 - Individual Analog channel selection is done in analogRead()}
63     \textcolor{comment}{//TRISA=TRISA|0b00011111;   // RA0 (AN0) to RA4 (AN4) are INPUT}
64     \textcolor{comment}{//TRISE=TRISE|0b00000111;   // RE0 (AN5) to RE2 (AN7) are INPUT}
65 
66     \textcolor{comment}{//1 = Pin configured as a digital port}
67     \textcolor{comment}{//0 = Pin configured as an analog channel – digital input is disabled and reads ‘0’}
68     \textcolor{comment}{// RB - March 2014 - Individual Analog channel selection is done in analogRead()}
69     \textcolor{comment}{//ANCON0=0;           // AN0 to AN7 enabled}
70     ANCON1=0b01111111;  \textcolor{comment}{// VBGEN=0, AN8 to AN12 disabled (1=digital/0=analog)}
71 
72     ADCON0=0x00;        \textcolor{comment}{// 0b00000000 = VRef-=VSS, VRef+=VDD, No channel selected yet }
73     ADCON1=0b10111110;  \textcolor{comment}{// Right justified, Calibration Normal, 20TAD, FOSC/64}
74 
75 \textcolor{preprocessor}{    #elif defined(\_\_18f25k50) || defined(\_\_18f45k50) }
76 \textcolor{preprocessor}{}    \textcolor{comment}{// RB : 01-12-2013}
77     TRISA  = TRISA  | 0x2F; \textcolor{comment}{// 0b00101111 = RA0,1,2,3 and RA5 = AN0 to AN4 are INPUT}
78     ANSELA = ANSELA | 0x2F; \textcolor{comment}{// AN0 to AN4 enabled }
79     ANSELB = 0;
80     ANSELC = 0;
81 \textcolor{preprocessor}{    #if defined(\_\_18f45k50) }
82 \textcolor{preprocessor}{}    ANSELD = 0;
83     ANSELE = 0;
84 \textcolor{preprocessor}{    #endif}
85 \textcolor{preprocessor}{}    ADCON1 = 0x00;          \textcolor{comment}{// VRef-=VSS, VRef+=VDD}
86     ADCON2 = 0xBD;          \textcolor{comment}{// 0b10111101 = Right justified, 0, 20 TAD, FOSC/16}
87     
88 \textcolor{preprocessor}{    #else // PINGUINO2550}
89 \textcolor{preprocessor}{}
90     TRISA=TRISA | 0x2F; \textcolor{comment}{// 0b00101111 = RA0,1,2,3 and RA5 = AN0 to AN4 are INPUT}
91     ADCON1=0x0A;        \textcolor{comment}{// 0b00001000 = 0, 0, VRef-=VSS, VRef+=VDD, AN0 to AN4 enabled }
92     ADCON2=0xBD;        \textcolor{comment}{// 0b10111101 = Right justified, 0, 20 TAD, FOSC/16}
93 
94 \textcolor{preprocessor}{    #endif}
95 \textcolor{preprocessor}{}\}
\end{DoxyCode}
\hypertarget{p8_2pinguino_2core_2analog_8c_a3a0b9b832aef0425ebbe53d2e80ba3f4}{\index{p8/pinguino/core/analog.\-c@{p8/pinguino/core/analog.\-c}!analogread@{analogread}}
\index{analogread@{analogread}!p8/pinguino/core/analog.c@{p8/pinguino/core/analog.\-c}}
\subsubsection[{analogread}]{\setlength{\rightskip}{0pt plus 5cm}{\bf u16} analogread (
\begin{DoxyParamCaption}
\item[{{\bf u8}}]{channel}
\end{DoxyParamCaption}
)}}\label{p8_2pinguino_2core_2analog_8c_a3a0b9b832aef0425ebbe53d2e80ba3f4}


Definition at line 134 of file analog.\-c.


\begin{DoxyCode}
135 \{
136     \hyperlink{p8_2pinguino_2core_2typedef_8h_a50b0d1c7a54fa09a64a3ac111c778520}{u16} result=0;
137     \textcolor{comment}{// #if defined(PINGUINO4550) || defined(PICUNO\_EQUO)}
138     \textcolor{comment}{// ADCON1=0x07;}
139     \textcolor{comment}{// #else}
140     \textcolor{comment}{// ADCON1=0x0A;}
141     \textcolor{comment}{// #endif}
142 
143 \textcolor{preprocessor}{    #ifdef PICUNO\_EQUO}
144 \textcolor{preprocessor}{}
145         \textcolor{keywordflow}{if}(channel>=14 && channel<=16)
146             ADCON0=(channel-14) << 2;
147         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(channel>=17 && channel<=19)
148             ADCON0=(channel-13) << 2;
149 
150     \textcolor{comment}{// RB - March 2014 - Enable individual Analog channel selection}
151     \textcolor{comment}{//                   Has to be done for other Pinguino}
152     
153 \textcolor{preprocessor}{    #elif defined(PINGUINO47J53A)}
154 \textcolor{preprocessor}{}
155         \textcolor{keywordflow}{if} (channel > 15)
156             \textcolor{keywordflow}{return} 0;
157 
158         \textcolor{keywordflow}{if} (channel >= 8 && channel <= 15)
159             channel = channel - 8;      \textcolor{comment}{// A0=8 to A7=15}
160 
161         \textcolor{keywordflow}{if} (channel < 5)
162             TRISA |= 1 << channel;      \textcolor{comment}{// channel as INPUT}
163 
164         \textcolor{keywordflow}{if} (channel >= 5 && channel <= 7)
165             TRISE |= 1 << (channel - 5);\textcolor{comment}{// channel as INPUT}
166 
167         ANCON0 |= 1 << channel;         \textcolor{comment}{// channel enabled}
168 
169         ADCON0 = channel << 2;          \textcolor{comment}{// A0=0 to A7=7}
170 
171 \textcolor{preprocessor}{    #else}
172 \textcolor{preprocessor}{}    
173         \textcolor{keywordflow}{if}(channel>=13 && channel<=20)
174             ADCON0=(channel-13) << 2;   \textcolor{comment}{// A0 = 13, ..., A4 = 17}
175         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(channel<=5)
176             ADCON0 = channel << 2;      \textcolor{comment}{// A0 = 0, ..., A4 = 4}
177 
178 \textcolor{preprocessor}{    #endif}
179 \textcolor{preprocessor}{}
180     ADCON0bits.ADON=1;                  \textcolor{comment}{// A/D Converter module is enabled}
181 
182     \textcolor{keywordflow}{for} (result=1;result<10;result++)   \textcolor{comment}{// Acquisition time}
183         \_\_asm NOP \_\_endasm;
184 
185     ADCON0bits.GO=1;                    \textcolor{comment}{// Start A/D Conversion}
186 
187     \textcolor{keywordflow}{while} (ADCON0bits.GO);              \textcolor{comment}{// Wait for conversion stop}
188 
189     result = ADRESH << 8;
190     result += ADRESL;
191 
192     ADCON0bits.ADON = 0;                \textcolor{comment}{// A/D Converter module is disabled}
193 
194     \textcolor{keywordflow}{return}(result);
195 \}
\end{DoxyCode}
\hypertarget{p8_2pinguino_2core_2analog_8c_a9489197360ff350183a73e8553582c11}{\index{p8/pinguino/core/analog.\-c@{p8/pinguino/core/analog.\-c}!analogreference@{analogreference}}
\index{analogreference@{analogreference}!p8/pinguino/core/analog.c@{p8/pinguino/core/analog.\-c}}
\subsubsection[{analogreference}]{\setlength{\rightskip}{0pt plus 5cm}void analogreference (
\begin{DoxyParamCaption}
\item[{{\bf u8}}]{Type}
\end{DoxyParamCaption}
)}}\label{p8_2pinguino_2core_2analog_8c_a9489197360ff350183a73e8553582c11}


Definition at line 103 of file analog.\-c.



References D\-E\-F\-A\-U\-L\-T, and E\-X\-T\-E\-R\-N\-A\-L.


\begin{DoxyCode}
104 \{
105 \textcolor{preprocessor}{    #if !defined(PINGUINO26J50) && !defined(PINGUINO46J50) && \(\backslash\)}
106 \textcolor{preprocessor}{        !defined(PINGUINO27J53) && !defined(PINGUINO47J53A)   }
107 \textcolor{preprocessor}{}
108     \textcolor{keywordflow}{if}(Type == \hyperlink{p8_2pinguino_2core_2analog_8c_a3da44afeba217135a680a7477b5e3ce3}{DEFAULT})          \textcolor{comment}{//the default analog reference of 5 volts (on 5V Arduino boards) or
       3.3 volts (on 3.3V Arduino boards)}
109         ADCON1|=0x00;           \textcolor{comment}{//Vref+ = VDD}
110     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(Type == \hyperlink{p8_2pinguino_2core_2analog_8c_af3fe37c1cda80aa7202b5a3bb7557dc9}{EXTERNAL})   \textcolor{comment}{//the voltage applied to the AREF pin (0 to 5V only) is used as the
       reference.}
111         ADCON1|=0x10;           \textcolor{comment}{//Vref+ = External source}
112 
113 \textcolor{preprocessor}{    #else}
114 \textcolor{preprocessor}{}
115     \textcolor{keywordflow}{if}(Type == \hyperlink{p8_2pinguino_2core_2analog_8c_a3da44afeba217135a680a7477b5e3ce3}{DEFAULT})          \textcolor{comment}{//the default analog reference of 5 volts (on 5V Arduino boards) or
       3.3 volts (on 3.3V Arduino boards)}
116         ADCON0|=0x00;           \textcolor{comment}{//Vref+ = VDD}
117     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(Type == \hyperlink{p8_2pinguino_2core_2analog_8c_af3fe37c1cda80aa7202b5a3bb7557dc9}{EXTERNAL})   \textcolor{comment}{//the voltage applied to the AREF pin (0 to 5V only) is used as the
       reference.}
118         ADCON0|=0x40;           \textcolor{comment}{//Vref+ = External source}
119 
120 \textcolor{preprocessor}{    #endif}
121 \textcolor{preprocessor}{}\}
\end{DoxyCode}
\hypertarget{p8_2pinguino_2core_2analog_8c_a14bff5a5e8a928b7fba5e30931f65e56}{\index{p8/pinguino/core/analog.\-c@{p8/pinguino/core/analog.\-c}!analogwrite@{analogwrite}}
\index{analogwrite@{analogwrite}!p8/pinguino/core/analog.c@{p8/pinguino/core/analog.\-c}}
\subsubsection[{analogwrite}]{\setlength{\rightskip}{0pt plus 5cm}void analogwrite (
\begin{DoxyParamCaption}
\item[{{\bf u8}}]{pin, }
\item[{{\bf u16}}]{duty}
\end{DoxyParamCaption}
)}}\label{p8_2pinguino_2core_2analog_8c_a14bff5a5e8a928b7fba5e30931f65e56}


Definition at line 241 of file analog.\-c.



Referenced by Stepper\-\_\-step\-Motor().


\begin{DoxyCode}
242 \{
243     \textcolor{keywordflow}{switch} (pin)
244     \{
245 
246 \textcolor{preprocessor}{        #if defined(\_\_18f26j53) || defined(\_\_18f46j53) || \(\backslash\)}
247 \textcolor{preprocessor}{            defined(\_\_18f27j53) || defined(\_\_18f47j53)}
248 \textcolor{preprocessor}{}
249         \textcolor{comment}{/*}
250 \textcolor{comment}{        On PIC18F47J53 CCPx pin are multiplexed with a PORTB data latch,}
251 \textcolor{comment}{        the appropriate TRIS bit must be cleared by user to make the CCPx pin an output.}
252 \textcolor{comment}{        */}
253         
254         \textcolor{keywordflow}{case} CCP4:
255             \textcolor{comment}{//BitClear(TRISB, pin);            // Make the CCPx pin an output by clearing the appropriate
       TRIS bit.}
256             CCP4CON  = 0b00001100;           \textcolor{comment}{// Configure the CCPx module for PWM operation}
257             CCPR4L   = ( duty >> 2 ) & 0xFF; \textcolor{comment}{// Set the PWM duty cycle by writing to the CCPRxL register}
258             CCP4CON |= (duty & 0x300) >> 4;  \textcolor{comment}{// and CCPxCON<5:4> bits}
259             \textcolor{keywordflow}{break};
260 
261         \textcolor{keywordflow}{case} CCP5:
262             \textcolor{comment}{//BitClear(TRISB, pin);            // Make the CCPx pin an output by clearing the appropriate
       TRIS bit.}
263             CCP5CON  = 0b00001100;           \textcolor{comment}{// Configure the CCPx module for PWM operation}
264             CCPR5L   = ( duty >> 2 ) & 0xFF; \textcolor{comment}{// Set the PWM duty cycle by writing to the CCPRxL register}
265             CCP5CON |= (duty & 0x300) >> 4;  \textcolor{comment}{// and CCPxCON<5:4> bits}
266             \textcolor{keywordflow}{break};
267 
268         \textcolor{keywordflow}{case} CCP6:
269             \textcolor{comment}{//BitClear(TRISB, pin);            // Make the CCPx pin an output by clearing the appropriate
       TRIS bit.}
270             CCP6CON  = 0b00001100;           \textcolor{comment}{// Configure the CCPx module for PWM operation}
271             CCPR6L   = ( duty >> 2 ) & 0xFF; \textcolor{comment}{// Set the PWM duty cycle by writing to the CCPRxL register}
272             CCP6CON |= (duty & 0x300) >> 4;  \textcolor{comment}{// and CCPxCON<5:4> bits}
273             \textcolor{keywordflow}{break};
274 
275         \textcolor{keywordflow}{case} CCP7:
276             \textcolor{comment}{//BitClear(TRISB, pin);            // Make the CCPx pin an output by clearing the appropriate
       TRIS bit.}
277             CCP7CON  = 0b00001100;           \textcolor{comment}{// Configure the CCPx module for PWM operation}
278             CCPR7L   = ( duty >> 2 ) & 0xFF; \textcolor{comment}{// Set the PWM duty cycle by writing to the CCPRxL register}
279             CCP7CON |= (duty & 0x300) >> 4;  \textcolor{comment}{// and CCPxCON<5:4> bits}
280             \textcolor{keywordflow}{break};
281 
282         \textcolor{keywordflow}{case} CCP8:
283             \textcolor{comment}{//BitClear(TRISB, pin);            // Make the CCPx pin an output by clearing the appropriate
       TRIS bit.}
284             CCP8CON  = 0b00001100;           \textcolor{comment}{// Configure the CCPx module for PWM operation}
285             CCPR8L   = ( duty >> 2 ) & 0xFF; \textcolor{comment}{// Set the PWM duty cycle by writing to the CCPRxL register}
286             CCP8CON |= (duty & 0x300) >> 4;  \textcolor{comment}{// and CCPxCON<5:4> bits}
287             \textcolor{keywordflow}{break};
288 
289         \textcolor{keywordflow}{case} CCP9:
290             \textcolor{comment}{//BitClear(TRISB, pin);            // Make the CCPx pin an output by clearing the appropriate
       TRIS bit.}
291             CCP9CON  = 0b00001100;           \textcolor{comment}{// Configure the CCPx module for PWM operation}
292             CCPR9L   = ( duty >> 2 ) & 0xFF; \textcolor{comment}{// Set the PWM duty cycle by writing to the CCPRxL register}
293             CCP9CON |= (duty & 0x300) >> 4;  \textcolor{comment}{// and CCPxCON<5:4> bits}
294             \textcolor{keywordflow}{break};
295 
296         \textcolor{keywordflow}{case} CCP10:
297             \textcolor{comment}{//BitClear(TRISB, pin);            // Make the CCPx pin an output by clearing the appropriate
       TRIS bit.}
298             CCP10CON  = 0b00001100;          \textcolor{comment}{// Configure the CCPx module for PWM operation}
299             CCPR10L   = ( duty >> 2 ) & 0xFF;\textcolor{comment}{// Set the PWM duty cycle by writing to the CCPRxL register}
300             CCP10CON |= (duty & 0x300) >> 4; \textcolor{comment}{// and CCPxCON<5:4> bits}
301             \textcolor{keywordflow}{break};
302 
303 \textcolor{preprocessor}{        #else}
304 \textcolor{preprocessor}{}
305         \textcolor{keywordflow}{case} CCP1:
306             CCP1CON  = 0b00001100;
307             CCPR1L   = ( duty >> 2 ) & 0xFF; \textcolor{comment}{// 8 LSB}
308             CCP1CON |= (duty & 0x300) >> 4;  \textcolor{comment}{// 2 MSB in <5:4>}
309             \textcolor{keywordflow}{break};
310 
311         \textcolor{keywordflow}{case} CCP2:
312             CCP2CON  = 0b00001100;
313             CCPR2L   = ( duty >> 2 ) & 0xFF; \textcolor{comment}{// 8 LSB}
314             CCP2CON |= (duty & 0x300) >> 4;  \textcolor{comment}{// 2 MSB in <5:4>}
315             \textcolor{keywordflow}{break};
316 
317 \textcolor{preprocessor}{        #endif}
318 \textcolor{preprocessor}{}
319     \}
320 
321     PIR1bits.TMR2IF = 0;
322 \}
\end{DoxyCode}
\hypertarget{p8_2pinguino_2core_2analog_8c_a442b8d8f7bf072cefadb826ab90534e3}{\index{p8/pinguino/core/analog.\-c@{p8/pinguino/core/analog.\-c}!analogwrite\-\_\-init@{analogwrite\-\_\-init}}
\index{analogwrite\-\_\-init@{analogwrite\-\_\-init}!p8/pinguino/core/analog.c@{p8/pinguino/core/analog.\-c}}
\subsubsection[{analogwrite\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}void analogwrite\-\_\-init (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{p8_2pinguino_2core_2analog_8c_a442b8d8f7bf072cefadb826ab90534e3}


Definition at line 226 of file analog.\-c.


\begin{DoxyCode}
227 \{
228 \textcolor{preprocessor}{    #if defined(\_\_18f26j53) || defined(\_\_18f46j53) || \(\backslash\)}
229 \textcolor{preprocessor}{        defined(\_\_18f27j53) || defined(\_\_18f47j53)}
230 \textcolor{preprocessor}{}
231     CCPTMRS0 = 0;
232     CCPTMRS1 = 0;                       \textcolor{comment}{// assign Timer2 to all CCP pins}
233     CCPTMRS2 = 0;
234   
235 \textcolor{preprocessor}{    #endif}
236 \textcolor{preprocessor}{}
237     PR2 = 0xFF;                         \textcolor{comment}{// set PWM period to the max. to get 10-bit res.}
238     T2CON = 0b00000100;                 \textcolor{comment}{// Timer2 on, prescaler is 1}
239 \}
\end{DoxyCode}
