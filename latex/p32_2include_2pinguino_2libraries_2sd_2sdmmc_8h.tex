\hypertarget{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h}{\section{/dvpt/pinguino/git/pinguino-\/libraries/p32/include/pinguino/libraries/sd/sdmmc.h File Reference}
\label{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h}\index{/dvpt/pinguino/git/pinguino-\/libraries/p32/include/pinguino/libraries/sd/sdmmc.\-h@{/dvpt/pinguino/git/pinguino-\/libraries/p32/include/pinguino/libraries/sd/sdmmc.\-h}}
}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_abb508ea8227673f419e9fe3a86c30d8e}{F\-A\-I\-L}~\hyperlink{p32_2include_2pinguino_2core_2const_8h_aa93f0eb578d23995850d61f7d61c55c1}{F\-A\-L\-S\-E}
\item 
\#define \hyperlink{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_ab702106cf3b3e96750b6845ded4e0299}{R\-E\-S\-E\-T}~0
\item 
\#define \hyperlink{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_ab5889105dcd019008c9448dff61323f6}{I\-N\-I\-T}~1
\item 
\#define \hyperlink{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a549850eb399ab873a7a7c37696adcd5a}{R\-E\-A\-D\-\_\-\-S\-I\-N\-G\-L\-E}~17
\item 
\#define \hyperlink{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_aa44d51cd8fac15d4a24ccf8c55ad7da5}{W\-R\-I\-T\-E\-\_\-\-S\-I\-N\-G\-L\-E}~24
\item 
\#define \hyperlink{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a85a884eec438d450dc1c05e8d9d29044}{S\-E\-N\-D\-\_\-\-C\-S\-D}~9
\item 
\#define \hyperlink{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a264ef466ea3f1a08a8c9de81e0e3f24d}{S\-E\-N\-D\-\_\-\-C\-I\-D}~10
\item 
\#define \hyperlink{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a78fa7723a4dedb1533ef47662258c5c4}{S\-E\-T\-\_\-\-B\-L\-E\-N}~16
\item 
\#define \hyperlink{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_acdb057504ceebb40cb4a5df3197a8fb5}{A\-P\-P\-\_\-\-C\-M\-D}~55
\item 
\#define \hyperlink{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a2eaad7063a8c3ca316b571c49008f6bc}{S\-E\-N\-D\-\_\-\-A\-P\-P\-\_\-\-O\-P}~41
\item 
\#define \hyperlink{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a5562e3e4189eff9e71305f172f2b515a}{D\-A\-T\-A\-\_\-\-S\-T\-A\-R\-T}~0x\-F\-E
\item 
\#define \hyperlink{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a11a962adddfd0449f2401bbefeac89bd}{D\-A\-T\-A\-\_\-\-A\-C\-C\-E\-P\-T}~0x05
\item 
\#define \hyperlink{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_ab1ceea657d19e00656db1559099d9ba9}{I\-\_\-\-T\-I\-M\-E\-O\-U\-T}~20000
\item 
\#define \hyperlink{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a73e9971e06d8b2cad0e70db0ef35df42}{R\-\_\-\-T\-I\-M\-E\-O\-U\-T}~25000
\item 
\#define \hyperlink{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a5d89c559dd2f905ae0f8f9d16b16647d}{W\-\_\-\-T\-I\-M\-E\-O\-U\-T}~250000
\item 
\#define \hyperlink{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a0d371bd9dc0df54489199aad563155b0}{E\-\_\-\-C\-O\-M\-M\-A\-N\-D\-\_\-\-A\-C\-K}~0x80
\item 
\#define \hyperlink{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a96c1fea55347ad0c3bf3f39c092bb0bb}{E\-\_\-\-I\-N\-I\-T\-\_\-\-T\-I\-M\-E\-O\-U\-T}~0x81
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef unsigned \hyperlink{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_ae191ab80499bded9e0668daa98faa849}{L\-B\-A}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
unsigned char \hyperlink{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a39a07566d7d6294bb14c9069983c36ed}{write\-S\-P\-I} (unsigned char)
\item 
void \hyperlink{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a469e8fffcf5a77dc542d8acea1cfea57}{init\-S\-D} (void)
\item 
void \hyperlink{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a1531d2f76a265f4def4044d9c028c1a5}{disable\-S\-D} (void)
\item 
void \hyperlink{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_aea80f1bdf2c4aba640129a965f4e071f}{enable\-S\-D} (void)
\item 
int \hyperlink{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a14348d35c5258583bb2bedaf5c98630b}{send\-S\-D\-Cmd} (unsigned char, unsigned)
\item 
int \hyperlink{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a0a62982cc6fc4507eacea6f73767da72}{init\-Media} (void)
\item 
int \hyperlink{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a597faeb4452ea695d5c0daa449810afc}{read\-S\-E\-C\-T\-O\-R} (\hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8h_ae191ab80499bded9e0668daa98faa849}{L\-B\-A}, char $\ast$)
\item 
int \hyperlink{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a9db00b236e677dff212c4297fb70a2d2}{write\-S\-E\-C\-T\-O\-R} (\hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8h_ae191ab80499bded9e0668daa98faa849}{L\-B\-A}, char $\ast$)
\item 
int \hyperlink{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_acfab82dd441d6c904d017b9e184a1bff}{get\-C\-D} ()
\item 
int \hyperlink{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_ab1fe58d1bc69cb9c56452e46448c1d60}{get\-W\-P} ()
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_acdb057504ceebb40cb4a5df3197a8fb5}{\index{p32/include/pinguino/libraries/sd/sdmmc.\-h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}!A\-P\-P\-\_\-\-C\-M\-D@{A\-P\-P\-\_\-\-C\-M\-D}}
\index{A\-P\-P\-\_\-\-C\-M\-D@{A\-P\-P\-\_\-\-C\-M\-D}!p32/include/pinguino/libraries/sd/sdmmc.h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}}
\subsubsection[{A\-P\-P\-\_\-\-C\-M\-D}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\-P\-P\-\_\-\-C\-M\-D~55}}\label{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_acdb057504ceebb40cb4a5df3197a8fb5}


Definition at line 69 of file sdmmc.\-h.

\hypertarget{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a11a962adddfd0449f2401bbefeac89bd}{\index{p32/include/pinguino/libraries/sd/sdmmc.\-h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}!D\-A\-T\-A\-\_\-\-A\-C\-C\-E\-P\-T@{D\-A\-T\-A\-\_\-\-A\-C\-C\-E\-P\-T}}
\index{D\-A\-T\-A\-\_\-\-A\-C\-C\-E\-P\-T@{D\-A\-T\-A\-\_\-\-A\-C\-C\-E\-P\-T}!p32/include/pinguino/libraries/sd/sdmmc.h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}}
\subsubsection[{D\-A\-T\-A\-\_\-\-A\-C\-C\-E\-P\-T}]{\setlength{\rightskip}{0pt plus 5cm}\#define D\-A\-T\-A\-\_\-\-A\-C\-C\-E\-P\-T~0x05}}\label{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a11a962adddfd0449f2401bbefeac89bd}


Definition at line 74 of file sdmmc.\-h.

\hypertarget{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a5562e3e4189eff9e71305f172f2b515a}{\index{p32/include/pinguino/libraries/sd/sdmmc.\-h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}!D\-A\-T\-A\-\_\-\-S\-T\-A\-R\-T@{D\-A\-T\-A\-\_\-\-S\-T\-A\-R\-T}}
\index{D\-A\-T\-A\-\_\-\-S\-T\-A\-R\-T@{D\-A\-T\-A\-\_\-\-S\-T\-A\-R\-T}!p32/include/pinguino/libraries/sd/sdmmc.h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}}
\subsubsection[{D\-A\-T\-A\-\_\-\-S\-T\-A\-R\-T}]{\setlength{\rightskip}{0pt plus 5cm}\#define D\-A\-T\-A\-\_\-\-S\-T\-A\-R\-T~0x\-F\-E}}\label{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a5562e3e4189eff9e71305f172f2b515a}


Definition at line 73 of file sdmmc.\-h.

\hypertarget{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a0d371bd9dc0df54489199aad563155b0}{\index{p32/include/pinguino/libraries/sd/sdmmc.\-h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}!E\-\_\-\-C\-O\-M\-M\-A\-N\-D\-\_\-\-A\-C\-K@{E\-\_\-\-C\-O\-M\-M\-A\-N\-D\-\_\-\-A\-C\-K}}
\index{E\-\_\-\-C\-O\-M\-M\-A\-N\-D\-\_\-\-A\-C\-K@{E\-\_\-\-C\-O\-M\-M\-A\-N\-D\-\_\-\-A\-C\-K}!p32/include/pinguino/libraries/sd/sdmmc.h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}}
\subsubsection[{E\-\_\-\-C\-O\-M\-M\-A\-N\-D\-\_\-\-A\-C\-K}]{\setlength{\rightskip}{0pt plus 5cm}\#define E\-\_\-\-C\-O\-M\-M\-A\-N\-D\-\_\-\-A\-C\-K~0x80}}\label{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a0d371bd9dc0df54489199aad563155b0}


Definition at line 82 of file sdmmc.\-h.

\hypertarget{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a96c1fea55347ad0c3bf3f39c092bb0bb}{\index{p32/include/pinguino/libraries/sd/sdmmc.\-h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}!E\-\_\-\-I\-N\-I\-T\-\_\-\-T\-I\-M\-E\-O\-U\-T@{E\-\_\-\-I\-N\-I\-T\-\_\-\-T\-I\-M\-E\-O\-U\-T}}
\index{E\-\_\-\-I\-N\-I\-T\-\_\-\-T\-I\-M\-E\-O\-U\-T@{E\-\_\-\-I\-N\-I\-T\-\_\-\-T\-I\-M\-E\-O\-U\-T}!p32/include/pinguino/libraries/sd/sdmmc.h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}}
\subsubsection[{E\-\_\-\-I\-N\-I\-T\-\_\-\-T\-I\-M\-E\-O\-U\-T}]{\setlength{\rightskip}{0pt plus 5cm}\#define E\-\_\-\-I\-N\-I\-T\-\_\-\-T\-I\-M\-E\-O\-U\-T~0x81}}\label{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a96c1fea55347ad0c3bf3f39c092bb0bb}


Definition at line 83 of file sdmmc.\-h.

\hypertarget{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_abb508ea8227673f419e9fe3a86c30d8e}{\index{p32/include/pinguino/libraries/sd/sdmmc.\-h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}!F\-A\-I\-L@{F\-A\-I\-L}}
\index{F\-A\-I\-L@{F\-A\-I\-L}!p32/include/pinguino/libraries/sd/sdmmc.h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}}
\subsubsection[{F\-A\-I\-L}]{\setlength{\rightskip}{0pt plus 5cm}\#define F\-A\-I\-L~{\bf F\-A\-L\-S\-E}}}\label{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_abb508ea8227673f419e9fe3a86c30d8e}


Definition at line 25 of file sdmmc.\-h.

\hypertarget{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_ab1ceea657d19e00656db1559099d9ba9}{\index{p32/include/pinguino/libraries/sd/sdmmc.\-h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}!I\-\_\-\-T\-I\-M\-E\-O\-U\-T@{I\-\_\-\-T\-I\-M\-E\-O\-U\-T}}
\index{I\-\_\-\-T\-I\-M\-E\-O\-U\-T@{I\-\_\-\-T\-I\-M\-E\-O\-U\-T}!p32/include/pinguino/libraries/sd/sdmmc.h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}}
\subsubsection[{I\-\_\-\-T\-I\-M\-E\-O\-U\-T}]{\setlength{\rightskip}{0pt plus 5cm}\#define I\-\_\-\-T\-I\-M\-E\-O\-U\-T~20000}}\label{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_ab1ceea657d19e00656db1559099d9ba9}


Definition at line 77 of file sdmmc.\-h.

\hypertarget{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_ab5889105dcd019008c9448dff61323f6}{\index{p32/include/pinguino/libraries/sd/sdmmc.\-h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}!I\-N\-I\-T@{I\-N\-I\-T}}
\index{I\-N\-I\-T@{I\-N\-I\-T}!p32/include/pinguino/libraries/sd/sdmmc.h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}}
\subsubsection[{I\-N\-I\-T}]{\setlength{\rightskip}{0pt plus 5cm}\#define I\-N\-I\-T~1}}\label{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_ab5889105dcd019008c9448dff61323f6}


Definition at line 61 of file sdmmc.\-h.

\hypertarget{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a73e9971e06d8b2cad0e70db0ef35df42}{\index{p32/include/pinguino/libraries/sd/sdmmc.\-h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}!R\-\_\-\-T\-I\-M\-E\-O\-U\-T@{R\-\_\-\-T\-I\-M\-E\-O\-U\-T}}
\index{R\-\_\-\-T\-I\-M\-E\-O\-U\-T@{R\-\_\-\-T\-I\-M\-E\-O\-U\-T}!p32/include/pinguino/libraries/sd/sdmmc.h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}}
\subsubsection[{R\-\_\-\-T\-I\-M\-E\-O\-U\-T}]{\setlength{\rightskip}{0pt plus 5cm}\#define R\-\_\-\-T\-I\-M\-E\-O\-U\-T~25000}}\label{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a73e9971e06d8b2cad0e70db0ef35df42}


Definition at line 78 of file sdmmc.\-h.

\hypertarget{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a549850eb399ab873a7a7c37696adcd5a}{\index{p32/include/pinguino/libraries/sd/sdmmc.\-h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}!R\-E\-A\-D\-\_\-\-S\-I\-N\-G\-L\-E@{R\-E\-A\-D\-\_\-\-S\-I\-N\-G\-L\-E}}
\index{R\-E\-A\-D\-\_\-\-S\-I\-N\-G\-L\-E@{R\-E\-A\-D\-\_\-\-S\-I\-N\-G\-L\-E}!p32/include/pinguino/libraries/sd/sdmmc.h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}}
\subsubsection[{R\-E\-A\-D\-\_\-\-S\-I\-N\-G\-L\-E}]{\setlength{\rightskip}{0pt plus 5cm}\#define R\-E\-A\-D\-\_\-\-S\-I\-N\-G\-L\-E~17}}\label{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a549850eb399ab873a7a7c37696adcd5a}


Definition at line 62 of file sdmmc.\-h.

\hypertarget{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_ab702106cf3b3e96750b6845ded4e0299}{\index{p32/include/pinguino/libraries/sd/sdmmc.\-h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}!R\-E\-S\-E\-T@{R\-E\-S\-E\-T}}
\index{R\-E\-S\-E\-T@{R\-E\-S\-E\-T}!p32/include/pinguino/libraries/sd/sdmmc.h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}}
\subsubsection[{R\-E\-S\-E\-T}]{\setlength{\rightskip}{0pt plus 5cm}\#define R\-E\-S\-E\-T~0}}\label{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_ab702106cf3b3e96750b6845ded4e0299}


Definition at line 60 of file sdmmc.\-h.

\hypertarget{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a2eaad7063a8c3ca316b571c49008f6bc}{\index{p32/include/pinguino/libraries/sd/sdmmc.\-h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}!S\-E\-N\-D\-\_\-\-A\-P\-P\-\_\-\-O\-P@{S\-E\-N\-D\-\_\-\-A\-P\-P\-\_\-\-O\-P}}
\index{S\-E\-N\-D\-\_\-\-A\-P\-P\-\_\-\-O\-P@{S\-E\-N\-D\-\_\-\-A\-P\-P\-\_\-\-O\-P}!p32/include/pinguino/libraries/sd/sdmmc.h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}}
\subsubsection[{S\-E\-N\-D\-\_\-\-A\-P\-P\-\_\-\-O\-P}]{\setlength{\rightskip}{0pt plus 5cm}\#define S\-E\-N\-D\-\_\-\-A\-P\-P\-\_\-\-O\-P~41}}\label{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a2eaad7063a8c3ca316b571c49008f6bc}


Definition at line 70 of file sdmmc.\-h.

\hypertarget{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a264ef466ea3f1a08a8c9de81e0e3f24d}{\index{p32/include/pinguino/libraries/sd/sdmmc.\-h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}!S\-E\-N\-D\-\_\-\-C\-I\-D@{S\-E\-N\-D\-\_\-\-C\-I\-D}}
\index{S\-E\-N\-D\-\_\-\-C\-I\-D@{S\-E\-N\-D\-\_\-\-C\-I\-D}!p32/include/pinguino/libraries/sd/sdmmc.h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}}
\subsubsection[{S\-E\-N\-D\-\_\-\-C\-I\-D}]{\setlength{\rightskip}{0pt plus 5cm}\#define S\-E\-N\-D\-\_\-\-C\-I\-D~10}}\label{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a264ef466ea3f1a08a8c9de81e0e3f24d}


Definition at line 67 of file sdmmc.\-h.

\hypertarget{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a85a884eec438d450dc1c05e8d9d29044}{\index{p32/include/pinguino/libraries/sd/sdmmc.\-h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}!S\-E\-N\-D\-\_\-\-C\-S\-D@{S\-E\-N\-D\-\_\-\-C\-S\-D}}
\index{S\-E\-N\-D\-\_\-\-C\-S\-D@{S\-E\-N\-D\-\_\-\-C\-S\-D}!p32/include/pinguino/libraries/sd/sdmmc.h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}}
\subsubsection[{S\-E\-N\-D\-\_\-\-C\-S\-D}]{\setlength{\rightskip}{0pt plus 5cm}\#define S\-E\-N\-D\-\_\-\-C\-S\-D~9}}\label{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a85a884eec438d450dc1c05e8d9d29044}


Definition at line 66 of file sdmmc.\-h.

\hypertarget{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a78fa7723a4dedb1533ef47662258c5c4}{\index{p32/include/pinguino/libraries/sd/sdmmc.\-h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}!S\-E\-T\-\_\-\-B\-L\-E\-N@{S\-E\-T\-\_\-\-B\-L\-E\-N}}
\index{S\-E\-T\-\_\-\-B\-L\-E\-N@{S\-E\-T\-\_\-\-B\-L\-E\-N}!p32/include/pinguino/libraries/sd/sdmmc.h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}}
\subsubsection[{S\-E\-T\-\_\-\-B\-L\-E\-N}]{\setlength{\rightskip}{0pt plus 5cm}\#define S\-E\-T\-\_\-\-B\-L\-E\-N~16}}\label{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a78fa7723a4dedb1533ef47662258c5c4}


Definition at line 68 of file sdmmc.\-h.

\hypertarget{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a5d89c559dd2f905ae0f8f9d16b16647d}{\index{p32/include/pinguino/libraries/sd/sdmmc.\-h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}!W\-\_\-\-T\-I\-M\-E\-O\-U\-T@{W\-\_\-\-T\-I\-M\-E\-O\-U\-T}}
\index{W\-\_\-\-T\-I\-M\-E\-O\-U\-T@{W\-\_\-\-T\-I\-M\-E\-O\-U\-T}!p32/include/pinguino/libraries/sd/sdmmc.h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}}
\subsubsection[{W\-\_\-\-T\-I\-M\-E\-O\-U\-T}]{\setlength{\rightskip}{0pt plus 5cm}\#define W\-\_\-\-T\-I\-M\-E\-O\-U\-T~250000}}\label{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a5d89c559dd2f905ae0f8f9d16b16647d}


Definition at line 79 of file sdmmc.\-h.

\hypertarget{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_aa44d51cd8fac15d4a24ccf8c55ad7da5}{\index{p32/include/pinguino/libraries/sd/sdmmc.\-h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}!W\-R\-I\-T\-E\-\_\-\-S\-I\-N\-G\-L\-E@{W\-R\-I\-T\-E\-\_\-\-S\-I\-N\-G\-L\-E}}
\index{W\-R\-I\-T\-E\-\_\-\-S\-I\-N\-G\-L\-E@{W\-R\-I\-T\-E\-\_\-\-S\-I\-N\-G\-L\-E}!p32/include/pinguino/libraries/sd/sdmmc.h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}}
\subsubsection[{W\-R\-I\-T\-E\-\_\-\-S\-I\-N\-G\-L\-E}]{\setlength{\rightskip}{0pt plus 5cm}\#define W\-R\-I\-T\-E\-\_\-\-S\-I\-N\-G\-L\-E~24}}\label{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_aa44d51cd8fac15d4a24ccf8c55ad7da5}


Definition at line 63 of file sdmmc.\-h.



\subsection{Typedef Documentation}
\hypertarget{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_ae191ab80499bded9e0668daa98faa849}{\index{p32/include/pinguino/libraries/sd/sdmmc.\-h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}!L\-B\-A@{L\-B\-A}}
\index{L\-B\-A@{L\-B\-A}!p32/include/pinguino/libraries/sd/sdmmc.h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}}
\subsubsection[{L\-B\-A}]{\setlength{\rightskip}{0pt plus 5cm}typedef unsigned {\bf L\-B\-A}}}\label{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_ae191ab80499bded9e0668daa98faa849}


Definition at line 85 of file sdmmc.\-h.



\subsection{Function Documentation}
\hypertarget{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a1531d2f76a265f4def4044d9c028c1a5}{\index{p32/include/pinguino/libraries/sd/sdmmc.\-h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}!disable\-S\-D@{disable\-S\-D}}
\index{disable\-S\-D@{disable\-S\-D}!p32/include/pinguino/libraries/sd/sdmmc.h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}}
\subsubsection[{disable\-S\-D}]{\setlength{\rightskip}{0pt plus 5cm}void disable\-S\-D (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a1531d2f76a265f4def4044d9c028c1a5}


Definition at line 46 of file sdmmc.\-c.



References clock\-S\-P\-I, digitalwrite(), H\-I\-G\-H, and S\-D\-C\-S.



Referenced by init\-Media(), read\-S\-E\-C\-T\-O\-R(), and write\-S\-E\-C\-T\-O\-R().


\begin{DoxyCode}
47 \{
48     \hyperlink{p8_2pinguino_2core_2digitalw_8c_aa8b647552ab4292b55b14ab37b166908}{digitalwrite}(\hyperlink{p8_2pinguino_2libraries_2sd_2fileio_8h_a9470cb8f6ac9077bf21f815e37d13f09}{SDCS}, \hyperlink{p8_2pinguino_2core_2const_8h_a5bb885982ff66a2e0a0a45a8ee9c35e2}{HIGH});   \textcolor{comment}{// Deselected = SDCS high}
49     \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8c_ab71fa577a8bc96bd643f084e22eed47b}{clockSPI}();
50 \}
\end{DoxyCode}
\hypertarget{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_aea80f1bdf2c4aba640129a965f4e071f}{\index{p32/include/pinguino/libraries/sd/sdmmc.\-h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}!enable\-S\-D@{enable\-S\-D}}
\index{enable\-S\-D@{enable\-S\-D}!p32/include/pinguino/libraries/sd/sdmmc.h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}}
\subsubsection[{enable\-S\-D}]{\setlength{\rightskip}{0pt plus 5cm}void enable\-S\-D (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_aea80f1bdf2c4aba640129a965f4e071f}


Definition at line 52 of file sdmmc.\-c.



References digitalwrite(), L\-O\-W, and S\-D\-C\-S.



Referenced by init\-Media(), and send\-S\-D\-Cmd().


\begin{DoxyCode}
53 \{
54     \hyperlink{p8_2pinguino_2core_2digitalw_8c_aa8b647552ab4292b55b14ab37b166908}{digitalwrite}(\hyperlink{p8_2pinguino_2libraries_2sd_2fileio_8h_a9470cb8f6ac9077bf21f815e37d13f09}{SDCS}, \hyperlink{p8_2pinguino_2core_2const_8h_ab811d8c6ff3a505312d3276590444289}{LOW}); \textcolor{comment}{// Selected = SDCS low}
55 \}
\end{DoxyCode}
\hypertarget{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_acfab82dd441d6c904d017b9e184a1bff}{\index{p32/include/pinguino/libraries/sd/sdmmc.\-h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}!get\-C\-D@{get\-C\-D}}
\index{get\-C\-D@{get\-C\-D}!p32/include/pinguino/libraries/sd/sdmmc.h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}}
\subsubsection[{get\-C\-D}]{\setlength{\rightskip}{0pt plus 5cm}int get\-C\-D (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_acfab82dd441d6c904d017b9e184a1bff}


Definition at line 262 of file sdmmc.\-c.



References T\-R\-U\-E.



Referenced by disk\-\_\-timerproc(), and mount().


\begin{DoxyCode}
263 \{
264     \textcolor{keywordflow}{return} \hyperlink{p8_2pinguino_2core_2const_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
265     \textcolor{comment}{//return (SDCD);}
266 \}
\end{DoxyCode}
\hypertarget{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_ab1fe58d1bc69cb9c56452e46448c1d60}{\index{p32/include/pinguino/libraries/sd/sdmmc.\-h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}!get\-W\-P@{get\-W\-P}}
\index{get\-W\-P@{get\-W\-P}!p32/include/pinguino/libraries/sd/sdmmc.h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}}
\subsubsection[{get\-W\-P}]{\setlength{\rightskip}{0pt plus 5cm}int get\-W\-P (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_ab1fe58d1bc69cb9c56452e46448c1d60}


Definition at line 271 of file sdmmc.\-c.



References F\-A\-L\-S\-E.



Referenced by disk\-\_\-timerproc(), and write\-S\-E\-C\-T\-O\-R().


\begin{DoxyCode}
272 \{
273     \textcolor{keywordflow}{return} \hyperlink{p8_2pinguino_2core_2const_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
274     \textcolor{comment}{//return (SDWP);}
275 \}
\end{DoxyCode}
\hypertarget{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a0a62982cc6fc4507eacea6f73767da72}{\index{p32/include/pinguino/libraries/sd/sdmmc.\-h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}!init\-Media@{init\-Media}}
\index{init\-Media@{init\-Media}!p32/include/pinguino/libraries/sd/sdmmc.h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}}
\subsubsection[{init\-Media}]{\setlength{\rightskip}{0pt plus 5cm}int init\-Media (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a0a62982cc6fc4507eacea6f73767da72}


Definition at line 107 of file sdmmc.\-c.



References clock\-S\-P\-I, disable\-S\-D(), E\-\_\-\-C\-O\-M\-M\-A\-N\-D\-\_\-\-A\-C\-K, E\-\_\-\-I\-N\-I\-T\-\_\-\-T\-I\-M\-E\-O\-U\-T, enable\-S\-D(), I\-\_\-\-T\-I\-M\-E\-O\-U\-T, I\-N\-I\-T, R\-E\-S\-E\-T, and send\-S\-D\-Cmd().



Referenced by mount().


\begin{DoxyCode}
108 \{
109     \textcolor{keywordtype}{int} i, r;
110 
111     \textcolor{comment}{// 1. with the card NOT selected     }
112     \textcolor{comment}{// Set DI and CS high}
113     \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8c_a1531d2f76a265f4def4044d9c028c1a5}{disableSD}(); 
114 
115     \textcolor{comment}{// 2. send 74 or more clock cycles to start up}
116     \textcolor{comment}{// apply 74 or more clock pulses to SCLK.}
117     \textcolor{comment}{// The card will enter its native operating mode and go ready to accept native commands.}
118     \textcolor{keywordflow}{for} (i=0; i<10; i++)
119         \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8c_ab71fa577a8bc96bd643f084e22eed47b}{clockSPI}();
120 
121     \textcolor{comment}{// 3. now select the card}
122     \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8c_aea80f1bdf2c4aba640129a965f4e071f}{enableSD}();
123 
124     \textcolor{comment}{// 4. send a single RESET command}
125     \textcolor{comment}{// Send a CMD0 with CS low to reset the card.}
126     r = \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8c_af35781ed6bb5671aa7cf321e48ed0009}{sendSDCmd}(\hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, 0);
127     \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8c_a1531d2f76a265f4def4044d9c028c1a5}{disableSD}();
128     \textcolor{keywordflow}{if} (r != 1)                \textcolor{comment}{// must return Idle}
129         \textcolor{keywordflow}{return} \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8h_a0d371bd9dc0df54489199aad563155b0}{E\_COMMAND\_ACK};   \textcolor{comment}{// comand rejected}
130 
131     \textcolor{comment}{// 5. send repeatedly INIT until Idle terminates}
132     \textcolor{keywordflow}{for} (i=0; i<\hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8h_ab1ceea657d19e00656db1559099d9ba9}{I\_TIMEOUT}; i++) 
133     \{
134         r = \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8c_af35781ed6bb5671aa7cf321e48ed0009}{sendSDCmd}(\hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8h_ab5889105dcd019008c9448dff61323f6}{INIT}, 0);
135         \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8c_a1531d2f76a265f4def4044d9c028c1a5}{disableSD}();
136         \textcolor{keywordflow}{if} (!r) 
137             \textcolor{keywordflow}{break}; 
138     \} 
139     \textcolor{keywordflow}{if} (i == I\_TIMEOUT)   
140         \textcolor{keywordflow}{return} \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8h_a96c1fea55347ad0c3bf3f39c092bb0bb}{E\_INIT\_TIMEOUT};  \textcolor{comment}{// init timed out }
141 
142     \textcolor{comment}{// 6. increase speed }
143     SSPCON1bits.SSPEN = 0;  \textcolor{comment}{// Disable SPI}
144     SSPCON1 = SSPCON1 & 0b11110000; \textcolor{comment}{// SSPM<3:0> = 0000 = SPI Master mode, clock = FOSC/4}
145     SSPCON1bits.SSPEN = 1;  \textcolor{comment}{// Enable SPI}
146 
147     \textcolor{keywordflow}{return} 0;           
148 \} \textcolor{comment}{// init media}
\end{DoxyCode}
\hypertarget{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a469e8fffcf5a77dc542d8acea1cfea57}{\index{p32/include/pinguino/libraries/sd/sdmmc.\-h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}!init\-S\-D@{init\-S\-D}}
\index{init\-S\-D@{init\-S\-D}!p32/include/pinguino/libraries/sd/sdmmc.h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}}
\subsubsection[{init\-S\-D}]{\setlength{\rightskip}{0pt plus 5cm}void init\-S\-D (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a469e8fffcf5a77dc542d8acea1cfea57}


Definition at line 26 of file sdmmc.\-c.



References digitalwrite(), Get\-Peripheral\-Clock(), H\-I\-G\-H, I\-N\-P\-U\-T, O\-U\-T\-P\-U\-T, pinmode(), and S\-D\-C\-S.



Referenced by mount().


\begin{DoxyCode}
27 \{
28     \hyperlink{p8_2pinguino_2core_2digitalw_8c_aa8b647552ab4292b55b14ab37b166908}{digitalwrite}(\hyperlink{p8_2pinguino_2libraries_2sd_2fileio_8h_a9470cb8f6ac9077bf21f815e37d13f09}{SDCS}, \hyperlink{p8_2pinguino_2core_2const_8h_a5bb885982ff66a2e0a0a45a8ee9c35e2}{HIGH});   \textcolor{comment}{// initially keep the SD card disabled}
29     \hyperlink{digitalp_8c_a4b7fb3b918515dd8def26fd611013db2}{pinmode}(\hyperlink{p8_2pinguino_2libraries_2sd_2fileio_8h_a9470cb8f6ac9077bf21f815e37d13f09}{SDCS}, \hyperlink{p8_2pinguino_2core_2const_8h_a61a3c9a18380aafb6e430e79bf596557}{OUTPUT});     \textcolor{comment}{// make Card select an output pin}
30 
31     \textcolor{comment}{// SPI pin names are declared in pins.h}
32     \hyperlink{digitalp_8c_a4b7fb3b918515dd8def26fd611013db2}{pinmode}(SCK, \hyperlink{p8_2pinguino_2core_2const_8h_a61a3c9a18380aafb6e430e79bf596557}{OUTPUT});      \textcolor{comment}{// Master Mode : clock is output}
33     \hyperlink{digitalp_8c_a4b7fb3b918515dd8def26fd611013db2}{pinmode}(SDI, \hyperlink{p8_2pinguino_2core_2const_8h_a1bb283bd7893b9855e2f23013891fc82}{INPUT});
34     \hyperlink{digitalp_8c_a4b7fb3b918515dd8def26fd611013db2}{pinmode}(SDO, \hyperlink{p8_2pinguino_2core_2const_8h_a61a3c9a18380aafb6e430e79bf596557}{OUTPUT});
35 
36     \textcolor{comment}{// init the SPI module for a slow (safe) clock speed first}
37     SSPCON1bits.CKP = 0;        \textcolor{comment}{// Idle state for clock is a low level}
38     SSPSTATbits.CKE = 1;        \textcolor{comment}{// Transmit occurs on transition from active to Idle clock state}
39     SSPCON1 = SSPCON1 & 0b11110010; \textcolor{comment}{// SSPM<3:0> = 0010 = SPI Master mode, clock = FOSC/64}
40     SSPCON1bits.SSPEN = 1;  \textcolor{comment}{// Enables serial port and configures SCK, SDO, SDI and SS as serial port pins;}
41 \}   \textcolor{comment}{// initSD}
\end{DoxyCode}
\hypertarget{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a597faeb4452ea695d5c0daa449810afc}{\index{p32/include/pinguino/libraries/sd/sdmmc.\-h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}!read\-S\-E\-C\-T\-O\-R@{read\-S\-E\-C\-T\-O\-R}}
\index{read\-S\-E\-C\-T\-O\-R@{read\-S\-E\-C\-T\-O\-R}!p32/include/pinguino/libraries/sd/sdmmc.h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}}
\subsubsection[{read\-S\-E\-C\-T\-O\-R}]{\setlength{\rightskip}{0pt plus 5cm}int read\-S\-E\-C\-T\-O\-R (
\begin{DoxyParamCaption}
\item[{{\bf L\-B\-A}}]{, }
\item[{char $\ast$}]{}
\end{DoxyParamCaption}
)}}\label{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a597faeb4452ea695d5c0daa449810afc}


Definition at line 154 of file sdmmc.\-c.



References D\-A\-T\-A\-\_\-\-S\-T\-A\-R\-T, digitalwrite(), disable\-S\-D(), R\-\_\-\-T\-I\-M\-E\-O\-U\-T, R\-E\-A\-D\-\_\-\-S\-I\-N\-G\-L\-E, read\-S\-P\-I, and send\-S\-D\-Cmd().



Referenced by mount(), read\-D\-A\-T\-A(), read\-D\-I\-R(), and read\-F\-A\-T().


\begin{DoxyCode}
155 \{
156     \textcolor{keywordtype}{int} r, i;
157 
158 \textcolor{preprocessor}{    #ifdef READ\_LED    }
159 \textcolor{preprocessor}{}    \hyperlink{p8_2pinguino_2core_2digitalw_8c_aa8b647552ab4292b55b14ab37b166908}{digitalwrite}(READ\_LED, 0);
160 \textcolor{preprocessor}{    #endif}
161 \textcolor{preprocessor}{}
162     \textcolor{comment}{// 1. send READ command}
163     r = \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8c_af35781ed6bb5671aa7cf321e48ed0009}{sendSDCmd}(\hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8h_a549850eb399ab873a7a7c37696adcd5a}{READ\_SINGLE}, (a << 9));
164     \textcolor{keywordflow}{if} (r == 0)    \textcolor{comment}{// check if command was accepted}
165     \{  
166     \textcolor{comment}{// 2. wait for a response}
167     \textcolor{keywordflow}{for}(i=0; i<\hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8h_a73e9971e06d8b2cad0e70db0ef35df42}{R\_TIMEOUT}; i++)
168     \{
169     r = \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8c_ad7b4058b669998a3ca854c28167aa0a0}{readSPI}();     
170     \textcolor{keywordflow}{if} (r == \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8h_a5562e3e4189eff9e71305f172f2b515a}{DATA\_START}) 
171     \textcolor{keywordflow}{break};
172     \} 
173 
174     \textcolor{comment}{// 3. if it did not timeout, read 512 byte of data}
175     \textcolor{keywordflow}{if} (i != R\_TIMEOUT)
176     \{
177         i = 512;
178         \textcolor{keywordflow}{do}\{ 
179             *p++ = \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8c_ad7b4058b669998a3ca854c28167aa0a0}{readSPI}();
180         \} \textcolor{keywordflow}{while} (--i>0);
181 
182         \textcolor{comment}{// 4. ignore CRC}
183         \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8c_ad7b4058b669998a3ca854c28167aa0a0}{readSPI}();
184         \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8c_ad7b4058b669998a3ca854c28167aa0a0}{readSPI}();
185 
186     \} \textcolor{comment}{// data arrived}
187 
188     \} \textcolor{comment}{// command accepted}
189 
190     \textcolor{comment}{// 5. remember to disable the card}
191     \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8c_a1531d2f76a265f4def4044d9c028c1a5}{disableSD}();
192 
193 \textcolor{preprocessor}{    #ifdef READLED}
194 \textcolor{preprocessor}{}    digital(READ\_LED, 1);
195 \textcolor{preprocessor}{    #endif}
196 \textcolor{preprocessor}{}
197     \textcolor{keywordflow}{return} (r == \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8h_a5562e3e4189eff9e71305f172f2b515a}{DATA\_START});    \textcolor{comment}{// return TRUE if successful}
198 \} \textcolor{comment}{// readSECTOR}
\end{DoxyCode}
\hypertarget{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a14348d35c5258583bb2bedaf5c98630b}{\index{p32/include/pinguino/libraries/sd/sdmmc.\-h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}!send\-S\-D\-Cmd@{send\-S\-D\-Cmd}}
\index{send\-S\-D\-Cmd@{send\-S\-D\-Cmd}!p32/include/pinguino/libraries/sd/sdmmc.h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}}
\subsubsection[{send\-S\-D\-Cmd}]{\setlength{\rightskip}{0pt plus 5cm}int send\-S\-D\-Cmd (
\begin{DoxyParamCaption}
\item[{unsigned}]{char, }
\item[{unsigned}]{}
\end{DoxyParamCaption}
)}}\label{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a14348d35c5258583bb2bedaf5c98630b}


Definition at line 59 of file sdmmc.\-c.



References enable\-S\-D(), read\-S\-P\-I, and write\-S\-P\-I().



Referenced by init\-Media(), read\-S\-E\-C\-T\-O\-R(), and write\-S\-E\-C\-T\-O\-R().


\begin{DoxyCode}
60 \{
61     \textcolor{keywordtype}{int} i, r;
62 
63     \textcolor{comment}{// enable SD card}
64     \textcolor{comment}{// CS low}
65     \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8c_aea80f1bdf2c4aba640129a965f4e071f}{enableSD}();
66 
67     \textcolor{comment}{// send a comand packet (6 bytes)}
68     \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8c_a6a1a198a7f27db28761172fa4426daf3}{writeSPI}(\hyperlink{p8_2pinguino_2libraries_2_p_c_d8544_8c_aa0dd25f53b00986c159fb20de6894e51}{c} | 0x40);    \textcolor{comment}{// send command }
69     \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8c_a6a1a198a7f27db28761172fa4426daf3}{writeSPI}(a>>24);       \textcolor{comment}{// msb of the address}
70     \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8c_a6a1a198a7f27db28761172fa4426daf3}{writeSPI}(a>>16);       
71     \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8c_a6a1a198a7f27db28761172fa4426daf3}{writeSPI}(a>>8);
72     \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8c_a6a1a198a7f27db28761172fa4426daf3}{writeSPI}(a);           \textcolor{comment}{// lsb}
73 
74     \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8c_a6a1a198a7f27db28761172fa4426daf3}{writeSPI}(0x95);        \textcolor{comment}{// send CMD0 CRC }
75 
76     \textcolor{comment}{// now wait for a response, allow for up to 8 bytes delay}
77     \textcolor{keywordflow}{for}(i=0; i<8; i++) 
78     \{
79         r = \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8c_ad7b4058b669998a3ca854c28167aa0a0}{readSPI}();      
80         \textcolor{keywordflow}{if} (r != 0xFF) 
81             \textcolor{keywordflow}{break};
82     \}
83     \textcolor{keywordflow}{return} (r);         
84 
85     \textcolor{comment}{/* return response}
86 \textcolor{comment}{    FF - timeout }
87 \textcolor{comment}{    00 - command accepted}
88 \textcolor{comment}{    01 - command received, card in idle state after RESET}
89 \textcolor{comment}{}
90 \textcolor{comment}{    other codes:}
91 \textcolor{comment}{    bit 0 = Idle state}
92 \textcolor{comment}{    bit 1 = Erase Reset}
93 \textcolor{comment}{    bit 2 = Illegal command}
94 \textcolor{comment}{    bit 3 = Communication CRC error}
95 \textcolor{comment}{    bit 4 = Erase sequence error}
96 \textcolor{comment}{    bit 5 = Address error}
97 \textcolor{comment}{    bit 6 = Parameter error}
98 \textcolor{comment}{    bit 7 = Always 0}
99 \textcolor{comment}{    */}
100     \textcolor{comment}{// NOTE CSCD is still low!}
101 \} \textcolor{comment}{// sendSDCmd}
\end{DoxyCode}
\hypertarget{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a9db00b236e677dff212c4297fb70a2d2}{\index{p32/include/pinguino/libraries/sd/sdmmc.\-h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}!write\-S\-E\-C\-T\-O\-R@{write\-S\-E\-C\-T\-O\-R}}
\index{write\-S\-E\-C\-T\-O\-R@{write\-S\-E\-C\-T\-O\-R}!p32/include/pinguino/libraries/sd/sdmmc.h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}}
\subsubsection[{write\-S\-E\-C\-T\-O\-R}]{\setlength{\rightskip}{0pt plus 5cm}int write\-S\-E\-C\-T\-O\-R (
\begin{DoxyParamCaption}
\item[{{\bf L\-B\-A}}]{, }
\item[{char $\ast$}]{}
\end{DoxyParamCaption}
)}}\label{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a9db00b236e677dff212c4297fb70a2d2}


Definition at line 204 of file sdmmc.\-c.



References clock\-S\-P\-I, D\-A\-T\-A\-\_\-\-A\-C\-C\-E\-P\-T, D\-A\-T\-A\-\_\-\-S\-T\-A\-R\-T, digitalwrite(), disable\-S\-D(), F\-A\-I\-L, get\-W\-P(), read\-S\-P\-I, send\-S\-D\-Cmd(), W\-\_\-\-T\-I\-M\-E\-O\-U\-T, W\-R\-I\-T\-E\-\_\-\-S\-I\-N\-G\-L\-E, and write\-S\-P\-I().



Referenced by write\-D\-A\-T\-A(), write\-D\-I\-R(), and write\-F\-A\-T().


\begin{DoxyCode}
205 \{
206     \textcolor{keywordtype}{unsigned} r, i;
207 
208     \textcolor{comment}{// 0. check Write Protect}
209     \textcolor{keywordflow}{if} (\hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8c_a57e48dc648d410cdfe264eecdbd74afc}{getWP}())
210         \textcolor{keywordflow}{return} \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8h_abb508ea8227673f419e9fe3a86c30d8e}{FAIL};
211 
212     \textcolor{comment}{// 1. send WRITE command}
213     r = \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8c_af35781ed6bb5671aa7cf321e48ed0009}{sendSDCmd}(\hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8h_aa44d51cd8fac15d4a24ccf8c55ad7da5}{WRITE\_SINGLE}, (a << 9));
214     \textcolor{keywordflow}{if} (r == 0)    \textcolor{comment}{// check if command was accepted}
215     \{  
216         \textcolor{comment}{// 2. send data}
217         \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8c_a6a1a198a7f27db28761172fa4426daf3}{writeSPI}(\hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8h_a5562e3e4189eff9e71305f172f2b515a}{DATA\_START});
218 
219         \textcolor{comment}{// send 512 bytes of data}
220         \textcolor{keywordflow}{for}(i=0; i<512; i++)
221         \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8c_a6a1a198a7f27db28761172fa4426daf3}{writeSPI}(*p++);
222 
223         \textcolor{comment}{// 3. send dummy CRC}
224         \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8c_ab71fa577a8bc96bd643f084e22eed47b}{clockSPI}();
225         \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8c_ab71fa577a8bc96bd643f084e22eed47b}{clockSPI}();
226 
227         \textcolor{comment}{// 4. check if data accepted}
228         r = \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8c_ad7b4058b669998a3ca854c28167aa0a0}{readSPI}(); 
229         \textcolor{keywordflow}{if} ((r & 0xf) == \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8h_a11a962adddfd0449f2401bbefeac89bd}{DATA\_ACCEPT})
230         \{   
231 \textcolor{preprocessor}{            #ifdef WRITE\_LED    }
232 \textcolor{preprocessor}{}            \hyperlink{p8_2pinguino_2core_2digitalw_8c_aa8b647552ab4292b55b14ab37b166908}{digitalwrite}(WRITE\_LED, 0);
233 \textcolor{preprocessor}{            #endif}
234 \textcolor{preprocessor}{}
235             \textcolor{comment}{// 5. wait for write completion}
236             \textcolor{keywordflow}{for}(i=0; i<\hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8h_a5d89c559dd2f905ae0f8f9d16b16647d}{W\_TIMEOUT}; i++)
237             \{ 
238                 r = \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8c_ad7b4058b669998a3ca854c28167aa0a0}{readSPI}();
239                 \textcolor{keywordflow}{if} (r != 0 )
240                     \textcolor{keywordflow}{break};
241             \} 
242 \textcolor{preprocessor}{            #ifdef WRITE\_LED}
243 \textcolor{preprocessor}{}            \hyperlink{p8_2pinguino_2core_2digitalw_8c_aa8b647552ab4292b55b14ab37b166908}{digitalwrite}(WRITE\_LED, 1);
244 \textcolor{preprocessor}{            #endif}
245 \textcolor{preprocessor}{}        \} \textcolor{comment}{// accepted}
246         \textcolor{keywordflow}{else}
247         \{
248             r = \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8h_abb508ea8227673f419e9fe3a86c30d8e}{FAIL};
249         \}
250     \} \textcolor{comment}{// command accepted}
251 
252     \textcolor{comment}{// 6. disable the card}
253     \hyperlink{p8_2pinguino_2libraries_2sd_2sdmmc_8c_a1531d2f76a265f4def4044d9c028c1a5}{disableSD}();
254 
255     \textcolor{keywordflow}{return} (r);      \textcolor{comment}{// return TRUE if successful}
256 \} \textcolor{comment}{// writeSECTOR}
\end{DoxyCode}
\hypertarget{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a39a07566d7d6294bb14c9069983c36ed}{\index{p32/include/pinguino/libraries/sd/sdmmc.\-h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}!write\-S\-P\-I@{write\-S\-P\-I}}
\index{write\-S\-P\-I@{write\-S\-P\-I}!p32/include/pinguino/libraries/sd/sdmmc.h@{p32/include/pinguino/libraries/sd/sdmmc.\-h}}
\subsubsection[{write\-S\-P\-I}]{\setlength{\rightskip}{0pt plus 5cm}unsigned char write\-S\-P\-I (
\begin{DoxyParamCaption}
\item[{unsigned}]{char}
\end{DoxyParamCaption}
)}}\label{p32_2include_2pinguino_2libraries_2sd_2sdmmc_8h_a39a07566d7d6294bb14c9069983c36ed}


Definition at line 19 of file sdmmc.\-c.



Referenced by send\-S\-D\-Cmd(), and write\-S\-E\-C\-T\-O\-R().


\begin{DoxyCode}
20 \{
21     SSPBUF = b;                     \textcolor{comment}{// write to buffer for TX}
22     \textcolor{keywordflow}{while}(!SSPSTATbits.BF);     \textcolor{comment}{// wait transfer complete}
23     \textcolor{keywordflow}{return} SSPBUF;                  \textcolor{comment}{// read the received value}
24 \}   \textcolor{comment}{// writeSPI}
\end{DoxyCode}
