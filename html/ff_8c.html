<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Pinguino: /dvpt/pinguino/git/pinguino-libraries/p32/include/pinguino/libraries/sd/ff.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Pinguino
   &#160;<span id="projectnumber">10.4r1003</span>
   </div>
   <div id="projectbrief">Datas structures &amp; Files</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_38d7af576eb0f5485437681c6a751127.html">pinguino-libraries</a></li><li class="navelem"><a class="el" href="dir_c07cc5c6d511a9d3829949db222fe236.html">p32</a></li><li class="navelem"><a class="el" href="dir_bccc6ff37517f505a828c53019dde22e.html">include</a></li><li class="navelem"><a class="el" href="dir_bd4da767316d85ac7ba7ddea0622c007.html">pinguino</a></li><li class="navelem"><a class="el" href="dir_c6e923c454b78ba93581e59ffb4145b8.html">libraries</a></li><li class="navelem"><a class="el" href="dir_920d7c660ba5045ac37337a6d145e2a4.html">sd</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ff.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="ff_8h_source.html">ff.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="p32_2include_2pinguino_2libraries_2sd_2diskio_8h_source.html">diskio.h</a>&quot;</code><br/>
</div>
<p><a href="ff_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a42b5140fc5e09a53c8f4cba66dc0e6c1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs)&#160;&#160;&#160;512U			/* Fixed sector size */</td></tr>
<tr class="separator:a42b5140fc5e09a53c8f4cba66dc0e6c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a458e336ac53f8249ed02d844469b7076"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a458e336ac53f8249ed02d844469b7076">ENTER_FF</a>(fs)</td></tr>
<tr class="separator:a458e336ac53f8249ed02d844469b7076"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e653d8ca0ae09faa49cd5b7335fea84"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fs, <a class="el" href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a>)&#160;&#160;&#160;return <a class="el" href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a></td></tr>
<tr class="separator:a7e653d8ca0ae09faa49cd5b7335fea84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41e4c46636679236568cf50b5535847f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fs, <a class="el" href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a>)&#160;&#160;&#160;{ fp-&gt;flag |= <a class="el" href="ff_8h.html#ad3b47fe8126573b17752a9a242b76b9a">FA__ERROR</a>; <a class="el" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fs, <a class="el" href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a>); }</td></tr>
<tr class="separator:a41e4c46636679236568cf50b5535847f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19cd426084600d6007eb6f976c81fbdf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a19cd426084600d6007eb6f976c81fbdf">LD_CLUST</a>(<a class="el" href="tff_8c.html#addeee88e846cc637a785bcaf23b45b5e">dir</a>)&#160;&#160;&#160;(((<a class="el" href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)<a class="el" href="ff_8h.html#a398519bb08da6457e62567d1f0b567e3">LD_WORD</a>(<a class="el" href="tff_8c.html#addeee88e846cc637a785bcaf23b45b5e">dir</a>+<a class="el" href="ff_8c.html#a0bc29c3f09e1e9c40c414f7d50d7905c">DIR_FstClusHI</a>)&lt;&lt;16) | <a class="el" href="ff_8h.html#a398519bb08da6457e62567d1f0b567e3">LD_WORD</a>(<a class="el" href="tff_8c.html#addeee88e846cc637a785bcaf23b45b5e">dir</a>+<a class="el" href="ff_8c.html#aebe0e913bff75a89d38dbcb04baf5dff">DIR_FstClusLO</a>))</td></tr>
<tr class="separator:a19cd426084600d6007eb6f976c81fbdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08174fa72222a48a5c9e5de70c341af7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a08174fa72222a48a5c9e5de70c341af7">ST_CLUST</a>(<a class="el" href="tff_8c.html#addeee88e846cc637a785bcaf23b45b5e">dir</a>, cl)&#160;&#160;&#160;{<a class="el" href="ff_8h.html#a95ceb4c25b216e71baa7102939edfd0d">ST_WORD</a>(<a class="el" href="tff_8c.html#addeee88e846cc637a785bcaf23b45b5e">dir</a>+<a class="el" href="ff_8c.html#aebe0e913bff75a89d38dbcb04baf5dff">DIR_FstClusLO</a>, cl); <a class="el" href="ff_8h.html#a95ceb4c25b216e71baa7102939edfd0d">ST_WORD</a>(<a class="el" href="tff_8c.html#addeee88e846cc637a785bcaf23b45b5e">dir</a>+<a class="el" href="ff_8c.html#a0bc29c3f09e1e9c40c414f7d50d7905c">DIR_FstClusHI</a>, (<a class="el" href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)cl&gt;&gt;16);}</td></tr>
<tr class="separator:a08174fa72222a48a5c9e5de70c341af7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a228bfd2cabe490c8567aaf08b8b2cc14"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a228bfd2cabe490c8567aaf08b8b2cc14">_DF1S</a>&#160;&#160;&#160;0x81	/* DBC 1st byte range 1 start */</td></tr>
<tr class="separator:a228bfd2cabe490c8567aaf08b8b2cc14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6ce87cea84298e562cae4f6cde3c341"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#ad6ce87cea84298e562cae4f6cde3c341">_DF1E</a>&#160;&#160;&#160;0x9F	/* DBC 1st byte range 1 end */</td></tr>
<tr class="separator:ad6ce87cea84298e562cae4f6cde3c341"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89ebd362b483a3a465fb485c9535a3c4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a89ebd362b483a3a465fb485c9535a3c4">_DF2S</a>&#160;&#160;&#160;0xE0	/* DBC 1st byte range 2 start */</td></tr>
<tr class="separator:a89ebd362b483a3a465fb485c9535a3c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae92fde14909ccf6bec27f051a4b88a79"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#ae92fde14909ccf6bec27f051a4b88a79">_DF2E</a>&#160;&#160;&#160;0xFC	/* DBC 1st byte range 2 end */</td></tr>
<tr class="separator:ae92fde14909ccf6bec27f051a4b88a79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a866564522f9fb431919f86ae507c42ef"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a866564522f9fb431919f86ae507c42ef">_DS1S</a>&#160;&#160;&#160;0x40	/* DBC 2nd byte range 1 start */</td></tr>
<tr class="separator:a866564522f9fb431919f86ae507c42ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97cf766baca26c0ac1110df26e479c4c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a97cf766baca26c0ac1110df26e479c4c">_DS1E</a>&#160;&#160;&#160;0x7E	/* DBC 2nd byte range 1 end */</td></tr>
<tr class="separator:a97cf766baca26c0ac1110df26e479c4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fd34725741cf6dc0524df2adbbb5a94"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a6fd34725741cf6dc0524df2adbbb5a94">_DS2S</a>&#160;&#160;&#160;0x80	/* DBC 2nd byte range 2 start */</td></tr>
<tr class="separator:a6fd34725741cf6dc0524df2adbbb5a94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e747e5204b28f9c72c91cee52fde572"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a0e747e5204b28f9c72c91cee52fde572">_DS2E</a>&#160;&#160;&#160;0xFC	/* DBC 2nd byte range 2 end */</td></tr>
<tr class="separator:a0e747e5204b28f9c72c91cee52fde572"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89b2514198590e139dd064c5d534f302"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a89b2514198590e139dd064c5d534f302">IsUpper</a>(<a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a>)&#160;&#160;&#160;(((<a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a>)&gt;='<a class="el" href="p32_2include_2pinguino_2core_2sound_8c.html#a955f504eccf76b4eb2489c0adab03121">A</a>')&amp;&amp;((<a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a>)&lt;='Z'))</td></tr>
<tr class="separator:a89b2514198590e139dd064c5d534f302"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a9d454724926bd51a3aed589a97f08b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a4a9d454724926bd51a3aed589a97f08b">IsLower</a>(<a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a>)&#160;&#160;&#160;(((<a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a>)&gt;='a')&amp;&amp;((<a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a>)&lt;='z'))</td></tr>
<tr class="separator:a4a9d454724926bd51a3aed589a97f08b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65dee564f69f2ec27f25b67a348018b9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a65dee564f69f2ec27f25b67a348018b9">IsDigit</a>(<a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a>)&#160;&#160;&#160;(((<a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a>)&gt;='0')&amp;&amp;((<a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a>)&lt;='9'))</td></tr>
<tr class="separator:a65dee564f69f2ec27f25b67a348018b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58d63a832a117f179e41c7373d013dd6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a58d63a832a117f179e41c7373d013dd6">IsDBCS1</a>(<a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a>)&#160;&#160;&#160;(((<a class="el" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a>)(<a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a>) &gt;= <a class="el" href="ff_8c.html#a228bfd2cabe490c8567aaf08b8b2cc14">_DF1S</a> &amp;&amp; (<a class="el" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a>)(<a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a>) &lt;= <a class="el" href="ff_8c.html#ad6ce87cea84298e562cae4f6cde3c341">_DF1E</a>) || ((<a class="el" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a>)(<a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a>) &gt;= <a class="el" href="ff_8c.html#a89ebd362b483a3a465fb485c9535a3c4">_DF2S</a> &amp;&amp; (<a class="el" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a>)(<a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a>) &lt;= <a class="el" href="ff_8c.html#ae92fde14909ccf6bec27f051a4b88a79">_DF2E</a>))</td></tr>
<tr class="separator:a58d63a832a117f179e41c7373d013dd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66a3fa880af6078ef181656c1d7d8ef1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a66a3fa880af6078ef181656c1d7d8ef1">IsDBCS2</a>(<a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a>)&#160;&#160;&#160;(((<a class="el" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a>)(<a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a>) &gt;= <a class="el" href="ff_8c.html#a866564522f9fb431919f86ae507c42ef">_DS1S</a> &amp;&amp; (<a class="el" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a>)(<a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a>) &lt;= <a class="el" href="ff_8c.html#a97cf766baca26c0ac1110df26e479c4c">_DS1E</a>) || ((<a class="el" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a>)(<a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a>) &gt;= <a class="el" href="ff_8c.html#a6fd34725741cf6dc0524df2adbbb5a94">_DS2S</a> &amp;&amp; (<a class="el" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a>)(<a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a>) &lt;= <a class="el" href="ff_8c.html#a0e747e5204b28f9c72c91cee52fde572">_DS2E</a>))</td></tr>
<tr class="separator:a66a3fa880af6078ef181656c1d7d8ef1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06c201f90533d5b49cd039c960327968"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a06c201f90533d5b49cd039c960327968">NS</a>&#160;&#160;&#160;11		/* Index of name <a class="el" href="p32_2include_2pinguino_2libraries_2ledcontrol_8h.html#a0e245df1940369c94735090b1ea1a9d9">status</a> <a class="el" href="p8_2pinguino_2core_2typedef_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> in <a class="el" href="tff_8c.html#a4eeeb71a8aa4cf022612fc51ab25ed15">fn</a>[] */</td></tr>
<tr class="separator:a06c201f90533d5b49cd039c960327968"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac92c92c3a3d6b9235ac98feeb00e565a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#ac92c92c3a3d6b9235ac98feeb00e565a">NS_LOSS</a>&#160;&#160;&#160;0x01	/* Out of 8.3 format */</td></tr>
<tr class="separator:ac92c92c3a3d6b9235ac98feeb00e565a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae957b8d4065ea0b3eed822aec5368d29"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#ae957b8d4065ea0b3eed822aec5368d29">NS_LFN</a>&#160;&#160;&#160;0x02	/* Force to create LFN entry */</td></tr>
<tr class="separator:ae957b8d4065ea0b3eed822aec5368d29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a0742bfc1d94f0c3baa5ede485048c4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a5a0742bfc1d94f0c3baa5ede485048c4">NS_LAST</a>&#160;&#160;&#160;0x04	/* Last segment */</td></tr>
<tr class="separator:a5a0742bfc1d94f0c3baa5ede485048c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a0e89b504dece19e2e4b02c83782ca2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a4a0e89b504dece19e2e4b02c83782ca2">NS_BODY</a>&#160;&#160;&#160;0x08	/* Lower case flag (body) */</td></tr>
<tr class="separator:a4a0e89b504dece19e2e4b02c83782ca2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b7fad0942e816fdb84d869c1f7a613e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a3b7fad0942e816fdb84d869c1f7a613e">NS_EXT</a>&#160;&#160;&#160;0x10	/* Lower case flag (ext) */</td></tr>
<tr class="separator:a3b7fad0942e816fdb84d869c1f7a613e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2db528782a021797b34bdc6e9e9de1c3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a2db528782a021797b34bdc6e9e9de1c3">NS_DOT</a>&#160;&#160;&#160;0x20	/* Dot entry */</td></tr>
<tr class="separator:a2db528782a021797b34bdc6e9e9de1c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeec02d5ae07ede32b7d74155bf0fda15"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#aeec02d5ae07ede32b7d74155bf0fda15">MIN_FAT16</a>&#160;&#160;&#160;4086	/* Minimum number of clusters for FAT16 */</td></tr>
<tr class="separator:aeec02d5ae07ede32b7d74155bf0fda15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a483625319f3e3bd5ac6502b46c375aed"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a483625319f3e3bd5ac6502b46c375aed">MIN_FAT32</a>&#160;&#160;&#160;65526	/* Minimum number of clusters for FAT32 */</td></tr>
<tr class="separator:a483625319f3e3bd5ac6502b46c375aed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f81669ee736efb2b2b49c7b0985472d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a8f81669ee736efb2b2b49c7b0985472d">BS_jmpBoot</a>&#160;&#160;&#160;0	/* Jump instruction (3) */</td></tr>
<tr class="separator:a8f81669ee736efb2b2b49c7b0985472d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02a76ada191ec2dc5f8af60ff3576da7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a02a76ada191ec2dc5f8af60ff3576da7">BS_OEMName</a>&#160;&#160;&#160;3	/* OEM name (8) */</td></tr>
<tr class="separator:a02a76ada191ec2dc5f8af60ff3576da7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8551844b4eb4e15aecd8cc9aa3585fa2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a8551844b4eb4e15aecd8cc9aa3585fa2">BPB_BytsPerSec</a>&#160;&#160;&#160;11	/* Sector size [<a class="el" href="p8_2pinguino_2core_2typedef_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>] (2) */</td></tr>
<tr class="separator:a8551844b4eb4e15aecd8cc9aa3585fa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab78e41c617a14b9540c0563d6b957fa"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#aab78e41c617a14b9540c0563d6b957fa">BPB_SecPerClus</a>&#160;&#160;&#160;13	/* Cluster size [sector] (1) */</td></tr>
<tr class="separator:aab78e41c617a14b9540c0563d6b957fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3ec444c8457c9bc98aa07e846f5c1b7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#ab3ec444c8457c9bc98aa07e846f5c1b7">BPB_RsvdSecCnt</a>&#160;&#160;&#160;14	/* Size of reserved area [sector] (2) */</td></tr>
<tr class="separator:ab3ec444c8457c9bc98aa07e846f5c1b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af44a1e8c89ec5502595f23496d24cbf1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#af44a1e8c89ec5502595f23496d24cbf1">BPB_NumFATs</a>&#160;&#160;&#160;16	/* Number of FAT copies (1) */</td></tr>
<tr class="separator:af44a1e8c89ec5502595f23496d24cbf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa667f14c87c45dc128f2ab208e92f98"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#aaa667f14c87c45dc128f2ab208e92f98">BPB_RootEntCnt</a>&#160;&#160;&#160;17	/* Number of root <a class="el" href="tff_8c.html#addeee88e846cc637a785bcaf23b45b5e">dir</a> entries for FAT12/16 (2) */</td></tr>
<tr class="separator:aaa667f14c87c45dc128f2ab208e92f98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4eb540eecde0f2df26fa8c7969341d68"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a4eb540eecde0f2df26fa8c7969341d68">BPB_TotSec16</a>&#160;&#160;&#160;19	/* Volume size [sector] (2) */</td></tr>
<tr class="separator:a4eb540eecde0f2df26fa8c7969341d68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a414e054c4b5ea3414ebefa3539e7e554"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a414e054c4b5ea3414ebefa3539e7e554">BPB_Media</a>&#160;&#160;&#160;21	/* Media descriptor (1) */</td></tr>
<tr class="separator:a414e054c4b5ea3414ebefa3539e7e554"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60a2f6efeb6a4c7cb2da1e5def6ca43b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a60a2f6efeb6a4c7cb2da1e5def6ca43b">BPB_FATSz16</a>&#160;&#160;&#160;22	/* FAT size [sector] (2) */</td></tr>
<tr class="separator:a60a2f6efeb6a4c7cb2da1e5def6ca43b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac71bb771432ea532bc47713a028ebd76"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#ac71bb771432ea532bc47713a028ebd76">BPB_SecPerTrk</a>&#160;&#160;&#160;24	/* Track size [sector] (2) */</td></tr>
<tr class="separator:ac71bb771432ea532bc47713a028ebd76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c03603c3be34d4c5cc1b481b0bc6774"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a9c03603c3be34d4c5cc1b481b0bc6774">BPB_NumHeads</a>&#160;&#160;&#160;26	/* Number of heads (2) */</td></tr>
<tr class="separator:a9c03603c3be34d4c5cc1b481b0bc6774"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a449d4ed5c4c8105daf29aad9488277f7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a449d4ed5c4c8105daf29aad9488277f7">BPB_HiddSec</a>&#160;&#160;&#160;28	/* Number of special hidden sectors (4) */</td></tr>
<tr class="separator:a449d4ed5c4c8105daf29aad9488277f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7723a9f0da553e8879d60909d85ccb7b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a7723a9f0da553e8879d60909d85ccb7b">BPB_TotSec32</a>&#160;&#160;&#160;32	/* Volume size [sector] (4) */</td></tr>
<tr class="separator:a7723a9f0da553e8879d60909d85ccb7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c51f7393341b839dfb241c2951f3ef4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a0c51f7393341b839dfb241c2951f3ef4">BS_DrvNum</a>&#160;&#160;&#160;36	/* Physical drive number (2) */</td></tr>
<tr class="separator:a0c51f7393341b839dfb241c2951f3ef4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85a92e790602efef4da3a2f141611ce8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a85a92e790602efef4da3a2f141611ce8">BS_BootSig</a>&#160;&#160;&#160;38	/* Extended boot signature (1) */</td></tr>
<tr class="separator:a85a92e790602efef4da3a2f141611ce8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a383a71bda500a0fb5a37f4edd785acbf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a383a71bda500a0fb5a37f4edd785acbf">BS_VolID</a>&#160;&#160;&#160;39	/* Volume serial number (4) */</td></tr>
<tr class="separator:a383a71bda500a0fb5a37f4edd785acbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28498ba4b07ff90aaa9628e81fb89d32"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a28498ba4b07ff90aaa9628e81fb89d32">BS_VolLab</a>&#160;&#160;&#160;43	/* Volume label (8) */</td></tr>
<tr class="separator:a28498ba4b07ff90aaa9628e81fb89d32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2264848692d36c1b2499c9b6a10acf75"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a2264848692d36c1b2499c9b6a10acf75">BS_FilSysType</a>&#160;&#160;&#160;54	/* File system type (1) */</td></tr>
<tr class="separator:a2264848692d36c1b2499c9b6a10acf75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e6340030dc29e7da2e9f92e472a763d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a6e6340030dc29e7da2e9f92e472a763d">BPB_FATSz32</a>&#160;&#160;&#160;36	/* FAT size [sector] (4) */</td></tr>
<tr class="separator:a6e6340030dc29e7da2e9f92e472a763d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c832cd9e28f8e4fbbd45fdc86c7ebbb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a6c832cd9e28f8e4fbbd45fdc86c7ebbb">BPB_ExtFlags</a>&#160;&#160;&#160;40	/* Extended flags (2) */</td></tr>
<tr class="separator:a6c832cd9e28f8e4fbbd45fdc86c7ebbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f75a149df65028e24d43727b9ffcb9d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a1f75a149df65028e24d43727b9ffcb9d">BPB_FSVer</a>&#160;&#160;&#160;42	/* File system version (2) */</td></tr>
<tr class="separator:a1f75a149df65028e24d43727b9ffcb9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7add0104bd20083d6940d616faecd45a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a7add0104bd20083d6940d616faecd45a">BPB_RootClus</a>&#160;&#160;&#160;44	/* Root <a class="el" href="tff_8c.html#addeee88e846cc637a785bcaf23b45b5e">dir</a> first cluster (4) */</td></tr>
<tr class="separator:a7add0104bd20083d6940d616faecd45a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51c45669282b9ce9da5152231df9f3ac"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a51c45669282b9ce9da5152231df9f3ac">BPB_FSInfo</a>&#160;&#160;&#160;48	/* Offset of FSInfo sector (2) */</td></tr>
<tr class="separator:a51c45669282b9ce9da5152231df9f3ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a383726fb93488d41866028b4f07c90e1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a383726fb93488d41866028b4f07c90e1">BPB_BkBootSec</a>&#160;&#160;&#160;50	/* Offset of backup boot sectot (2) */</td></tr>
<tr class="separator:a383726fb93488d41866028b4f07c90e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa670c7b495f5b347c442df67b188c58f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#aa670c7b495f5b347c442df67b188c58f">BS_DrvNum32</a>&#160;&#160;&#160;64	/* Physical drive number (2) */</td></tr>
<tr class="separator:aa670c7b495f5b347c442df67b188c58f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59c4b2f802ab4bc9319e5bd840e615b8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a59c4b2f802ab4bc9319e5bd840e615b8">BS_BootSig32</a>&#160;&#160;&#160;66	/* Extended boot signature (1) */</td></tr>
<tr class="separator:a59c4b2f802ab4bc9319e5bd840e615b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abaa3aafdcf5e83f8cb7e2bb373b13525"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#abaa3aafdcf5e83f8cb7e2bb373b13525">BS_VolID32</a>&#160;&#160;&#160;67	/* Volume serial number (4) */</td></tr>
<tr class="separator:abaa3aafdcf5e83f8cb7e2bb373b13525"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8241a49bce313184a58617ba1ad9e84c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a8241a49bce313184a58617ba1ad9e84c">BS_VolLab32</a>&#160;&#160;&#160;71	/* Volume label (8) */</td></tr>
<tr class="separator:a8241a49bce313184a58617ba1ad9e84c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d8786452966cd0ce579f2575a54a348"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a8d8786452966cd0ce579f2575a54a348">BS_FilSysType32</a>&#160;&#160;&#160;82	/* File system type (1) */</td></tr>
<tr class="separator:a8d8786452966cd0ce579f2575a54a348"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a318e58c1966aba52b90ab98dcb649883"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a318e58c1966aba52b90ab98dcb649883">FSI_LeadSig</a>&#160;&#160;&#160;0	/* FSI: Leading signature (4) */</td></tr>
<tr class="separator:a318e58c1966aba52b90ab98dcb649883"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bac0e6ff5907873030db1d0a7c4ebef"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a3bac0e6ff5907873030db1d0a7c4ebef">FSI_StrucSig</a>&#160;&#160;&#160;484	/* FSI: Structure signature (4) */</td></tr>
<tr class="separator:a3bac0e6ff5907873030db1d0a7c4ebef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab711e50459aba01b11c6b46a7cc1410b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#ab711e50459aba01b11c6b46a7cc1410b">FSI_Free_Count</a>&#160;&#160;&#160;488	/* FSI: Number of free clusters (4) */</td></tr>
<tr class="separator:ab711e50459aba01b11c6b46a7cc1410b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a320700cedf300c9b418edf56e5e6b086"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a320700cedf300c9b418edf56e5e6b086">FSI_Nxt_Free</a>&#160;&#160;&#160;492	/* FSI: Last allocated cluster (4) */</td></tr>
<tr class="separator:a320700cedf300c9b418edf56e5e6b086"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3f187bf0ba891551f594af6b61f3188"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#ac3f187bf0ba891551f594af6b61f3188">MBR_Table</a>&#160;&#160;&#160;446	/* MBR: Partition table offset (2) */</td></tr>
<tr class="separator:ac3f187bf0ba891551f594af6b61f3188"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af133060c47366e7e557d4085d931183f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#af133060c47366e7e557d4085d931183f">SZ_PTE</a>&#160;&#160;&#160;16	/* MBR: Size of a partition table entry */</td></tr>
<tr class="separator:af133060c47366e7e557d4085d931183f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74b810b3f3583c1eb54bd4305c0f261a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a74b810b3f3583c1eb54bd4305c0f261a">BS_55AA</a>&#160;&#160;&#160;510	/* Boot sector signature (2) */</td></tr>
<tr class="separator:a74b810b3f3583c1eb54bd4305c0f261a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa89348e9fc2de82ae9e12c661366b0e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#afa89348e9fc2de82ae9e12c661366b0e">DIR_Name</a>&#160;&#160;&#160;0	/* Short file name (11) */</td></tr>
<tr class="separator:afa89348e9fc2de82ae9e12c661366b0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3233e40118ed66095f3c9545b788f8a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>&#160;&#160;&#160;11	/* Attribute (1) */</td></tr>
<tr class="separator:ad3233e40118ed66095f3c9545b788f8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87ee1f701c2ab941862e3ce00c1c1e9d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a87ee1f701c2ab941862e3ce00c1c1e9d">DIR_NTres</a>&#160;&#160;&#160;12	/* NT flag (1) */</td></tr>
<tr class="separator:a87ee1f701c2ab941862e3ce00c1c1e9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47fb1881ea71d860db9b8280564cb4d5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a47fb1881ea71d860db9b8280564cb4d5">DIR_CrtTime</a>&#160;&#160;&#160;14	/* Created time (2) */</td></tr>
<tr class="separator:a47fb1881ea71d860db9b8280564cb4d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf498617bb4c7750fd738864c3c0ab5a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#acf498617bb4c7750fd738864c3c0ab5a">DIR_CrtDate</a>&#160;&#160;&#160;16	/* Created date (2) */</td></tr>
<tr class="separator:acf498617bb4c7750fd738864c3c0ab5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bc29c3f09e1e9c40c414f7d50d7905c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a0bc29c3f09e1e9c40c414f7d50d7905c">DIR_FstClusHI</a>&#160;&#160;&#160;20	/* Higher 16-bit of first cluster (2) */</td></tr>
<tr class="separator:a0bc29c3f09e1e9c40c414f7d50d7905c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9452d336adeece2a1b0b54ab35b8a59"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#ab9452d336adeece2a1b0b54ab35b8a59">DIR_WrtTime</a>&#160;&#160;&#160;22	/* Modified time (2) */</td></tr>
<tr class="separator:ab9452d336adeece2a1b0b54ab35b8a59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abed17fa699511b09cbf64961373d63a4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#abed17fa699511b09cbf64961373d63a4">DIR_WrtDate</a>&#160;&#160;&#160;24	/* Modified date (2) */</td></tr>
<tr class="separator:abed17fa699511b09cbf64961373d63a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebe0e913bff75a89d38dbcb04baf5dff"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#aebe0e913bff75a89d38dbcb04baf5dff">DIR_FstClusLO</a>&#160;&#160;&#160;26	/* Lower 16-bit of first cluster (2) */</td></tr>
<tr class="separator:aebe0e913bff75a89d38dbcb04baf5dff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfbfa613864a02a65f0bf70ead6672c7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#abfbfa613864a02a65f0bf70ead6672c7">DIR_FileSize</a>&#160;&#160;&#160;28	/* File size (4) */</td></tr>
<tr class="separator:abfbfa613864a02a65f0bf70ead6672c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c97d545619e6586b02b5d4f39f7be25"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a6c97d545619e6586b02b5d4f39f7be25">LDIR_Ord</a>&#160;&#160;&#160;0	/* LFN entry order and <a class="el" href="ff_8c.html#aff828b43518c49e1d637a822879b135d">LLE</a> flag (1) */</td></tr>
<tr class="separator:a6c97d545619e6586b02b5d4f39f7be25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28dcd75633b49e40b42a31f0cf5f5929"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a28dcd75633b49e40b42a31f0cf5f5929">LDIR_Attr</a>&#160;&#160;&#160;11	/* LFN attribute (1) */</td></tr>
<tr class="separator:a28dcd75633b49e40b42a31f0cf5f5929"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb98a052a9be81564b56854df35480a0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#acb98a052a9be81564b56854df35480a0">LDIR_Type</a>&#160;&#160;&#160;12	/* LFN type (1) */</td></tr>
<tr class="separator:acb98a052a9be81564b56854df35480a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade1d529763d2d097a6d1410956c8a84f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#ade1d529763d2d097a6d1410956c8a84f">LDIR_Chksum</a>&#160;&#160;&#160;13	/* Sum of corresponding SFN entry */</td></tr>
<tr class="separator:ade1d529763d2d097a6d1410956c8a84f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad73024151eff6baea94e680f7928969d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#ad73024151eff6baea94e680f7928969d">LDIR_FstClusLO</a>&#160;&#160;&#160;26	/* Filled by zero (0) */</td></tr>
<tr class="separator:ad73024151eff6baea94e680f7928969d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab10c2f2271dbdc132f9a6b9313fc7324"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#ab10c2f2271dbdc132f9a6b9313fc7324">SZ_DIR</a>&#160;&#160;&#160;32		/* Size of a directory entry */</td></tr>
<tr class="separator:ab10c2f2271dbdc132f9a6b9313fc7324"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff828b43518c49e1d637a822879b135d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#aff828b43518c49e1d637a822879b135d">LLE</a>&#160;&#160;&#160;0x40	/* Last long entry flag in LDIR_Ord */</td></tr>
<tr class="separator:aff828b43518c49e1d637a822879b135d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af39f317ac33b961daaff4b8d8a7ec792"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#af39f317ac33b961daaff4b8d8a7ec792">DDE</a>&#160;&#160;&#160;0xE5	/* Deleted directory enrty mark in DIR_Name[0] */</td></tr>
<tr class="separator:af39f317ac33b961daaff4b8d8a7ec792"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a741d6fdda5989919e0bb9811da804e56"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a741d6fdda5989919e0bb9811da804e56">NDDE</a>&#160;&#160;&#160;0x05	/* Replacement of a character collides with DDE */</td></tr>
<tr class="separator:a741d6fdda5989919e0bb9811da804e56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40aba328871d2be78bfdd74b390275db"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a>&#160;&#160;&#160;<a class="el" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a> sfn[12]</td></tr>
<tr class="separator:a40aba328871d2be78bfdd74b390275db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a966fe5792671b39db1ccf655a8c1af8d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a>(dobj)&#160;&#160;&#160;(dobj).<a class="el" href="tff_8c.html#a4eeeb71a8aa4cf022612fc51ab25ed15">fn</a> = sfn</td></tr>
<tr class="separator:a966fe5792671b39db1ccf655a8c1af8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba6d6942b59f11cf285bdbfb7e38f1fa"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a>()</td></tr>
<tr class="separator:aba6d6942b59f11cf285bdbfb7e38f1fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7519abb60fe91f6aa1d17f64fbae123a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a7519abb60fe91f6aa1d17f64fbae123a">clust2sect</a> (<a class="el" href="struct_f_a_t_f_s.html">FATFS</a> *fs, <a class="el" href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> clst)</td></tr>
<tr class="separator:a7519abb60fe91f6aa1d17f64fbae123a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65611adf1626e5e08da77cd33a98dd8b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a65611adf1626e5e08da77cd33a98dd8b">get_fat</a> (<a class="el" href="struct_f_a_t_f_s.html">FATFS</a> *fs, <a class="el" href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> clst)</td></tr>
<tr class="separator:a65611adf1626e5e08da77cd33a98dd8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd4b6b071a8d728a88727051c12bc6d7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#abd4b6b071a8d728a88727051c12bc6d7">put_fat</a> (<a class="el" href="struct_f_a_t_f_s.html">FATFS</a> *fs, <a class="el" href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> clst, <a class="el" href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> val)</td></tr>
<tr class="separator:abd4b6b071a8d728a88727051c12bc6d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bb9e218b8a853db0871a0fa93a0eae6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a3bb9e218b8a853db0871a0fa93a0eae6">f_mount</a> (<a class="el" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a> vol, <a class="el" href="struct_f_a_t_f_s.html">FATFS</a> *fs)</td></tr>
<tr class="separator:a3bb9e218b8a853db0871a0fa93a0eae6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab001edb1e8000ce84d9967e616a78ae7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#ab001edb1e8000ce84d9967e616a78ae7">f_open</a> (<a class="el" href="struct_f_i_l.html">FIL</a> *fp, const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path, <a class="el" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a> mode)</td></tr>
<tr class="separator:ab001edb1e8000ce84d9967e616a78ae7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4c3dcb6869ca252888eebabe39727b3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#ac4c3dcb6869ca252888eebabe39727b3">f_read</a> (<a class="el" href="struct_f_i_l.html">FIL</a> *fp, void *buff, <a class="el" href="p8_2pinguino_2libraries_2integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> btr, <a class="el" href="p8_2pinguino_2libraries_2integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> *br)</td></tr>
<tr class="separator:ac4c3dcb6869ca252888eebabe39727b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6a4dfae8a9e308bdb2283a37ef680f2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#ae6a4dfae8a9e308bdb2283a37ef680f2">f_write</a> (<a class="el" href="struct_f_i_l.html">FIL</a> *fp, const void *buff, <a class="el" href="p8_2pinguino_2libraries_2integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> btw, <a class="el" href="p8_2pinguino_2libraries_2integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> *bw)</td></tr>
<tr class="separator:ae6a4dfae8a9e308bdb2283a37ef680f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad69c7246b122ba56a134939ee0eaf847"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#ad69c7246b122ba56a134939ee0eaf847">f_sync</a> (<a class="el" href="struct_f_i_l.html">FIL</a> *fp)</td></tr>
<tr class="separator:ad69c7246b122ba56a134939ee0eaf847"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53882db20ef4323dcfd1874d7733ffc3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a53882db20ef4323dcfd1874d7733ffc3">f_close</a> (<a class="el" href="struct_f_i_l.html">FIL</a> *fp)</td></tr>
<tr class="separator:a53882db20ef4323dcfd1874d7733ffc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5df0ac672ada972e89ef4b003e57f964"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a5df0ac672ada972e89ef4b003e57f964">f_lseek</a> (<a class="el" href="struct_f_i_l.html">FIL</a> *fp, <a class="el" href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> ofs)</td></tr>
<tr class="separator:a5df0ac672ada972e89ef4b003e57f964"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a7b44d8858165d18ff5617d81244f35"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a5a7b44d8858165d18ff5617d81244f35">f_opendir</a> (<a class="el" href="struct_d_i_r.html">DIR</a> *<a class="el" href="tff_8c.html#a90affc32512431e143844fa9721bf9d9">dj</a>, const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path)</td></tr>
<tr class="separator:a5a7b44d8858165d18ff5617d81244f35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a329a4cbc309719043e5066031fc844c6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a329a4cbc309719043e5066031fc844c6">f_readdir</a> (<a class="el" href="struct_d_i_r.html">DIR</a> *<a class="el" href="tff_8c.html#a90affc32512431e143844fa9721bf9d9">dj</a>, <a class="el" href="struct_f_i_l_i_n_f_o.html">FILINFO</a> *fno)</td></tr>
<tr class="separator:a329a4cbc309719043e5066031fc844c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe1f60daab5c7d11170c334fb832c798"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#abe1f60daab5c7d11170c334fb832c798">f_stat</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path, <a class="el" href="struct_f_i_l_i_n_f_o.html">FILINFO</a> *fno)</td></tr>
<tr class="separator:abe1f60daab5c7d11170c334fb832c798"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ff39f75a87cbda9cd6ea65d83f16cec"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a0ff39f75a87cbda9cd6ea65d83f16cec">f_getfree</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path, <a class="el" href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> *nclst, <a class="el" href="struct_f_a_t_f_s.html">FATFS</a> **fatfs)</td></tr>
<tr class="separator:a0ff39f75a87cbda9cd6ea65d83f16cec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a691a27b40c348f7c84b42e911636f38a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a691a27b40c348f7c84b42e911636f38a">f_truncate</a> (<a class="el" href="struct_f_i_l.html">FIL</a> *fp)</td></tr>
<tr class="separator:a691a27b40c348f7c84b42e911636f38a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2858167fcd0bced48e9be434b3895efe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a2858167fcd0bced48e9be434b3895efe">f_unlink</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path)</td></tr>
<tr class="separator:a2858167fcd0bced48e9be434b3895efe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b4d38db58e89c526cfcf53200d719d0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a4b4d38db58e89c526cfcf53200d719d0">f_mkdir</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path)</td></tr>
<tr class="separator:a4b4d38db58e89c526cfcf53200d719d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad563f5cb82b21088065426a18fd0680a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#ad563f5cb82b21088065426a18fd0680a">f_chmod</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path, <a class="el" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a> value, <a class="el" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a> mask)</td></tr>
<tr class="separator:ad563f5cb82b21088065426a18fd0680a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafaa718d1a487e12a8f0087173dba0b9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#aafaa718d1a487e12a8f0087173dba0b9">f_utime</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path, const <a class="el" href="struct_f_i_l_i_n_f_o.html">FILINFO</a> *fno)</td></tr>
<tr class="separator:aafaa718d1a487e12a8f0087173dba0b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa775b9b024acfeb3a66523cab497d142"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#aa775b9b024acfeb3a66523cab497d142">f_rename</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path_old, const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path_new)</td></tr>
<tr class="separator:aa775b9b024acfeb3a66523cab497d142"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ad6ce87cea84298e562cae4f6cde3c341"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _DF1E&#160;&#160;&#160;0x9F	/* DBC 1st byte range 1 end */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00156">156</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a228bfd2cabe490c8567aaf08b8b2cc14"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _DF1S&#160;&#160;&#160;0x81	/* DBC 1st byte range 1 start */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00155">155</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae92fde14909ccf6bec27f051a4b88a79"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _DF2E&#160;&#160;&#160;0xFC	/* DBC 1st byte range 2 end */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00158">158</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a89ebd362b483a3a465fb485c9535a3c4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _DF2S&#160;&#160;&#160;0xE0	/* DBC 1st byte range 2 start */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00157">157</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a97cf766baca26c0ac1110df26e479c4c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _DS1E&#160;&#160;&#160;0x7E	/* DBC 2nd byte range 1 end */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00160">160</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a866564522f9fb431919f86ae507c42ef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _DS1S&#160;&#160;&#160;0x40	/* DBC 2nd byte range 1 start */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00159">159</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0e747e5204b28f9c72c91cee52fde572"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _DS2E&#160;&#160;&#160;0xFC	/* DBC 2nd byte range 2 end */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00162">162</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a6fd34725741cf6dc0524df2adbbb5a94"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _DS2S&#160;&#160;&#160;0x80	/* DBC 2nd byte range 2 start */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00161">161</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a41e4c46636679236568cf50b5535847f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ABORT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">fs, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;{ fp-&gt;flag |= <a class="el" href="ff_8h.html#ad3b47fe8126573b17752a9a242b76b9a">FA__ERROR</a>; <a class="el" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fs, <a class="el" href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a>); }</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00133">133</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>Referenced by <a class="el" href="ff_8c_source.html#l02721">f_lseek()</a>, <a class="el" href="ff_8c_source.html#l02301">f_read()</a>, and <a class="el" href="ff_8c_source.html#l02404">f_write()</a>.</p>

</div>
</div>
<a class="anchor" id="a383726fb93488d41866028b4f07c90e1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_BkBootSec&#160;&#160;&#160;50	/* Offset of backup boot sectot (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00416">416</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8551844b4eb4e15aecd8cc9aa3585fa2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_BytsPerSec&#160;&#160;&#160;11	/* Sector size [<a class="el" href="p8_2pinguino_2core_2typedef_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>] (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00394">394</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a6c832cd9e28f8e4fbbd45fdc86c7ebbb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_ExtFlags&#160;&#160;&#160;40	/* Extended flags (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00412">412</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a60a2f6efeb6a4c7cb2da1e5def6ca43b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_FATSz16&#160;&#160;&#160;22	/* FAT size [sector] (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00401">401</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a6e6340030dc29e7da2e9f92e472a763d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_FATSz32&#160;&#160;&#160;36	/* FAT size [sector] (4) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00411">411</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a51c45669282b9ce9da5152231df9f3ac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_FSInfo&#160;&#160;&#160;48	/* Offset of FSInfo sector (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00415">415</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a1f75a149df65028e24d43727b9ffcb9d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_FSVer&#160;&#160;&#160;42	/* File system version (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00413">413</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a449d4ed5c4c8105daf29aad9488277f7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_HiddSec&#160;&#160;&#160;28	/* Number of special hidden sectors (4) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00404">404</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a414e054c4b5ea3414ebefa3539e7e554"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_Media&#160;&#160;&#160;21	/* Media descriptor (1) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00400">400</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="af44a1e8c89ec5502595f23496d24cbf1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_NumFATs&#160;&#160;&#160;16	/* Number of FAT copies (1) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00397">397</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a9c03603c3be34d4c5cc1b481b0bc6774"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_NumHeads&#160;&#160;&#160;26	/* Number of heads (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00403">403</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7add0104bd20083d6940d616faecd45a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_RootClus&#160;&#160;&#160;44	/* Root <a class="el" href="tff_8c.html#addeee88e846cc637a785bcaf23b45b5e">dir</a> first cluster (4) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00414">414</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="aaa667f14c87c45dc128f2ab208e92f98"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_RootEntCnt&#160;&#160;&#160;17	/* Number of root <a class="el" href="tff_8c.html#addeee88e846cc637a785bcaf23b45b5e">dir</a> entries for FAT12/16 (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00398">398</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab3ec444c8457c9bc98aa07e846f5c1b7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_RsvdSecCnt&#160;&#160;&#160;14	/* Size of reserved area [sector] (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00396">396</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="aab78e41c617a14b9540c0563d6b957fa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_SecPerClus&#160;&#160;&#160;13	/* Cluster size [sector] (1) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00395">395</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac71bb771432ea532bc47713a028ebd76"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_SecPerTrk&#160;&#160;&#160;24	/* Track size [sector] (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00402">402</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a4eb540eecde0f2df26fa8c7969341d68"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_TotSec16&#160;&#160;&#160;19	/* Volume size [sector] (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00399">399</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7723a9f0da553e8879d60909d85ccb7b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_TotSec32&#160;&#160;&#160;32	/* Volume size [sector] (4) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00405">405</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a74b810b3f3583c1eb54bd4305c0f261a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BS_55AA&#160;&#160;&#160;510	/* Boot sector signature (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00428">428</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a85a92e790602efef4da3a2f141611ce8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BS_BootSig&#160;&#160;&#160;38	/* Extended boot signature (1) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00407">407</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a59c4b2f802ab4bc9319e5bd840e615b8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BS_BootSig32&#160;&#160;&#160;66	/* Extended boot signature (1) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00418">418</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0c51f7393341b839dfb241c2951f3ef4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BS_DrvNum&#160;&#160;&#160;36	/* Physical drive number (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00406">406</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="aa670c7b495f5b347c442df67b188c58f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BS_DrvNum32&#160;&#160;&#160;64	/* Physical drive number (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00417">417</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2264848692d36c1b2499c9b6a10acf75"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BS_FilSysType&#160;&#160;&#160;54	/* File system type (1) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00410">410</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8d8786452966cd0ce579f2575a54a348"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BS_FilSysType32&#160;&#160;&#160;82	/* File system type (1) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00421">421</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8f81669ee736efb2b2b49c7b0985472d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BS_jmpBoot&#160;&#160;&#160;0	/* Jump instruction (3) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00392">392</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a02a76ada191ec2dc5f8af60ff3576da7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BS_OEMName&#160;&#160;&#160;3	/* OEM name (8) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00393">393</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a383a71bda500a0fb5a37f4edd785acbf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BS_VolID&#160;&#160;&#160;39	/* Volume serial number (4) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00408">408</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="abaa3aafdcf5e83f8cb7e2bb373b13525"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BS_VolID32&#160;&#160;&#160;67	/* Volume serial number (4) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00419">419</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a28498ba4b07ff90aaa9628e81fb89d32"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BS_VolLab&#160;&#160;&#160;43	/* Volume label (8) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00409">409</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8241a49bce313184a58617ba1ad9e84c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BS_VolLab32&#160;&#160;&#160;71	/* Volume label (8) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00420">420</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="af39f317ac33b961daaff4b8d8a7ec792"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DDE&#160;&#160;&#160;0xE5	/* Deleted directory enrty mark in DIR_Name[0] */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00447">447</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a40aba328871d2be78bfdd74b390275db"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEF_NAMEBUF&#160;&#160;&#160;<a class="el" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a> sfn[12]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00477">477</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>Referenced by <a class="el" href="ff_8c_source.html#l03244">f_chmod()</a>, <a class="el" href="ff_8c_source.html#l03171">f_mkdir()</a>, <a class="el" href="ff_8c_source.html#l02177">f_open()</a>, <a class="el" href="ff_8c_source.html#l02890">f_opendir()</a>, <a class="el" href="ff_8c_source.html#l02925">f_readdir()</a>, <a class="el" href="ff_8c_source.html#l03316">f_rename()</a>, <a class="el" href="ff_8c_source.html#l02961">f_stat()</a>, <a class="el" href="ff_8c_source.html#l03108">f_unlink()</a>, and <a class="el" href="ff_8c_source.html#l03281">f_utime()</a>.</p>

</div>
</div>
<a class="anchor" id="ad3233e40118ed66095f3c9545b788f8a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DIR_Attr&#160;&#160;&#160;11	/* Attribute (1) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00431">431</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>Referenced by <a class="el" href="ff_8c_source.html#l03244">f_chmod()</a>, <a class="el" href="ff_8c_source.html#l03171">f_mkdir()</a>, <a class="el" href="ff_8c_source.html#l02177">f_open()</a>, <a class="el" href="ff_8c_source.html#l02890">f_opendir()</a>, <a class="el" href="ff_8c_source.html#l03316">f_rename()</a>, <a class="el" href="ff_8c_source.html#l02527">f_sync()</a>, and <a class="el" href="ff_8c_source.html#l03108">f_unlink()</a>.</p>

</div>
</div>
<a class="anchor" id="acf498617bb4c7750fd738864c3c0ab5a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DIR_CrtDate&#160;&#160;&#160;16	/* Created date (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00434">434</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a47fb1881ea71d860db9b8280564cb4d5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DIR_CrtTime&#160;&#160;&#160;14	/* Created time (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00433">433</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>Referenced by <a class="el" href="ff_8c_source.html#l02177">f_open()</a>.</p>

</div>
</div>
<a class="anchor" id="abfbfa613864a02a65f0bf70ead6672c7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DIR_FileSize&#160;&#160;&#160;28	/* File size (4) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00439">439</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>Referenced by <a class="el" href="ff_8c_source.html#l02177">f_open()</a>, and <a class="el" href="ff_8c_source.html#l02527">f_sync()</a>.</p>

</div>
</div>
<a class="anchor" id="a0bc29c3f09e1e9c40c414f7d50d7905c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DIR_FstClusHI&#160;&#160;&#160;20	/* Higher 16-bit of first cluster (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00435">435</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="aebe0e913bff75a89d38dbcb04baf5dff"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DIR_FstClusLO&#160;&#160;&#160;26	/* Lower 16-bit of first cluster (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00438">438</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="afa89348e9fc2de82ae9e12c661366b0e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DIR_Name&#160;&#160;&#160;0	/* Short file name (11) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00430">430</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>Referenced by <a class="el" href="ff_8c_source.html#l03171">f_mkdir()</a>.</p>

</div>
</div>
<a class="anchor" id="a87ee1f701c2ab941862e3ce00c1c1e9d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DIR_NTres&#160;&#160;&#160;12	/* NT flag (1) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00432">432</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="abed17fa699511b09cbf64961373d63a4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DIR_WrtDate&#160;&#160;&#160;24	/* Modified date (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00437">437</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>Referenced by <a class="el" href="ff_8c_source.html#l03281">f_utime()</a>.</p>

</div>
</div>
<a class="anchor" id="ab9452d336adeece2a1b0b54ab35b8a59"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DIR_WrtTime&#160;&#160;&#160;22	/* Modified time (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00436">436</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>Referenced by <a class="el" href="ff_8c_source.html#l03171">f_mkdir()</a>, <a class="el" href="ff_8c_source.html#l02527">f_sync()</a>, and <a class="el" href="ff_8c_source.html#l03281">f_utime()</a>.</p>

</div>
</div>
<a class="anchor" id="a458e336ac53f8249ed02d844469b7076"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ENTER_FF</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">fs</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00129">129</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="aba6d6942b59f11cf285bdbfb7e38f1fa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FREE_BUF</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00479">479</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>Referenced by <a class="el" href="ff_8c_source.html#l03244">f_chmod()</a>, <a class="el" href="ff_8c_source.html#l03171">f_mkdir()</a>, <a class="el" href="ff_8c_source.html#l02177">f_open()</a>, <a class="el" href="ff_8c_source.html#l02890">f_opendir()</a>, <a class="el" href="ff_8c_source.html#l02925">f_readdir()</a>, <a class="el" href="ff_8c_source.html#l03316">f_rename()</a>, <a class="el" href="ff_8c_source.html#l02961">f_stat()</a>, <a class="el" href="ff_8c_source.html#l03108">f_unlink()</a>, and <a class="el" href="ff_8c_source.html#l03281">f_utime()</a>.</p>

</div>
</div>
<a class="anchor" id="ab711e50459aba01b11c6b46a7cc1410b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FSI_Free_Count&#160;&#160;&#160;488	/* FSI: Number of free clusters (4) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00424">424</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a318e58c1966aba52b90ab98dcb649883"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FSI_LeadSig&#160;&#160;&#160;0	/* FSI: Leading signature (4) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00422">422</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a320700cedf300c9b418edf56e5e6b086"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FSI_Nxt_Free&#160;&#160;&#160;492	/* FSI: Last allocated cluster (4) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00425">425</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3bac0e6ff5907873030db1d0a7c4ebef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FSI_StrucSig&#160;&#160;&#160;484	/* FSI: Structure signature (4) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00423">423</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a966fe5792671b39db1ccf655a8c1af8d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INIT_BUF</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">dobj</td><td>)</td>
          <td>&#160;&#160;&#160;(dobj).<a class="el" href="tff_8c.html#a4eeeb71a8aa4cf022612fc51ab25ed15">fn</a> = sfn</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00478">478</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>Referenced by <a class="el" href="ff_8c_source.html#l03244">f_chmod()</a>, <a class="el" href="ff_8c_source.html#l03171">f_mkdir()</a>, <a class="el" href="ff_8c_source.html#l02177">f_open()</a>, <a class="el" href="ff_8c_source.html#l02890">f_opendir()</a>, <a class="el" href="ff_8c_source.html#l02925">f_readdir()</a>, <a class="el" href="ff_8c_source.html#l03316">f_rename()</a>, <a class="el" href="ff_8c_source.html#l02961">f_stat()</a>, <a class="el" href="ff_8c_source.html#l03108">f_unlink()</a>, and <a class="el" href="ff_8c_source.html#l03281">f_utime()</a>.</p>

</div>
</div>
<a class="anchor" id="a58d63a832a117f179e41c7373d013dd6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IsDBCS1</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a></td><td>)</td>
          <td>&#160;&#160;&#160;(((<a class="el" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a>)(<a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a>) &gt;= <a class="el" href="ff_8c.html#a228bfd2cabe490c8567aaf08b8b2cc14">_DF1S</a> &amp;&amp; (<a class="el" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a>)(<a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a>) &lt;= <a class="el" href="ff_8c.html#ad6ce87cea84298e562cae4f6cde3c341">_DF1E</a>) || ((<a class="el" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a>)(<a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a>) &gt;= <a class="el" href="ff_8c.html#a89ebd362b483a3a465fb485c9535a3c4">_DF2S</a> &amp;&amp; (<a class="el" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a>)(<a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a>) &lt;= <a class="el" href="ff_8c.html#ae92fde14909ccf6bec27f051a4b88a79">_DF2E</a>))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00356">356</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a66a3fa880af6078ef181656c1d7d8ef1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IsDBCS2</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a></td><td>)</td>
          <td>&#160;&#160;&#160;(((<a class="el" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a>)(<a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a>) &gt;= <a class="el" href="ff_8c.html#a866564522f9fb431919f86ae507c42ef">_DS1S</a> &amp;&amp; (<a class="el" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a>)(<a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a>) &lt;= <a class="el" href="ff_8c.html#a97cf766baca26c0ac1110df26e479c4c">_DS1E</a>) || ((<a class="el" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a>)(<a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a>) &gt;= <a class="el" href="ff_8c.html#a6fd34725741cf6dc0524df2adbbb5a94">_DS2S</a> &amp;&amp; (<a class="el" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a>)(<a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a>) &lt;= <a class="el" href="ff_8c.html#a0e747e5204b28f9c72c91cee52fde572">_DS2E</a>))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00364">364</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a65dee564f69f2ec27f25b67a348018b9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IsDigit</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a></td><td>)</td>
          <td>&#160;&#160;&#160;(((<a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a>)&gt;='0')&amp;&amp;((<a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a>)&lt;='9'))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00351">351</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a4a9d454724926bd51a3aed589a97f08b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IsLower</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a></td><td>)</td>
          <td>&#160;&#160;&#160;(((<a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a>)&gt;='a')&amp;&amp;((<a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a>)&lt;='z'))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00350">350</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a89b2514198590e139dd064c5d534f302"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IsUpper</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a></td><td>)</td>
          <td>&#160;&#160;&#160;(((<a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a>)&gt;='<a class="el" href="p32_2include_2pinguino_2core_2sound_8c.html#a955f504eccf76b4eb2489c0adab03121">A</a>')&amp;&amp;((<a class="el" href="p32_2include_2pinguino_2libraries_2_p_c_d8544_8c.html#aa0dd25f53b00986c159fb20de6894e51">c</a>)&lt;='Z'))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00349">349</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a19cd426084600d6007eb6f976c81fbdf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LD_CLUST</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="tff_8c.html#addeee88e846cc637a785bcaf23b45b5e">dir</a></td><td>)</td>
          <td>&#160;&#160;&#160;(((<a class="el" href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)<a class="el" href="ff_8h.html#a398519bb08da6457e62567d1f0b567e3">LD_WORD</a>(<a class="el" href="tff_8c.html#addeee88e846cc637a785bcaf23b45b5e">dir</a>+<a class="el" href="ff_8c.html#a0bc29c3f09e1e9c40c414f7d50d7905c">DIR_FstClusHI</a>)&lt;&lt;16) | <a class="el" href="ff_8h.html#a398519bb08da6457e62567d1f0b567e3">LD_WORD</a>(<a class="el" href="tff_8c.html#addeee88e846cc637a785bcaf23b45b5e">dir</a>+<a class="el" href="ff_8c.html#aebe0e913bff75a89d38dbcb04baf5dff">DIR_FstClusLO</a>))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00149">149</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>Referenced by <a class="el" href="ff_8c_source.html#l02177">f_open()</a>, <a class="el" href="ff_8c_source.html#l02890">f_opendir()</a>, <a class="el" href="ff_8c_source.html#l03316">f_rename()</a>, and <a class="el" href="ff_8c_source.html#l03108">f_unlink()</a>.</p>

</div>
</div>
<a class="anchor" id="a28dcd75633b49e40b42a31f0cf5f5929"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDIR_Attr&#160;&#160;&#160;11	/* LFN attribute (1) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00441">441</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="ade1d529763d2d097a6d1410956c8a84f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDIR_Chksum&#160;&#160;&#160;13	/* Sum of corresponding SFN entry */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00443">443</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="ad73024151eff6baea94e680f7928969d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDIR_FstClusLO&#160;&#160;&#160;26	/* Filled by zero (0) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00444">444</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a6c97d545619e6586b02b5d4f39f7be25"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDIR_Ord&#160;&#160;&#160;0	/* LFN entry order and <a class="el" href="ff_8c.html#aff828b43518c49e1d637a822879b135d">LLE</a> flag (1) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00440">440</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="acb98a052a9be81564b56854df35480a0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDIR_Type&#160;&#160;&#160;12	/* LFN type (1) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00442">442</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7e653d8ca0ae09faa49cd5b7335fea84"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LEAVE_FF</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">fs, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;return <a class="el" href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00130">130</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>Referenced by <a class="el" href="ff_8c_source.html#l03244">f_chmod()</a>, <a class="el" href="ff_8c_source.html#l02568">f_close()</a>, <a class="el" href="ff_8c_source.html#l02989">f_getfree()</a>, <a class="el" href="ff_8c_source.html#l02721">f_lseek()</a>, <a class="el" href="ff_8c_source.html#l03171">f_mkdir()</a>, <a class="el" href="ff_8c_source.html#l02177">f_open()</a>, <a class="el" href="ff_8c_source.html#l02890">f_opendir()</a>, <a class="el" href="ff_8c_source.html#l02301">f_read()</a>, <a class="el" href="ff_8c_source.html#l02925">f_readdir()</a>, <a class="el" href="ff_8c_source.html#l03316">f_rename()</a>, <a class="el" href="ff_8c_source.html#l02961">f_stat()</a>, <a class="el" href="ff_8c_source.html#l02527">f_sync()</a>, <a class="el" href="ff_8c_source.html#l03062">f_truncate()</a>, <a class="el" href="ff_8c_source.html#l03108">f_unlink()</a>, <a class="el" href="ff_8c_source.html#l03281">f_utime()</a>, and <a class="el" href="ff_8c_source.html#l02404">f_write()</a>.</p>

</div>
</div>
<a class="anchor" id="aff828b43518c49e1d637a822879b135d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LLE&#160;&#160;&#160;0x40	/* Last long entry flag in LDIR_Ord */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00446">446</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac3f187bf0ba891551f594af6b61f3188"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MBR_Table&#160;&#160;&#160;446	/* MBR: Partition table offset (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00426">426</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="aeec02d5ae07ede32b7d74155bf0fda15"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_FAT16&#160;&#160;&#160;4086	/* Minimum number of clusters for FAT16 */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00385">385</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a483625319f3e3bd5ac6502b46c375aed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_FAT32&#160;&#160;&#160;65526	/* Minimum number of clusters for FAT32 */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00386">386</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a741d6fdda5989919e0bb9811da804e56"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NDDE&#160;&#160;&#160;0x05	/* Replacement of a character collides with DDE */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00448">448</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a06c201f90533d5b49cd039c960327968"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NS&#160;&#160;&#160;11		/* Index of name <a class="el" href="p32_2include_2pinguino_2libraries_2ledcontrol_8h.html#a0e245df1940369c94735090b1ea1a9d9">status</a> <a class="el" href="p8_2pinguino_2core_2typedef_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> in <a class="el" href="tff_8c.html#a4eeeb71a8aa4cf022612fc51ab25ed15">fn</a>[] */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00375">375</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>Referenced by <a class="el" href="ff_8c_source.html#l03244">f_chmod()</a>, <a class="el" href="ff_8c_source.html#l03171">f_mkdir()</a>, <a class="el" href="ff_8c_source.html#l03316">f_rename()</a>, <a class="el" href="ff_8c_source.html#l03108">f_unlink()</a>, and <a class="el" href="ff_8c_source.html#l03281">f_utime()</a>.</p>

</div>
</div>
<a class="anchor" id="a4a0e89b504dece19e2e4b02c83782ca2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NS_BODY&#160;&#160;&#160;0x08	/* Lower case flag (body) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00379">379</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2db528782a021797b34bdc6e9e9de1c3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NS_DOT&#160;&#160;&#160;0x20	/* Dot entry */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00381">381</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3b7fad0942e816fdb84d869c1f7a613e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NS_EXT&#160;&#160;&#160;0x10	/* Lower case flag (ext) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00380">380</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a5a0742bfc1d94f0c3baa5ede485048c4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NS_LAST&#160;&#160;&#160;0x04	/* Last segment */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00378">378</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae957b8d4065ea0b3eed822aec5368d29"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NS_LFN&#160;&#160;&#160;0x02	/* Force to create LFN entry */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00377">377</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac92c92c3a3d6b9235ac98feeb00e565a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NS_LOSS&#160;&#160;&#160;0x01	/* Out of 8.3 format */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00376">376</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a42b5140fc5e09a53c8f4cba66dc0e6c1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SS</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">fs</td><td>)</td>
          <td>&#160;&#160;&#160;512U			/* Fixed sector size */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00118">118</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>Referenced by <a class="el" href="ff_8c_source.html#l02989">f_getfree()</a>, <a class="el" href="ff_8c_source.html#l02721">f_lseek()</a>, <a class="el" href="ff_8c_source.html#l03171">f_mkdir()</a>, <a class="el" href="ff_8c_source.html#l02301">f_read()</a>, <a class="el" href="ff_8c_source.html#l02404">f_write()</a>, <a class="el" href="ff_8c_source.html#l00778">get_fat()</a>, and <a class="el" href="ff_8c_source.html#l00822">put_fat()</a>.</p>

</div>
</div>
<a class="anchor" id="a08174fa72222a48a5c9e5de70c341af7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ST_CLUST</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="tff_8c.html#addeee88e846cc637a785bcaf23b45b5e">dir</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cl&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;{<a class="el" href="ff_8h.html#a95ceb4c25b216e71baa7102939edfd0d">ST_WORD</a>(<a class="el" href="tff_8c.html#addeee88e846cc637a785bcaf23b45b5e">dir</a>+<a class="el" href="ff_8c.html#aebe0e913bff75a89d38dbcb04baf5dff">DIR_FstClusLO</a>, cl); <a class="el" href="ff_8h.html#a95ceb4c25b216e71baa7102939edfd0d">ST_WORD</a>(<a class="el" href="tff_8c.html#addeee88e846cc637a785bcaf23b45b5e">dir</a>+<a class="el" href="ff_8c.html#a0bc29c3f09e1e9c40c414f7d50d7905c">DIR_FstClusHI</a>, (<a class="el" href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)cl&gt;&gt;16);}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00150">150</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>Referenced by <a class="el" href="ff_8c_source.html#l03171">f_mkdir()</a>, <a class="el" href="ff_8c_source.html#l02177">f_open()</a>, <a class="el" href="ff_8c_source.html#l03316">f_rename()</a>, and <a class="el" href="ff_8c_source.html#l02527">f_sync()</a>.</p>

</div>
</div>
<a class="anchor" id="ab10c2f2271dbdc132f9a6b9313fc7324"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SZ_DIR&#160;&#160;&#160;32		/* Size of a directory entry */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00445">445</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>Referenced by <a class="el" href="ff_8c_source.html#l03171">f_mkdir()</a>, and <a class="el" href="ff_8c_source.html#l03316">f_rename()</a>.</p>

</div>
</div>
<a class="anchor" id="af133060c47366e7e557d4085d931183f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SZ_PTE&#160;&#160;&#160;16	/* MBR: Size of a partition table entry */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00427">427</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a7519abb60fe91f6aa1d17f64fbae123a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> clust2sect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_a_t_f_s.html">FATFS</a> *&#160;</td>
          <td class="paramname"><em>fs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>&#160;</td>
          <td class="paramname"><em>clst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00764">764</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>References <a class="el" href="tff_8h_source.html#l00101">FATFS::csize</a>, <a class="el" href="tff_8h_source.html#l00088">FATFS::database</a>, and <a class="el" href="ff_8h_source.html#l00100">FATFS::n_fatent</a>.</p>

<p>Referenced by <a class="el" href="ff_8c_source.html#l02721">f_lseek()</a>, <a class="el" href="ff_8c_source.html#l03171">f_mkdir()</a>, <a class="el" href="tff_8c_source.html#l01205">f_opendir()</a>, <a class="el" href="ff_8c_source.html#l02301">f_read()</a>, <a class="el" href="ff_8c_source.html#l03316">f_rename()</a>, <a class="el" href="tff_8c_source.html#l01425">f_unlink()</a>, and <a class="el" href="ff_8c_source.html#l02404">f_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  {</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    clst -= 2;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    <span class="keywordflow">if</span> (clst &gt;= (fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a388eb0fa0f3f1449a6ab88c6674e16fc">n_fatent</a> - 2))</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        <span class="keywordflow">return</span> 0; <span class="comment">/* Invalid cluster# */</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="keywordflow">return</span> clst * fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#af8143a50ac7be72544022dd46a7013da">csize</a> + fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#ae3045fb3d76867c0cd17e6513000146b">database</a>;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;}</div>
<div class="ttc" id="struct_f_a_t_f_s_html_a388eb0fa0f3f1449a6ab88c6674e16fc"><div class="ttname"><a href="struct_f_a_t_f_s.html#a388eb0fa0f3f1449a6ab88c6674e16fc">FATFS::n_fatent</a></div><div class="ttdeci">DWORD n_fatent</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00100">ff.h:100</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_ae3045fb3d76867c0cd17e6513000146b"><div class="ttname"><a href="struct_f_a_t_f_s.html#ae3045fb3d76867c0cd17e6513000146b">FATFS::database</a></div><div class="ttdeci">dword database</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00088">tff.h:88</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_af8143a50ac7be72544022dd46a7013da"><div class="ttname"><a href="struct_f_a_t_f_s.html#af8143a50ac7be72544022dd46a7013da">FATFS::csize</a></div><div class="ttdeci">byte csize</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00101">tff.h:101</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad563f5cb82b21088065426a18fd0680a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_chmod </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a>&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a>&#160;</td>
          <td class="paramname"><em>mask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l03244">3244</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>References <a class="el" href="ffconf_8h_source.html#l00113">_FS_RPATH</a>, <a class="el" href="pff_8h_source.html#l00168">AM_ARC</a>, <a class="el" href="pff_8h_source.html#l00163">AM_HID</a>, <a class="el" href="pff_8h_source.html#l00162">AM_RDO</a>, <a class="el" href="pff_8h_source.html#l00164">AM_SYS</a>, <a class="el" href="ff_8c_source.html#l00477">DEF_NAMEBUF</a>, <a class="el" href="tff_8c_source.html#l00068">dir</a>, <a class="el" href="ff_8h_source.html#l00149">DIR::dir</a>, <a class="el" href="ff_8c_source.html#l00431">DIR_Attr</a>, <a class="el" href="tff_8c_source.html#l00066">dj</a>, <a class="el" href="ff_8h_source.html#l00150">DIR::fn</a>, <a class="el" href="tff_8h_source.html#l00154">FR_INVALID_NAME</a>, <a class="el" href="pff_8h_source.html#l00120">FR_OK</a>, <a class="el" href="ff_8c_source.html#l00479">FREE_BUF</a>, <a class="el" href="tff_8h_source.html#l00112">DIR::fs</a>, <a class="el" href="ff_8c_source.html#l00478">INIT_BUF</a>, <a class="el" href="ff_8c_source.html#l00130">LEAVE_FF</a>, <a class="el" href="ff_8c_source.html#l00375">NS</a>, <a class="el" href="tff_8c_source.html#l00065">res</a>, and <a class="el" href="ff_8h_source.html#l00082">FATFS::wflag</a>.</p>
<div class="fragment"><div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;  {</div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;    <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> <a class="code" href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a>;</div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;    <a class="code" href="struct_d_i_r.html">DIR</a> <a class="code" href="tff_8c.html#a90affc32512431e143844fa9721bf9d9">dj</a>;</div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;    <a class="code" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a> *<a class="code" href="tff_8c.html#addeee88e846cc637a785bcaf23b45b5e">dir</a>;</div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;    <a class="code" href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a>;</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;</div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;    res = chk_mounted(&amp;path, &amp;dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, 1);</div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;    <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;        <a class="code" href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a>(dj);</div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;        res = follow_path(&amp;dj, path); <span class="comment">/* Follow the file path */</span></div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;        <a class="code" href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a>();</div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ffconf_8h.html#a52faf11025401372f71e9d81905b7af4">_FS_RPATH</a> &amp;&amp; res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> &amp;&amp; (dj.<a class="code" href="struct_d_i_r.html#af5245f40680a50c52ce1028bbe62d9f9">fn</a>[<a class="code" href="ff_8c.html#a06c201f90533d5b49cd039c960327968">NS</a>] &amp; <a class="code" href="ff_8c.html#a2db528782a021797b34bdc6e9e9de1c3">NS_DOT</a>))</div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;            res = <a class="code" href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;</div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;        <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;            dir = dj.<a class="code" href="struct_d_i_r.html#ab9e26ba9262ce0f12d043d71dd4b2cf5">dir</a>;</div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;            <span class="keywordflow">if</span> (!dir) { <span class="comment">/* Is it a root directory? */</span></div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;                res = <a class="code" href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;</div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;            } <span class="keywordflow">else</span> { <span class="comment">/* File or sub directory */</span></div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;                mask &amp;= <a class="code" href="pff_8h.html#add6d85d1e7a02b4f6188783ef91a5f1e">AM_RDO</a> | <a class="code" href="pff_8h.html#aa90c4c921c1955fd407d8bbf17f1674e">AM_HID</a> | <a class="code" href="pff_8h.html#a1f25d5c17b5a3a6397b3398add8cdc15">AM_SYS</a> | <a class="code" href="pff_8h.html#ae8174d00798e34e7c9e95898cb9e1a09">AM_ARC</a>; <span class="comment">/* Valid attribute mask */</span></div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;                dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] = (value &amp; mask) | (dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>]</div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;                        &amp; (<a class="code" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a>) ~mask); <span class="comment">/* Apply attribute change */</span></div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;                dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a34eeef694e75229e1608f07acba3ed1c">wflag</a> = 1;</div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;                res = sync(dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>);</div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;            }</div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;        }</div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;    }</div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;</div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;    <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, res);</div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;}</div>
<div class="ttc" id="ff_8c_html_a966fe5792671b39db1ccf655a8c1af8d"><div class="ttname"><a href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a></div><div class="ttdeci">#define INIT_BUF(dobj)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00478">ff.c:478</a></div></div>
<div class="ttc" id="tff_8h_html_a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45"><div class="ttname"><a href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a></div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00154">tff.h:154</a></div></div>
<div class="ttc" id="struct_d_i_r_html_ab9e26ba9262ce0f12d043d71dd4b2cf5"><div class="ttname"><a href="struct_d_i_r.html#ab9e26ba9262ce0f12d043d71dd4b2cf5">DIR::dir</a></div><div class="ttdeci">PF_BYTE * dir</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00149">ff.h:149</a></div></div>
<div class="ttc" id="ff_8c_html_a06c201f90533d5b49cd039c960327968"><div class="ttname"><a href="ff_8c.html#a06c201f90533d5b49cd039c960327968">NS</a></div><div class="ttdeci">#define NS</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00375">ff.c:375</a></div></div>
<div class="ttc" id="ff_8c_html_ad3233e40118ed66095f3c9545b788f8a"><div class="ttname"><a href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a></div><div class="ttdeci">#define DIR_Attr</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00431">ff.c:431</a></div></div>
<div class="ttc" id="pff_8h_html_aa90c4c921c1955fd407d8bbf17f1674e"><div class="ttname"><a href="pff_8h.html#aa90c4c921c1955fd407d8bbf17f1674e">AM_HID</a></div><div class="ttdeci">#define AM_HID</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00163">pff.h:163</a></div></div>
<div class="ttc" id="struct_d_i_r_html_af5245f40680a50c52ce1028bbe62d9f9"><div class="ttname"><a href="struct_d_i_r.html#af5245f40680a50c52ce1028bbe62d9f9">DIR::fn</a></div><div class="ttdeci">PF_BYTE * fn</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00150">ff.h:150</a></div></div>
<div class="ttc" id="struct_d_i_r_html"><div class="ttname"><a href="struct_d_i_r.html">DIR</a></div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00109">tff.h:109</a></div></div>
<div class="ttc" id="ff_8c_html_a7e653d8ca0ae09faa49cd5b7335fea84"><div class="ttname"><a href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a></div><div class="ttdeci">#define LEAVE_FF(fs, res)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00130">ff.c:130</a></div></div>
<div class="ttc" id="ffconf_8h_html_a52faf11025401372f71e9d81905b7af4"><div class="ttname"><a href="ffconf_8h.html#a52faf11025401372f71e9d81905b7af4">_FS_RPATH</a></div><div class="ttdeci">#define _FS_RPATH</div><div class="ttdef"><b>Definition:</b> <a href="ffconf_8h_source.html#l00113">ffconf.h:113</a></div></div>
<div class="ttc" id="pff_8h_html_a1f25d5c17b5a3a6397b3398add8cdc15"><div class="ttname"><a href="pff_8h.html#a1f25d5c17b5a3a6397b3398add8cdc15">AM_SYS</a></div><div class="ttdeci">#define AM_SYS</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00164">pff.h:164</a></div></div>
<div class="ttc" id="p32_2include_2pinguino_2libraries_2sd_2integer_8h_html_aa1e36ce100a7ff1291e95b4515d42e65"><div class="ttname"><a href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a></div><div class="ttdeci">unsigned char PF_BYTE</div><div class="ttdef"><b>Definition:</b> <a href="p32_2include_2pinguino_2libraries_2sd_2integer_8h_source.html#l00008">integer.h:8</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a></div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00120">pff.h:120</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44c"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a></div><div class="ttdeci">FRESULT</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00119">pff.h:119</a></div></div>
<div class="ttc" id="tff_8c_html_a90affc32512431e143844fa9721bf9d9"><div class="ttname"><a href="tff_8c.html#a90affc32512431e143844fa9721bf9d9">dj</a></div><div class="ttdeci">DIR dj</div><div class="ttdef"><b>Definition:</b> <a href="tff_8c_source.html#l00066">tff.c:66</a></div></div>
<div class="ttc" id="ff_8c_html_aba6d6942b59f11cf285bdbfb7e38f1fa"><div class="ttname"><a href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a></div><div class="ttdeci">#define FREE_BUF()</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00479">ff.c:479</a></div></div>
<div class="ttc" id="struct_d_i_r_html_a472e3612956e3ffb3ab823c37ca33250"><div class="ttname"><a href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">DIR::fs</a></div><div class="ttdeci">FATFS * fs</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00112">tff.h:112</a></div></div>
<div class="ttc" id="pff_8h_html_add6d85d1e7a02b4f6188783ef91a5f1e"><div class="ttname"><a href="pff_8h.html#add6d85d1e7a02b4f6188783ef91a5f1e">AM_RDO</a></div><div class="ttdeci">#define AM_RDO</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00162">pff.h:162</a></div></div>
<div class="ttc" id="ff_8c_html_a2db528782a021797b34bdc6e9e9de1c3"><div class="ttname"><a href="ff_8c.html#a2db528782a021797b34bdc6e9e9de1c3">NS_DOT</a></div><div class="ttdeci">#define NS_DOT</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00381">ff.c:381</a></div></div>
<div class="ttc" id="tff_8c_html_addeee88e846cc637a785bcaf23b45b5e"><div class="ttname"><a href="tff_8c.html#addeee88e846cc637a785bcaf23b45b5e">dir</a></div><div class="ttdeci">byte * dir</div><div class="ttdef"><b>Definition:</b> <a href="tff_8c_source.html#l00068">tff.c:68</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_a34eeef694e75229e1608f07acba3ed1c"><div class="ttname"><a href="struct_f_a_t_f_s.html#a34eeef694e75229e1608f07acba3ed1c">FATFS::wflag</a></div><div class="ttdeci">PF_BYTE wflag</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00082">ff.h:82</a></div></div>
<div class="ttc" id="tff_8c_html_aab43d7bcfb87e7ef71138d651ce1bea1"><div class="ttname"><a href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a></div><div class="ttdeci">FRESULT res</div><div class="ttdef"><b>Definition:</b> <a href="tff_8c_source.html#l00065">tff.c:65</a></div></div>
<div class="ttc" id="pff_8h_html_ae8174d00798e34e7c9e95898cb9e1a09"><div class="ttname"><a href="pff_8h.html#ae8174d00798e34e7c9e95898cb9e1a09">AM_ARC</a></div><div class="ttdeci">#define AM_ARC</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00168">pff.h:168</a></div></div>
<div class="ttc" id="ff_8c_html_a40aba328871d2be78bfdd74b390275db"><div class="ttname"><a href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a></div><div class="ttdeci">#define DEF_NAMEBUF</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00477">ff.c:477</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a53882db20ef4323dcfd1874d7733ffc3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname"><em>fp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l02568">2568</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>References <a class="el" href="ff_8c_source.html#l02527">f_sync()</a>, <a class="el" href="pff_8h_source.html#l00120">FR_OK</a>, <a class="el" href="tff_8h_source.html#l00124">FIL::fs</a>, <a class="el" href="tff_8h_source.html#l00121">FIL::id</a>, <a class="el" href="ff_8c_source.html#l00130">LEAVE_FF</a>, <a class="el" href="p8_2pinguino_2core_2const_8h_source.html#l00033">NULL</a>, and <a class="el" href="tff_8c_source.html#l00065">res</a>.</p>
<div class="fragment"><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;  {</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;    <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> <a class="code" href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a>;</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;<span class="preprocessor">#if _FS_READONLY</span></div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;<span class="preprocessor"></span>    <a class="code" href="struct_f_a_t_f_s.html">FATFS</a> *fs = fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>;</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;    res = validate(fs, fp-&gt;<a class="code" href="struct_f_i_l.html#a588688f55d57bf8a7e8c1d2cf88a3c56">id</a>);</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;    <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a> = 0; <span class="comment">/* Discard file object */</span></div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;    <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fs, res);</div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;<span class="preprocessor"></span>    res = <a class="code" href="ff_8c.html#ad69c7246b122ba56a134939ee0eaf847">f_sync</a>(fp); <span class="comment">/* Flush cached data */</span></div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;<span class="preprocessor">#if _FS_SHARE</span></div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) { <span class="comment">/* Decrement open counter */</span></div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;<span class="preprocessor">#if _FS_REENTRANT</span></div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;<span class="preprocessor"></span>        res = validate(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a588688f55d57bf8a7e8c1d2cf88a3c56">id</a>);</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;        <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;            res = dec_lock(fp-&gt;lockid);</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;            unlock_fs(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>);</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;        }</div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;<span class="preprocessor"></span>        res = dec_lock(fp-&gt;lockid);</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;<span class="preprocessor"></span>    }</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>)</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;        fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a> = 0; <span class="comment">/* Discard file object */</span></div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a>;</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;<span class="preprocessor"></span>}</div>
<div class="ttc" id="struct_f_i_l_html_a472e3612956e3ffb3ab823c37ca33250"><div class="ttname"><a href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">FIL::fs</a></div><div class="ttdeci">FATFS * fs</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00124">tff.h:124</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html"><div class="ttname"><a href="struct_f_a_t_f_s.html">FATFS</a></div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00082">tff.h:82</a></div></div>
<div class="ttc" id="ff_8c_html_a7e653d8ca0ae09faa49cd5b7335fea84"><div class="ttname"><a href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a></div><div class="ttdeci">#define LEAVE_FF(fs, res)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00130">ff.c:130</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a></div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00120">pff.h:120</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44c"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a></div><div class="ttdeci">FRESULT</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00119">pff.h:119</a></div></div>
<div class="ttc" id="ff_8c_html_ad69c7246b122ba56a134939ee0eaf847"><div class="ttname"><a href="ff_8c.html#ad69c7246b122ba56a134939ee0eaf847">f_sync</a></div><div class="ttdeci">FRESULT f_sync(FIL *fp)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l02527">ff.c:2527</a></div></div>
<div class="ttc" id="tff_8c_html_aab43d7bcfb87e7ef71138d651ce1bea1"><div class="ttname"><a href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a></div><div class="ttdeci">FRESULT res</div><div class="ttdef"><b>Definition:</b> <a href="tff_8c_source.html#l00065">tff.c:65</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a588688f55d57bf8a7e8c1d2cf88a3c56"><div class="ttname"><a href="struct_f_i_l.html#a588688f55d57bf8a7e8c1d2cf88a3c56">FIL::id</a></div><div class="ttdeci">word id</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00121">tff.h:121</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0ff39f75a87cbda9cd6ea65d83f16cec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_getfree </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> *&#160;</td>
          <td class="paramname"><em>nclst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_f_a_t_f_s.html">FATFS</a> **&#160;</td>
          <td class="paramname"><em>fatfs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l02989">2989</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>References <a class="el" href="tff_8h_source.html#l00047">_FAT32</a>, <a class="el" href="tff_8h_source.html#l00086">FATFS::fatbase</a>, <a class="el" href="pff_8h_source.html#l00121">FR_DISK_ERR</a>, <a class="el" href="ff_8h_source.html#l00180">FR_INT_ERR</a>, <a class="el" href="pff_8h_source.html#l00120">FR_OK</a>, <a class="el" href="tff_8h_source.html#l00158">FR_RW_ERROR</a>, <a class="el" href="tff_8h_source.html#l00093">FATFS::free_clust</a>, <a class="el" href="pff_8h_source.html#l00155">FS_FAT12</a>, <a class="el" href="pff_8h_source.html#l00156">FS_FAT16</a>, <a class="el" href="pff_8h_source.html#l00157">FS_FAT32</a>, <a class="el" href="tff_8h_source.html#l00100">FATFS::fs_type</a>, <a class="el" href="ff_8h_source.html#l00083">FATFS::fsi_flag</a>, <a class="el" href="ff_8c_source.html#l00778">get_fat()</a>, <a class="el" href="pff_8h_source.html#l00235">LD_DWORD</a>, <a class="el" href="pff_8h_source.html#l00234">LD_WORD</a>, <a class="el" href="ff_8c_source.html#l00130">LEAVE_FF</a>, <a class="el" href="tff_8h_source.html#l00090">FATFS::max_clust</a>, <a class="el" href="tff_8c_source.html#l00065">res</a>, <a class="el" href="ff_8c_source.html#l00118">SS</a>, and <a class="el" href="tff_8h_source.html#l00104">FATFS::win</a>.</p>
<div class="fragment"><div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;  {</div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;    <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> <a class="code" href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a>;</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;    <a class="code" href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> n, clst, sect, stat;</div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;    <a class="code" href="p8_2pinguino_2libraries_2integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> i;</div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;    <a class="code" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a> fat, *p;</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;</div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;    <span class="comment">/* Get drive number */</span></div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;    res = chk_mounted(&amp;path, fatfs, 0);</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;    <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;        <span class="comment">/* If free_clust is valid, return it without full cluster scan */</span></div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;        <span class="keywordflow">if</span> ((*fatfs)-&gt;free_clust &lt;= (*fatfs)-&gt;n_fatent - 2) {</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;            *nclst = (*fatfs)-&gt;free_clust;</div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;            <span class="comment">/* Get number of free clusters */</span></div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;            fat = (*fatfs)-&gt;fs_type;</div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;            n = 0;</div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;            <span class="keywordflow">if</span> (fat == <a class="code" href="pff_8h.html#aab755aa1b4f81f4aabee4a5d4738cfb0">FS_FAT12</a>) {</div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;                clst = 2;</div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;                <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;                    stat = <a class="code" href="ff_8c.html#a65611adf1626e5e08da77cd33a98dd8b">get_fat</a>(*fatfs, clst);</div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;                    <span class="keywordflow">if</span> (stat == 0xFFFFFFFF) {</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;                        res = <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>;</div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;                    }</div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;                    <span class="keywordflow">if</span> (stat == 1) {</div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;                        res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;                    }</div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;                    <span class="keywordflow">if</span> (stat == 0)</div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;                        n++;</div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;                } <span class="keywordflow">while</span> (++clst &lt; (*fatfs)-&gt;n_fatent);</div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;                clst = (*fatfs)-&gt;n_fatent;</div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;                sect = (*fatfs)-&gt;fatbase;</div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;                i = 0;</div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;                p = 0;</div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;                <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;                    <span class="keywordflow">if</span> (!i) {</div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;                        res = move_window(*fatfs, sect++);</div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;                        <span class="keywordflow">if</span> (res != <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>)</div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;                        p = (*fatfs)-&gt;win;</div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;                        i = <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(*fatfs);</div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;                    }</div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;                    <span class="keywordflow">if</span> (fat == <a class="code" href="pff_8h.html#a7ef90a36d99edfc0138a2155a17a79b9">FS_FAT16</a>) {</div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="pff_8h.html#a398519bb08da6457e62567d1f0b567e3">LD_WORD</a>(p) == 0)</div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;                            n++;</div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;                        p += 2;</div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;                        i -= 2;</div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;                        <span class="keywordflow">if</span> ((<a class="code" href="pff_8h.html#a4690304ddc975516f7dc02575c96e34e">LD_DWORD</a>(p) &amp; 0x0FFFFFFF) == 0)</div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;                            n++;</div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;                        p += 4;</div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;                        i -= 4;</div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;                    }</div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;                } <span class="keywordflow">while</span> (--clst);</div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;            }</div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;            (*fatfs)-&gt;free_clust = n;</div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;            <span class="keywordflow">if</span> (fat == <a class="code" href="pff_8h.html#ac63e0796095a789cefdbc3c3c676c9ce">FS_FAT32</a>)</div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;                (*fatfs)-&gt;fsi_flag = 1;</div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;            *nclst = n;</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;        }</div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;    }</div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;    <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(*fatfs, res);</div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;}</div>
<div class="ttc" id="pff_8h_html_a398519bb08da6457e62567d1f0b567e3"><div class="ttname"><a href="pff_8h.html#a398519bb08da6457e62567d1f0b567e3">LD_WORD</a></div><div class="ttdeci">#define LD_WORD(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00234">pff.h:234</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a></div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00121">pff.h:121</a></div></div>
<div class="ttc" id="ff_8c_html_a7e653d8ca0ae09faa49cd5b7335fea84"><div class="ttname"><a href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a></div><div class="ttdeci">#define LEAVE_FF(fs, res)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00130">ff.c:130</a></div></div>
<div class="ttc" id="pff_8h_html_a7ef90a36d99edfc0138a2155a17a79b9"><div class="ttname"><a href="pff_8h.html#a7ef90a36d99edfc0138a2155a17a79b9">FS_FAT16</a></div><div class="ttdeci">#define FS_FAT16</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00156">pff.h:156</a></div></div>
<div class="ttc" id="pff_8h_html_a4690304ddc975516f7dc02575c96e34e"><div class="ttname"><a href="pff_8h.html#a4690304ddc975516f7dc02575c96e34e">LD_DWORD</a></div><div class="ttdeci">#define LD_DWORD(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00235">pff.h:235</a></div></div>
<div class="ttc" id="ff_8h_html_a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76"><div class="ttname"><a href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a></div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00180">ff.h:180</a></div></div>
<div class="ttc" id="p32_2include_2pinguino_2libraries_2sd_2integer_8h_html_aa1e36ce100a7ff1291e95b4515d42e65"><div class="ttname"><a href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a></div><div class="ttdeci">unsigned char PF_BYTE</div><div class="ttdef"><b>Definition:</b> <a href="p32_2include_2pinguino_2libraries_2sd_2integer_8h_source.html#l00008">integer.h:8</a></div></div>
<div class="ttc" id="p8_2pinguino_2libraries_2integer_8h_html_ad342ac907eb044443153a22f964bf0af"><div class="ttname"><a href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a></div><div class="ttdeci">unsigned long DWORD</div><div class="ttdef"><b>Definition:</b> <a href="p8_2pinguino_2libraries_2integer_8h_source.html#l00033">integer.h:33</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a></div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00120">pff.h:120</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44c"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a></div><div class="ttdeci">FRESULT</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00119">pff.h:119</a></div></div>
<div class="ttc" id="ff_8c_html_a65611adf1626e5e08da77cd33a98dd8b"><div class="ttname"><a href="ff_8c.html#a65611adf1626e5e08da77cd33a98dd8b">get_fat</a></div><div class="ttdeci">DWORD get_fat(FATFS *fs, DWORD clst)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00778">ff.c:778</a></div></div>
<div class="ttc" id="pff_8h_html_ac63e0796095a789cefdbc3c3c676c9ce"><div class="ttname"><a href="pff_8h.html#ac63e0796095a789cefdbc3c3c676c9ce">FS_FAT32</a></div><div class="ttdeci">#define FS_FAT32</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00157">pff.h:157</a></div></div>
<div class="ttc" id="p8_2pinguino_2libraries_2integer_8h_html_a36cb3b01d81ffd844bbbfb54003e06ec"><div class="ttname"><a href="p8_2pinguino_2libraries_2integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a></div><div class="ttdeci">unsigned int UINT</div><div class="ttdef"><b>Definition:</b> <a href="p8_2pinguino_2libraries_2integer_8h_source.html#l00017">integer.h:17</a></div></div>
<div class="ttc" id="pff_8h_html_aab755aa1b4f81f4aabee4a5d4738cfb0"><div class="ttname"><a href="pff_8h.html#aab755aa1b4f81f4aabee4a5d4738cfb0">FS_FAT12</a></div><div class="ttdeci">#define FS_FAT12</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00155">pff.h:155</a></div></div>
<div class="ttc" id="tff_8c_html_aab43d7bcfb87e7ef71138d651ce1bea1"><div class="ttname"><a href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a></div><div class="ttdeci">FRESULT res</div><div class="ttdef"><b>Definition:</b> <a href="tff_8c_source.html#l00065">tff.c:65</a></div></div>
<div class="ttc" id="ff_8c_html_a42b5140fc5e09a53c8f4cba66dc0e6c1"><div class="ttname"><a href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a></div><div class="ttdeci">#define SS(fs)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00118">ff.c:118</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5df0ac672ada972e89ef4b003e57f964"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_lseek </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>&#160;</td>
          <td class="paramname"><em>ofs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l02721">2721</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>References <a class="el" href="tff_8h_source.html#l00027">_FS_READONLY</a>, <a class="el" href="ff_8c_source.html#l00133">ABORT</a>, <a class="el" href="ff_8h_source.html#l00134">FIL::buf</a>, <a class="el" href="ff_8h_source.html#l00128">FIL::cltbl</a>, <a class="el" href="ff_8h_source.html#l00121">FIL::clust</a>, <a class="el" href="ff_8c_source.html#l00764">clust2sect()</a>, <a class="el" href="ff_8h_source.html#l00314">CREATE_LINKMAP</a>, <a class="el" href="tff_8h_source.html#l00123">FIL::csect</a>, <a class="el" href="tff_8h_source.html#l00101">FATFS::csize</a>, <a class="el" href="tff_8h_source.html#l00128">FIL::curr_clust</a>, <a class="el" href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#a77ba19c0c97a900fac95999446e32308">disk_read()</a>, <a class="el" href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#a7ffe0ccc946550a260d00871c6b636e7">disk_write()</a>, <a class="el" href="ff_8h_source.html#l00079">FATFS::drv</a>, <a class="el" href="ff_8h_source.html#l00122">FIL::dsect</a>, <a class="el" href="ff_8h_source.html#l00290">FA__DIRTY</a>, <a class="el" href="tff_8h_source.html#l00217">FA__ERROR</a>, <a class="el" href="tff_8h_source.html#l00215">FA__WRITTEN</a>, <a class="el" href="tff_8h_source.html#l00211">FA_WRITE</a>, <a class="el" href="tff_8h_source.html#l00122">FIL::flag</a>, <a class="el" href="tff_8h_source.html#l00125">FIL::fptr</a>, <a class="el" href="pff_8h_source.html#l00121">FR_DISK_ERR</a>, <a class="el" href="ff_8h_source.html#l00180">FR_INT_ERR</a>, <a class="el" href="ff_8h_source.html#l00195">FR_NOT_ENOUGH_CORE</a>, <a class="el" href="pff_8h_source.html#l00120">FR_OK</a>, <a class="el" href="tff_8h_source.html#l00158">FR_RW_ERROR</a>, <a class="el" href="tff_8h_source.html#l00124">FIL::fs</a>, <a class="el" href="tff_8h_source.html#l00126">FIL::fsize</a>, <a class="el" href="ff_8c_source.html#l00778">get_fat()</a>, <a class="el" href="tff_8h_source.html#l00121">FIL::id</a>, <a class="el" href="p8_2pinguino_2libraries_2_p_c_d8544_8c_source.html#l00276">if()</a>, <a class="el" href="ff_8c_source.html#l00130">LEAVE_FF</a>, <a class="el" href="tff_8h_source.html#l00090">FATFS::max_clust</a>, <a class="el" href="ff_8h_source.html#l00100">FATFS::n_fatent</a>, <a class="el" href="tff_8h_source.html#l00127">FIL::org_clust</a>, <a class="el" href="tff_8c_source.html#l00065">res</a>, <a class="el" href="p8_2pinguino_2libraries_2sd_2diskio_8h_source.html#l00015">RES_OK</a>, <a class="el" href="ff_8h_source.html#l00120">FIL::sclust</a>, and <a class="el" href="ff_8c_source.html#l00118">SS</a>.</p>
<div class="fragment"><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;  {</div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;    <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> <a class="code" href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a>;</div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;</div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;    res = validate(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a588688f55d57bf8a7e8c1d2cf88a3c56">id</a>); <span class="comment">/* Check validity of the object */</span></div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;    <span class="keywordflow">if</span> (res != <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>)</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, res);</div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;    <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#ae84669505a47c55d6246560a290a298d">flag</a> &amp; <a class="code" href="tff_8h.html#ad3b47fe8126573b17752a9a242b76b9a">FA__ERROR</a>) <span class="comment">/* Check abort flag */</span></div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;</div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;<span class="preprocessor">#if _USE_FASTSEEK</span></div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#a807e335a4d92639456ac4273cb0de4cb">cltbl</a>) { <span class="comment">/* Fast seek */</span></div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;        <a class="code" href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> cl, pcl, ncl, tcl, dsc, tlen, ulen, *tbl;</div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;        <span class="keywordflow">if</span> (ofs == <a class="code" href="ff_8h.html#aee297a9011164cf485a4df2a72758b08">CREATE_LINKMAP</a>) { <span class="comment">/* Create CLMT */</span></div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;            tbl = fp-&gt;<a class="code" href="struct_f_i_l.html#a807e335a4d92639456ac4273cb0de4cb">cltbl</a>;</div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;            tlen = *tbl++;</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;            ulen = 2; <span class="comment">/* Given table size and required table size */</span></div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;            cl = fp-&gt;<a class="code" href="struct_f_i_l.html#ad5d52f3fde971d2a05ff777a6243c252">sclust</a>; <span class="comment">/* Top of the chain */</span></div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;            <span class="keywordflow">if</span> (cl) {</div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;                <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;                    <span class="comment">/* Get a fragment */</span></div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;                    tcl = cl;</div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;                    ncl = 0;</div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;                    ulen += 2; <span class="comment">/* Top, length and used items */</span></div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;                    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;                        pcl = cl;</div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;                        ncl++;</div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;                        cl = <a class="code" href="ff_8c.html#a65611adf1626e5e08da77cd33a98dd8b">get_fat</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, cl);</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;                        <span class="keywordflow">if</span> (cl &lt;= 1)</div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;                            <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;                        <span class="keywordflow">if</span> (cl == 0xFFFFFFFF)</div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;                            <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;                    } <span class="keywordflow">while</span> (cl == pcl + 1);</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;                    <span class="keywordflow">if</span> (ulen &lt;= tlen) { <span class="comment">/* Store the length and top of the fragment */</span></div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;                        *tbl++ = ncl;</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;                        *tbl++ = tcl;</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;                    }</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;                } <span class="keywordflow">while</span> (cl &lt; fp-&gt;fs-&gt;n_fatent); <span class="comment">/* Repeat until end of chain */</span></div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;            }</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;            *fp-&gt;<a class="code" href="struct_f_i_l.html#a807e335a4d92639456ac4273cb0de4cb">cltbl</a> = ulen; <span class="comment">/* Number of items used */</span></div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;            <span class="keywordflow">if</span> (ulen &lt;= tlen)</div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;                *tbl = 0; <span class="comment">/* Terminate table */</span></div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;                res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44caf56a76a86602cbdeb2c4f3d00cfad21c">FR_NOT_ENOUGH_CORE</a>; <span class="comment">/* Given table size is smaller than required */</span></div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;</div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;        } <span class="keywordflow">else</span> { <span class="comment">/* Fast seek */</span></div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;            <span class="keywordflow">if</span> (ofs &gt; fp-&gt;<a class="code" href="struct_f_i_l.html#a7582a0b3a658c0543f6cdc7585d84f7c">fsize</a>) <span class="comment">/* Clip offset at the file size */</span></div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;                ofs = fp-&gt;<a class="code" href="struct_f_i_l.html#a7582a0b3a658c0543f6cdc7585d84f7c">fsize</a>;</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;            fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a> = ofs; <span class="comment">/* Set file pointer */</span></div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;            <span class="keywordflow">if</span> (ofs) {</div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;                fp-&gt;<a class="code" href="struct_f_i_l.html#ac134c1b4645be670eb5207032e714616">clust</a> = clmt_clust(fp, ofs - 1);</div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;                dsc = <a class="code" href="ff_8c.html#a7519abb60fe91f6aa1d17f64fbae123a">clust2sect</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#ac134c1b4645be670eb5207032e714616">clust</a>);</div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;                <span class="keywordflow">if</span> (!dsc)</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;                    <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;                dsc += (ofs - 1) / <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>) &amp; (fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#af8143a50ac7be72544022dd46a7013da">csize</a> - 1);</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;                <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a> % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>) &amp;&amp; dsc != fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a>) { <span class="comment">/* Refill sector cache if needed */</span></div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;<span class="preprocessor">#if !_FS_TINY</span></div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#if !_FS_READONLY</span></div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;<span class="preprocessor"></span>                    <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#ae84669505a47c55d6246560a290a298d">flag</a> &amp; <a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>) { <span class="comment">/* Write-back dirty sector cache */</span></div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#a7ffe0ccc946550a260d00871c6b636e7">disk_write</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#aabcebc0763f1acbd8928158570150c9f">drv</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a8b83239f9e2ae594c0cbc75d23ddff89">buf</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a>, 1)</div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;                                != <a class="code" href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>)</div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;                            <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;                        fp-&gt;<a class="code" href="struct_f_i_l.html#ae84669505a47c55d6246560a290a298d">flag</a> &amp;= ~<a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>;</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;                    }</div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;<span class="preprocessor"></span>                    <span class="keywordflow">if</span> (<a class="code" href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#a77ba19c0c97a900fac95999446e32308">disk_read</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#aabcebc0763f1acbd8928158570150c9f">drv</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a8b83239f9e2ae594c0cbc75d23ddff89">buf</a>, dsc, 1) != <a class="code" href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>) <span class="comment">/* Load current sector */</span></div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;                        <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;<span class="preprocessor"></span>                    fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a> = dsc;</div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;                }</div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;            }</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;        }</div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;    <span class="comment">/* Normal Seek */</span></div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;    {</div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;        <a class="code" href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> clst, bcs, nsect, ifptr;</div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;        <span class="keywordflow">if</span> (ofs &gt; fp-&gt;<a class="code" href="struct_f_i_l.html#a7582a0b3a658c0543f6cdc7585d84f7c">fsize</a> <span class="comment">/* In read-only mode, clip offset with the file size */</span></div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;#<span class="keywordflow">if</span> !<a class="code" href="tff_8h.html#afb8d35370cfe0c23832ac2d82e854ec6">_FS_READONLY</a></div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;                &amp;&amp; !(fp-&gt;<a class="code" href="struct_f_i_l.html#ae84669505a47c55d6246560a290a298d">flag</a> &amp; <a class="code" href="tff_8h.html#afa366963220c89b882c0361794020c14">FA_WRITE</a>)</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;<span class="preprocessor"></span>        )</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;            ofs = fp-&gt;<a class="code" href="struct_f_i_l.html#a7582a0b3a658c0543f6cdc7585d84f7c">fsize</a>;</div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;</div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;        ifptr = fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a>;</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;        fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a> = nsect = 0;</div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;        <a class="code" href="p8_2pinguino_2libraries_2_p_c_d8544_8c.html#af84ca11bf86c56a1f74027a99d48218d">if</a> (ofs) {</div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;            bcs = (<a class="code" href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>) fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#af8143a50ac7be72544022dd46a7013da">csize</a> * <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>); <span class="comment">/* Cluster size (byte) */</span></div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;            <span class="keywordflow">if</span> (ifptr &gt; 0 &amp;&amp; (ofs - 1) / bcs &gt;= (ifptr - 1) / bcs) { <span class="comment">/* When seek to same or following cluster, */</span></div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;                fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a> = (ifptr - 1) &amp; ~(bcs - 1); <span class="comment">/* start from the current cluster */</span></div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;                ofs -= fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a>;</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;                clst = fp-&gt;<a class="code" href="struct_f_i_l.html#ac134c1b4645be670eb5207032e714616">clust</a>;</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;            } <span class="keywordflow">else</span> { <span class="comment">/* When seek to back cluster, */</span></div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;                clst = fp-&gt;<a class="code" href="struct_f_i_l.html#ad5d52f3fde971d2a05ff777a6243c252">sclust</a>; <span class="comment">/* start from the first cluster */</span></div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;<span class="preprocessor">#if !_FS_READONLY</span></div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;<span class="preprocessor"></span>                <span class="keywordflow">if</span> (clst == 0) { <span class="comment">/* If no cluster chain, create a new chain */</span></div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;                    clst = create_chain(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, 0);</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;                    <span class="keywordflow">if</span> (clst == 1)</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;                        <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;                    <span class="keywordflow">if</span> (clst == 0xFFFFFFFF)</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;                        <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;                    fp-&gt;<a class="code" href="struct_f_i_l.html#ad5d52f3fde971d2a05ff777a6243c252">sclust</a> = clst;</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;                }</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;<span class="preprocessor"></span>                fp-&gt;<a class="code" href="struct_f_i_l.html#ac134c1b4645be670eb5207032e714616">clust</a> = clst;</div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;            }</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;            <span class="keywordflow">if</span> (clst != 0) {</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;                <span class="keywordflow">while</span> (ofs &gt; bcs) { <span class="comment">/* Cluster following loop */</span></div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;<span class="preprocessor">#if !_FS_READONLY</span></div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;<span class="preprocessor"></span>                    <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#ae84669505a47c55d6246560a290a298d">flag</a> &amp; <a class="code" href="tff_8h.html#afa366963220c89b882c0361794020c14">FA_WRITE</a>) { <span class="comment">/* Check if in write mode or not */</span></div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;                        clst = create_chain(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, clst); <span class="comment">/* Force stretch if in write mode */</span></div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;                        <span class="keywordflow">if</span> (clst == 0) { <span class="comment">/* When disk gets full, clip file size */</span></div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;                            ofs = bcs;</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;                        }</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;                    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;<span class="preprocessor"></span>                        clst = <a class="code" href="ff_8c.html#a65611adf1626e5e08da77cd33a98dd8b">get_fat</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, clst); <span class="comment">/* Follow cluster chain if not in write mode */</span></div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;                    <span class="keywordflow">if</span> (clst == 0xFFFFFFFF)</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;                        <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;                    <span class="keywordflow">if</span> (clst &lt;= 1 || clst &gt;= fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a388eb0fa0f3f1449a6ab88c6674e16fc">n_fatent</a>)</div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;                        <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;                    fp-&gt;<a class="code" href="struct_f_i_l.html#ac134c1b4645be670eb5207032e714616">clust</a> = clst;</div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;                    fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a> += bcs;</div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;                    ofs -= bcs;</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;                }</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;                fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a> += ofs;</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;                <span class="keywordflow">if</span> (ofs % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>)) {</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;                    nsect = <a class="code" href="ff_8c.html#a7519abb60fe91f6aa1d17f64fbae123a">clust2sect</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, clst); <span class="comment">/* Current sector */</span></div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;                    <span class="keywordflow">if</span> (!nsect)</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;                        <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;                    nsect += ofs / <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>);</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;                }</div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;            }</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;        }</div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;        <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a> % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>) &amp;&amp; nsect != fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a>) { <span class="comment">/* Fill sector cache if needed */</span></div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;<span class="preprocessor">#if !_FS_TINY</span></div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#if !_FS_READONLY</span></div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;<span class="preprocessor"></span>            <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#ae84669505a47c55d6246560a290a298d">flag</a> &amp; <a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>) { <span class="comment">/* Write-back dirty sector cache */</span></div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#a7ffe0ccc946550a260d00871c6b636e7">disk_write</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#aabcebc0763f1acbd8928158570150c9f">drv</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a8b83239f9e2ae594c0cbc75d23ddff89">buf</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a>, 1) != <a class="code" href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>)</div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;                    <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;                fp-&gt;<a class="code" href="struct_f_i_l.html#ae84669505a47c55d6246560a290a298d">flag</a> &amp;= ~<a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>;</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;            }</div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;<span class="preprocessor"></span>            <span class="keywordflow">if</span> (<a class="code" href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#a77ba19c0c97a900fac95999446e32308">disk_read</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#aabcebc0763f1acbd8928158570150c9f">drv</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a8b83239f9e2ae594c0cbc75d23ddff89">buf</a>, nsect, 1) != <a class="code" href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>) <span class="comment">/* Fill sector cache */</span></div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;                <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;<span class="preprocessor"></span>            fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a> = nsect;</div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;        }</div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;<span class="preprocessor">#if !_FS_READONLY</span></div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;<span class="preprocessor"></span>        <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a> &gt; fp-&gt;<a class="code" href="struct_f_i_l.html#a7582a0b3a658c0543f6cdc7585d84f7c">fsize</a>) { <span class="comment">/* Set file change flag if the file size is extended */</span></div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;            fp-&gt;<a class="code" href="struct_f_i_l.html#a7582a0b3a658c0543f6cdc7585d84f7c">fsize</a> = fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a>;</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;            fp-&gt;<a class="code" href="struct_f_i_l.html#ae84669505a47c55d6246560a290a298d">flag</a> |= <a class="code" href="tff_8h.html#ac4b7d5223f84df91c306ffbff536fae4">FA__WRITTEN</a>;</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;        }</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;<span class="preprocessor"></span>    }</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;    <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, res);</div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;}</div>
<div class="ttc" id="struct_f_i_l_html_ae84669505a47c55d6246560a290a298d"><div class="ttname"><a href="struct_f_i_l.html#ae84669505a47c55d6246560a290a298d">FIL::flag</a></div><div class="ttdeci">byte flag</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00122">tff.h:122</a></div></div>
<div class="ttc" id="ff_8h_html_aee297a9011164cf485a4df2a72758b08"><div class="ttname"><a href="ff_8h.html#aee297a9011164cf485a4df2a72758b08">CREATE_LINKMAP</a></div><div class="ttdeci">#define CREATE_LINKMAP</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00314">ff.h:314</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a7582a0b3a658c0543f6cdc7585d84f7c"><div class="ttname"><a href="struct_f_i_l.html#a7582a0b3a658c0543f6cdc7585d84f7c">FIL::fsize</a></div><div class="ttdeci">dword fsize</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00126">tff.h:126</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a472e3612956e3ffb3ab823c37ca33250"><div class="ttname"><a href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">FIL::fs</a></div><div class="ttdeci">FATFS * fs</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00124">tff.h:124</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a></div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00121">pff.h:121</a></div></div>
<div class="ttc" id="tff_8h_html_afa366963220c89b882c0361794020c14"><div class="ttname"><a href="tff_8h.html#afa366963220c89b882c0361794020c14">FA_WRITE</a></div><div class="ttdeci">#define FA_WRITE</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00211">tff.h:211</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a272171f74215002aba31a89428f1d290"><div class="ttname"><a href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">FIL::dsect</a></div><div class="ttdeci">DWORD dsect</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00122">ff.h:122</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_a388eb0fa0f3f1449a6ab88c6674e16fc"><div class="ttname"><a href="struct_f_a_t_f_s.html#a388eb0fa0f3f1449a6ab88c6674e16fc">FATFS::n_fatent</a></div><div class="ttdeci">DWORD n_fatent</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00100">ff.h:100</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_aabcebc0763f1acbd8928158570150c9f"><div class="ttname"><a href="struct_f_a_t_f_s.html#aabcebc0763f1acbd8928158570150c9f">FATFS::drv</a></div><div class="ttdeci">PF_BYTE drv</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00079">ff.h:79</a></div></div>
<div class="ttc" id="ff_8c_html_a41e4c46636679236568cf50b5535847f"><div class="ttname"><a href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a></div><div class="ttdeci">#define ABORT(fs, res)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00133">ff.c:133</a></div></div>
<div class="ttc" id="ff_8c_html_a7e653d8ca0ae09faa49cd5b7335fea84"><div class="ttname"><a href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a></div><div class="ttdeci">#define LEAVE_FF(fs, res)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00130">ff.c:130</a></div></div>
<div class="ttc" id="ff_8c_html_a7519abb60fe91f6aa1d17f64fbae123a"><div class="ttname"><a href="ff_8c.html#a7519abb60fe91f6aa1d17f64fbae123a">clust2sect</a></div><div class="ttdeci">DWORD clust2sect(FATFS *fs, DWORD clst)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00764">ff.c:764</a></div></div>
<div class="ttc" id="tff_8h_html_ad3b47fe8126573b17752a9a242b76b9a"><div class="ttname"><a href="tff_8h.html#ad3b47fe8126573b17752a9a242b76b9a">FA__ERROR</a></div><div class="ttdeci">#define FA__ERROR</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00217">tff.h:217</a></div></div>
<div class="ttc" id="struct_f_i_l_html_ac134c1b4645be670eb5207032e714616"><div class="ttname"><a href="struct_f_i_l.html#ac134c1b4645be670eb5207032e714616">FIL::clust</a></div><div class="ttdeci">DWORD clust</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00121">ff.h:121</a></div></div>
<div class="ttc" id="ff_8h_html_a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76"><div class="ttname"><a href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a></div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00180">ff.h:180</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a807e335a4d92639456ac4273cb0de4cb"><div class="ttname"><a href="struct_f_i_l.html#a807e335a4d92639456ac4273cb0de4cb">FIL::cltbl</a></div><div class="ttdeci">DWORD * cltbl</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00128">ff.h:128</a></div></div>
<div class="ttc" id="p8_2pinguino_2libraries_2sd_2diskio_8h_html_a7ffe0ccc946550a260d00871c6b636e7"><div class="ttname"><a href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#a7ffe0ccc946550a260d00871c6b636e7">disk_write</a></div><div class="ttdeci">DRESULT disk_write(const u8 *, u32, u8)</div></div>
<div class="ttc" id="tff_8h_html_afb8d35370cfe0c23832ac2d82e854ec6"><div class="ttname"><a href="tff_8h.html#afb8d35370cfe0c23832ac2d82e854ec6">_FS_READONLY</a></div><div class="ttdeci">#define _FS_READONLY</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00027">tff.h:27</a></div></div>
<div class="ttc" id="p8_2pinguino_2libraries_2_p_c_d8544_8c_html_af84ca11bf86c56a1f74027a99d48218d"><div class="ttname"><a href="p8_2pinguino_2libraries_2_p_c_d8544_8c.html#af84ca11bf86c56a1f74027a99d48218d">if</a></div><div class="ttdeci">if(PCD8544._rst &gt; 0)</div><div class="ttdef"><b>Definition:</b> <a href="p8_2pinguino_2libraries_2_p_c_d8544_8c_source.html#l00276">PCD8544.c:276</a></div></div>
<div class="ttc" id="p8_2pinguino_2libraries_2integer_8h_html_ad342ac907eb044443153a22f964bf0af"><div class="ttname"><a href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a></div><div class="ttdeci">unsigned long DWORD</div><div class="ttdef"><b>Definition:</b> <a href="p8_2pinguino_2libraries_2integer_8h_source.html#l00033">integer.h:33</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a></div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00120">pff.h:120</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44c"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a></div><div class="ttdeci">FRESULT</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00119">pff.h:119</a></div></div>
<div class="ttc" id="struct_f_i_l_html_ad5d52f3fde971d2a05ff777a6243c252"><div class="ttname"><a href="struct_f_i_l.html#ad5d52f3fde971d2a05ff777a6243c252">FIL::sclust</a></div><div class="ttdeci">DWORD sclust</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00120">ff.h:120</a></div></div>
<div class="ttc" id="ff_8c_html_a65611adf1626e5e08da77cd33a98dd8b"><div class="ttname"><a href="ff_8c.html#a65611adf1626e5e08da77cd33a98dd8b">get_fat</a></div><div class="ttdeci">DWORD get_fat(FATFS *fs, DWORD clst)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00778">ff.c:778</a></div></div>
<div class="ttc" id="ff_8h_html_a5b2962e3616a1e9eb709d95f4c75c67c"><div class="ttname"><a href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a></div><div class="ttdeci">#define FA__DIRTY</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00290">ff.h:290</a></div></div>
<div class="ttc" id="p8_2pinguino_2libraries_2sd_2diskio_8h_html_aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737"><div class="ttname"><a href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a></div><div class="ttdef"><b>Definition:</b> <a href="p8_2pinguino_2libraries_2sd_2diskio_8h_source.html#l00015">diskio.h:15</a></div></div>
<div class="ttc" id="tff_8h_html_ac4b7d5223f84df91c306ffbff536fae4"><div class="ttname"><a href="tff_8h.html#ac4b7d5223f84df91c306ffbff536fae4">FA__WRITTEN</a></div><div class="ttdeci">#define FA__WRITTEN</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00215">tff.h:215</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a5afdaf3451d484cc97e07228b775ccf1"><div class="ttname"><a href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">FIL::fptr</a></div><div class="ttdeci">dword fptr</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00125">tff.h:125</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_af8143a50ac7be72544022dd46a7013da"><div class="ttname"><a href="struct_f_a_t_f_s.html#af8143a50ac7be72544022dd46a7013da">FATFS::csize</a></div><div class="ttdeci">byte csize</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00101">tff.h:101</a></div></div>
<div class="ttc" id="tff_8c_html_aab43d7bcfb87e7ef71138d651ce1bea1"><div class="ttname"><a href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a></div><div class="ttdeci">FRESULT res</div><div class="ttdef"><b>Definition:</b> <a href="tff_8c_source.html#l00065">tff.c:65</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a8b83239f9e2ae594c0cbc75d23ddff89"><div class="ttname"><a href="struct_f_i_l.html#a8b83239f9e2ae594c0cbc75d23ddff89">FIL::buf</a></div><div class="ttdeci">PF_BYTE buf[_MAX_SS]</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00134">ff.h:134</a></div></div>
<div class="ttc" id="p8_2pinguino_2libraries_2sd_2diskio_8h_html_a77ba19c0c97a900fac95999446e32308"><div class="ttname"><a href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#a77ba19c0c97a900fac95999446e32308">disk_read</a></div><div class="ttdeci">DRESULT disk_read(u8 *, u32, u8)</div></div>
<div class="ttc" id="ff_8c_html_a42b5140fc5e09a53c8f4cba66dc0e6c1"><div class="ttname"><a href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a></div><div class="ttdeci">#define SS(fs)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00118">ff.c:118</a></div></div>
<div class="ttc" id="ff_8h_html_a49d0171ecbd362cda5680a0d360db44caf56a76a86602cbdeb2c4f3d00cfad21c"><div class="ttname"><a href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44caf56a76a86602cbdeb2c4f3d00cfad21c">FR_NOT_ENOUGH_CORE</a></div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00195">ff.h:195</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a588688f55d57bf8a7e8c1d2cf88a3c56"><div class="ttname"><a href="struct_f_i_l.html#a588688f55d57bf8a7e8c1d2cf88a3c56">FIL::id</a></div><div class="ttdeci">word id</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00121">tff.h:121</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4b4d38db58e89c526cfcf53200d719d0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_mkdir </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l03171">3171</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>References <a class="el" href="ffconf_8h_source.html#l00113">_FS_RPATH</a>, <a class="el" href="pff_8h_source.html#l00167">AM_DIR</a>, <a class="el" href="ff_8c_source.html#l00764">clust2sect()</a>, <a class="el" href="tff_8h_source.html#l00101">FATFS::csize</a>, <a class="el" href="ff_8c_source.html#l00477">DEF_NAMEBUF</a>, <a class="el" href="tff_8c_source.html#l00068">dir</a>, <a class="el" href="ff_8h_source.html#l00149">DIR::dir</a>, <a class="el" href="ff_8c_source.html#l00431">DIR_Attr</a>, <a class="el" href="pff_8h_source.html#l00217">DIR_FstClusHI</a>, <a class="el" href="pff_8h_source.html#l00220">DIR_FstClusLO</a>, <a class="el" href="ff_8c_source.html#l00430">DIR_Name</a>, <a class="el" href="pff_8h_source.html#l00214">DIR_NTres</a>, <a class="el" href="ff_8c_source.html#l00436">DIR_WrtTime</a>, <a class="el" href="tff_8h_source.html#l00087">FATFS::dirbase</a>, <a class="el" href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#a7ffe0ccc946550a260d00871c6b636e7">disk_write()</a>, <a class="el" href="tff_8c_source.html#l00066">dj</a>, <a class="el" href="ff_8h_source.html#l00150">DIR::fn</a>, <a class="el" href="tff_8h_source.html#l00156">FR_DENIED</a>, <a class="el" href="pff_8h_source.html#l00121">FR_DISK_ERR</a>, <a class="el" href="tff_8h_source.html#l00157">FR_EXIST</a>, <a class="el" href="ff_8h_source.html#l00180">FR_INT_ERR</a>, <a class="el" href="tff_8h_source.html#l00154">FR_INVALID_NAME</a>, <a class="el" href="pff_8h_source.html#l00123">FR_NO_FILE</a>, <a class="el" href="pff_8h_source.html#l00120">FR_OK</a>, <a class="el" href="tff_8h_source.html#l00158">FR_RW_ERROR</a>, <a class="el" href="ff_8c_source.html#l00479">FREE_BUF</a>, <a class="el" href="tff_8h_source.html#l00112">DIR::fs</a>, <a class="el" href="pff_8h_source.html#l00157">FS_FAT32</a>, <a class="el" href="tff_8h_source.html#l00100">FATFS::fs_type</a>, <a class="el" href="p32_2include_2pinguino_2libraries_2sd_2diskio_8c_source.html#l00583">get_fattime()</a>, <a class="el" href="ff_8c_source.html#l00478">INIT_BUF</a>, <a class="el" href="ff_8c_source.html#l00130">LEAVE_FF</a>, <a class="el" href="ff_8c_source.html#l00375">NS</a>, <a class="el" href="tff_8c_source.html#l00065">res</a>, <a class="el" href="p8_2pinguino_2libraries_2sd_2diskio_8h_source.html#l00015">RES_OK</a>, <a class="el" href="tff_8h_source.html#l00113">DIR::sclust</a>, <a class="el" href="ff_8c_source.html#l00118">SS</a>, <a class="el" href="ff_8c_source.html#l00150">ST_CLUST</a>, <a class="el" href="pff_8h_source.html#l00237">ST_DWORD</a>, <a class="el" href="pff_8h_source.html#l00236">ST_WORD</a>, <a class="el" href="ff_8c_source.html#l00445">SZ_DIR</a>, <a class="el" href="ff_8h_source.html#l00082">FATFS::wflag</a>, <a class="el" href="tff_8h_source.html#l00104">FATFS::win</a>, <a class="el" href="tff_8h_source.html#l00103">FATFS::winflag</a>, and <a class="el" href="tff_8h_source.html#l00085">FATFS::winsect</a>.</p>
<div class="fragment"><div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;  {</div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;    <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> <a class="code" href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a>;</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;    <a class="code" href="struct_d_i_r.html">DIR</a> <a class="code" href="tff_8c.html#a90affc32512431e143844fa9721bf9d9">dj</a>;</div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;    <a class="code" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a> *<a class="code" href="tff_8c.html#addeee88e846cc637a785bcaf23b45b5e">dir</a>, n;</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;    <a class="code" href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> dsc, dcl, pcl, tim = <a class="code" href="tff_8h.html#a489f23a9be58cd896a5c45e45c6e6e6f">get_fattime</a>();</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;    <a class="code" href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a>;</div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;</div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;    res = chk_mounted(&amp;path, &amp;dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, 1);</div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;    <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;        <a class="code" href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a>(dj);</div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;        res = follow_path(&amp;dj, path); <span class="comment">/* Follow the file path */</span></div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;        <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>)</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;            res = <a class="code" href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca0d8f024d256df76e84782b95018a2450">FR_EXIST</a>; <span class="comment">/* Any object with same name is already existing */</span></div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ffconf_8h.html#a52faf11025401372f71e9d81905b7af4">_FS_RPATH</a> &amp;&amp; res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a> &amp;&amp; (dj.<a class="code" href="struct_d_i_r.html#af5245f40680a50c52ce1028bbe62d9f9">fn</a>[<a class="code" href="ff_8c.html#a06c201f90533d5b49cd039c960327968">NS</a>] &amp; <a class="code" href="ff_8c.html#a2db528782a021797b34bdc6e9e9de1c3">NS_DOT</a>))</div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;            res = <a class="code" href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;</div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;        <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>) { <span class="comment">/* Can create a new directory */</span></div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;            dcl = create_chain(dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, 0); <span class="comment">/* Allocate a cluster for the new directory table */</span></div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;            res = <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>;</div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;            <span class="keywordflow">if</span> (dcl == 0)</div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;                res = <a class="code" href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>; <span class="comment">/* No space to allocate a new cluster */</span></div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;            <span class="keywordflow">if</span> (dcl == 1)</div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;                res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;            <span class="keywordflow">if</span> (dcl == 0xFFFFFFFF)</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;                res = <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>;</div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;            <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) <span class="comment">/* Flush FAT */</span></div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;                res = move_window(dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, 0);</div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;            <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) { <span class="comment">/* Initialize the new directory table */</span></div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;                dsc = <a class="code" href="ff_8c.html#a7519abb60fe91f6aa1d17f64fbae123a">clust2sect</a>(dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, dcl);</div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;                dir = dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a54541860d8273ee2709def80ccc3e271">win</a>;</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;                mem_set(dir, 0, <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>));</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;                mem_set(dir + <a class="code" href="ff_8c.html#afa89348e9fc2de82ae9e12c661366b0e">DIR_Name</a>, <span class="charliteral">&#39; &#39;</span>, 8 + 3); <span class="comment">/* Create &quot;.&quot; entry */</span></div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;                dir[<a class="code" href="ff_8c.html#afa89348e9fc2de82ae9e12c661366b0e">DIR_Name</a>] = <span class="charliteral">&#39;.&#39;</span>;</div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;                dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] = <a class="code" href="pff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>;</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;                <a class="code" href="pff_8h.html#abf5aba973d95ac5843b80aa7379cdd66">ST_DWORD</a>(dir+<a class="code" href="ff_8c.html#ab9452d336adeece2a1b0b54ab35b8a59">DIR_WrtTime</a>, tim);</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;                <a class="code" href="ff_8c.html#a08174fa72222a48a5c9e5de70c341af7">ST_CLUST</a>(dir, dcl);</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;                mem_cpy(dir + <a class="code" href="ff_8c.html#ab10c2f2271dbdc132f9a6b9313fc7324">SZ_DIR</a>, dir, <a class="code" href="ff_8c.html#ab10c2f2271dbdc132f9a6b9313fc7324">SZ_DIR</a>); <span class="comment">/* Create &quot;..&quot; entry */</span></div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;                dir[33] = <span class="charliteral">&#39;.&#39;</span>;</div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;                pcl = dj.<a class="code" href="struct_d_i_r.html#aada1acd6ce100ead798e712b18c49547">sclust</a>;</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;                <span class="keywordflow">if</span> (dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#aee58d0bf64f06146927e78ad026b06ac">fs_type</a> == <a class="code" href="pff_8h.html#ac63e0796095a789cefdbc3c3c676c9ce">FS_FAT32</a> &amp;&amp; pcl == dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a2152449dba421b7671f09ec7fcc7fa4e">dirbase</a>)</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;                    pcl = 0;</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;                <a class="code" href="ff_8c.html#a08174fa72222a48a5c9e5de70c341af7">ST_CLUST</a>(dir+<a class="code" href="ff_8c.html#ab10c2f2271dbdc132f9a6b9313fc7324">SZ_DIR</a>, pcl);</div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;                <span class="keywordflow">for</span> (n = dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#af8143a50ac7be72544022dd46a7013da">csize</a>; n; n--) { <span class="comment">/* Write dot entries and clear following sectors */</span></div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;                    dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a5ee19a26d1dfd79d52fbba59cc792da3">winsect</a> = dsc++;</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;                    dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a34eeef694e75229e1608f07acba3ed1c">wflag</a> = 1;</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;                    res = move_window(dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, 0);</div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;                    <span class="keywordflow">if</span> (res != <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>)</div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;                    mem_set(dir, 0, <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>));</div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;                }</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;            }</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;            <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>)</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;                res = dir_register(&amp;dj); <span class="comment">/* Register the object to the directoy */</span></div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;            <span class="keywordflow">if</span> (res != <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;                remove_chain(dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, dcl); <span class="comment">/* Could not register, remove cluster chain */</span></div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;                dir = dj.<a class="code" href="struct_d_i_r.html#ab9e26ba9262ce0f12d043d71dd4b2cf5">dir</a>;</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;                dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] = <a class="code" href="pff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>; <span class="comment">/* Attribute */</span></div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;                <a class="code" href="pff_8h.html#abf5aba973d95ac5843b80aa7379cdd66">ST_DWORD</a>(dir+<a class="code" href="ff_8c.html#ab9452d336adeece2a1b0b54ab35b8a59">DIR_WrtTime</a>, tim); <span class="comment">/* Created time */</span></div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;                <a class="code" href="ff_8c.html#a08174fa72222a48a5c9e5de70c341af7">ST_CLUST</a>(dir, dcl); <span class="comment">/* Table start cluster */</span></div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;                dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a34eeef694e75229e1608f07acba3ed1c">wflag</a> = 1;</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;                res = sync(dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>);</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;            }</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;        }<a class="code" href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a>();</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;    }</div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;</div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;    <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, res);</div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;}</div>
<div class="ttc" id="ff_8c_html_a966fe5792671b39db1ccf655a8c1af8d"><div class="ttname"><a href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a></div><div class="ttdeci">#define INIT_BUF(dobj)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00478">ff.c:478</a></div></div>
<div class="ttc" id="pff_8h_html_abf5aba973d95ac5843b80aa7379cdd66"><div class="ttname"><a href="pff_8h.html#abf5aba973d95ac5843b80aa7379cdd66">ST_DWORD</a></div><div class="ttdeci">#define ST_DWORD(ptr, val)</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00237">pff.h:237</a></div></div>
<div class="ttc" id="tff_8h_html_a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45"><div class="ttname"><a href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a></div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00154">tff.h:154</a></div></div>
<div class="ttc" id="tff_8h_html_a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d"><div class="ttname"><a href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a></div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00156">tff.h:156</a></div></div>
<div class="ttc" id="struct_d_i_r_html_ab9e26ba9262ce0f12d043d71dd4b2cf5"><div class="ttname"><a href="struct_d_i_r.html#ab9e26ba9262ce0f12d043d71dd4b2cf5">DIR::dir</a></div><div class="ttdeci">PF_BYTE * dir</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00149">ff.h:149</a></div></div>
<div class="ttc" id="ff_8c_html_a06c201f90533d5b49cd039c960327968"><div class="ttname"><a href="ff_8c.html#a06c201f90533d5b49cd039c960327968">NS</a></div><div class="ttdeci">#define NS</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00375">ff.c:375</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_a5ee19a26d1dfd79d52fbba59cc792da3"><div class="ttname"><a href="struct_f_a_t_f_s.html#a5ee19a26d1dfd79d52fbba59cc792da3">FATFS::winsect</a></div><div class="ttdeci">dword winsect</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00085">tff.h:85</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a></div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00123">pff.h:123</a></div></div>
<div class="ttc" id="ff_8c_html_ad3233e40118ed66095f3c9545b788f8a"><div class="ttname"><a href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a></div><div class="ttdeci">#define DIR_Attr</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00431">ff.c:431</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a></div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00121">pff.h:121</a></div></div>
<div class="ttc" id="struct_d_i_r_html_af5245f40680a50c52ce1028bbe62d9f9"><div class="ttname"><a href="struct_d_i_r.html#af5245f40680a50c52ce1028bbe62d9f9">DIR::fn</a></div><div class="ttdeci">PF_BYTE * fn</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00150">ff.h:150</a></div></div>
<div class="ttc" id="struct_d_i_r_html"><div class="ttname"><a href="struct_d_i_r.html">DIR</a></div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00109">tff.h:109</a></div></div>
<div class="ttc" id="ff_8c_html_a7e653d8ca0ae09faa49cd5b7335fea84"><div class="ttname"><a href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a></div><div class="ttdeci">#define LEAVE_FF(fs, res)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00130">ff.c:130</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_aee58d0bf64f06146927e78ad026b06ac"><div class="ttname"><a href="struct_f_a_t_f_s.html#aee58d0bf64f06146927e78ad026b06ac">FATFS::fs_type</a></div><div class="ttdeci">byte fs_type</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00100">tff.h:100</a></div></div>
<div class="ttc" id="ff_8c_html_ab10c2f2271dbdc132f9a6b9313fc7324"><div class="ttname"><a href="ff_8c.html#ab10c2f2271dbdc132f9a6b9313fc7324">SZ_DIR</a></div><div class="ttdeci">#define SZ_DIR</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00445">ff.c:445</a></div></div>
<div class="ttc" id="ff_8c_html_a7519abb60fe91f6aa1d17f64fbae123a"><div class="ttname"><a href="ff_8c.html#a7519abb60fe91f6aa1d17f64fbae123a">clust2sect</a></div><div class="ttdeci">DWORD clust2sect(FATFS *fs, DWORD clst)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00764">ff.c:764</a></div></div>
<div class="ttc" id="ff_8c_html_a08174fa72222a48a5c9e5de70c341af7"><div class="ttname"><a href="ff_8c.html#a08174fa72222a48a5c9e5de70c341af7">ST_CLUST</a></div><div class="ttdeci">#define ST_CLUST(dir, cl)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00150">ff.c:150</a></div></div>
<div class="ttc" id="ff_8h_html_a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76"><div class="ttname"><a href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a></div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00180">ff.h:180</a></div></div>
<div class="ttc" id="ffconf_8h_html_a52faf11025401372f71e9d81905b7af4"><div class="ttname"><a href="ffconf_8h.html#a52faf11025401372f71e9d81905b7af4">_FS_RPATH</a></div><div class="ttdeci">#define _FS_RPATH</div><div class="ttdef"><b>Definition:</b> <a href="ffconf_8h_source.html#l00113">ffconf.h:113</a></div></div>
<div class="ttc" id="p32_2include_2pinguino_2libraries_2sd_2integer_8h_html_aa1e36ce100a7ff1291e95b4515d42e65"><div class="ttname"><a href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a></div><div class="ttdeci">unsigned char PF_BYTE</div><div class="ttdef"><b>Definition:</b> <a href="p32_2include_2pinguino_2libraries_2sd_2integer_8h_source.html#l00008">integer.h:8</a></div></div>
<div class="ttc" id="p8_2pinguino_2libraries_2integer_8h_html_ad342ac907eb044443153a22f964bf0af"><div class="ttname"><a href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a></div><div class="ttdeci">unsigned long DWORD</div><div class="ttdef"><b>Definition:</b> <a href="p8_2pinguino_2libraries_2integer_8h_source.html#l00033">integer.h:33</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a></div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00120">pff.h:120</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44c"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a></div><div class="ttdeci">FRESULT</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00119">pff.h:119</a></div></div>
<div class="ttc" id="tff_8c_html_a90affc32512431e143844fa9721bf9d9"><div class="ttname"><a href="tff_8c.html#a90affc32512431e143844fa9721bf9d9">dj</a></div><div class="ttdeci">DIR dj</div><div class="ttdef"><b>Definition:</b> <a href="tff_8c_source.html#l00066">tff.c:66</a></div></div>
<div class="ttc" id="tff_8h_html_a49d0171ecbd362cda5680a0d360db44ca0d8f024d256df76e84782b95018a2450"><div class="ttname"><a href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca0d8f024d256df76e84782b95018a2450">FR_EXIST</a></div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00157">tff.h:157</a></div></div>
<div class="ttc" id="ff_8c_html_aba6d6942b59f11cf285bdbfb7e38f1fa"><div class="ttname"><a href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a></div><div class="ttdeci">#define FREE_BUF()</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00479">ff.c:479</a></div></div>
<div class="ttc" id="struct_d_i_r_html_a472e3612956e3ffb3ab823c37ca33250"><div class="ttname"><a href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">DIR::fs</a></div><div class="ttdeci">FATFS * fs</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00112">tff.h:112</a></div></div>
<div class="ttc" id="pff_8h_html_ac63e0796095a789cefdbc3c3c676c9ce"><div class="ttname"><a href="pff_8h.html#ac63e0796095a789cefdbc3c3c676c9ce">FS_FAT32</a></div><div class="ttdeci">#define FS_FAT32</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00157">pff.h:157</a></div></div>
<div class="ttc" id="ff_8c_html_ab9452d336adeece2a1b0b54ab35b8a59"><div class="ttname"><a href="ff_8c.html#ab9452d336adeece2a1b0b54ab35b8a59">DIR_WrtTime</a></div><div class="ttdeci">#define DIR_WrtTime</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00436">ff.c:436</a></div></div>
<div class="ttc" id="tff_8h_html_a489f23a9be58cd896a5c45e45c6e6e6f"><div class="ttname"><a href="tff_8h.html#a489f23a9be58cd896a5c45e45c6e6e6f">get_fattime</a></div><div class="ttdeci">dword get_fattime(void)</div><div class="ttdef"><b>Definition:</b> <a href="p32_2include_2pinguino_2libraries_2sd_2diskio_8c_source.html#l00583">diskio.c:583</a></div></div>
<div class="ttc" id="ff_8c_html_a2db528782a021797b34bdc6e9e9de1c3"><div class="ttname"><a href="ff_8c.html#a2db528782a021797b34bdc6e9e9de1c3">NS_DOT</a></div><div class="ttdeci">#define NS_DOT</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00381">ff.c:381</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_af8143a50ac7be72544022dd46a7013da"><div class="ttname"><a href="struct_f_a_t_f_s.html#af8143a50ac7be72544022dd46a7013da">FATFS::csize</a></div><div class="ttdeci">byte csize</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00101">tff.h:101</a></div></div>
<div class="ttc" id="tff_8c_html_addeee88e846cc637a785bcaf23b45b5e"><div class="ttname"><a href="tff_8c.html#addeee88e846cc637a785bcaf23b45b5e">dir</a></div><div class="ttdeci">byte * dir</div><div class="ttdef"><b>Definition:</b> <a href="tff_8c_source.html#l00068">tff.c:68</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_a34eeef694e75229e1608f07acba3ed1c"><div class="ttname"><a href="struct_f_a_t_f_s.html#a34eeef694e75229e1608f07acba3ed1c">FATFS::wflag</a></div><div class="ttdeci">PF_BYTE wflag</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00082">ff.h:82</a></div></div>
<div class="ttc" id="tff_8c_html_aab43d7bcfb87e7ef71138d651ce1bea1"><div class="ttname"><a href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a></div><div class="ttdeci">FRESULT res</div><div class="ttdef"><b>Definition:</b> <a href="tff_8c_source.html#l00065">tff.c:65</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_a2152449dba421b7671f09ec7fcc7fa4e"><div class="ttname"><a href="struct_f_a_t_f_s.html#a2152449dba421b7671f09ec7fcc7fa4e">FATFS::dirbase</a></div><div class="ttdeci">dword dirbase</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00087">tff.h:87</a></div></div>
<div class="ttc" id="ff_8c_html_a40aba328871d2be78bfdd74b390275db"><div class="ttname"><a href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a></div><div class="ttdeci">#define DEF_NAMEBUF</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00477">ff.c:477</a></div></div>
<div class="ttc" id="ff_8c_html_a42b5140fc5e09a53c8f4cba66dc0e6c1"><div class="ttname"><a href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a></div><div class="ttdeci">#define SS(fs)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00118">ff.c:118</a></div></div>
<div class="ttc" id="pff_8h_html_a3a9db44e978ed6c13b641e092d4cd7d3"><div class="ttname"><a href="pff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a></div><div class="ttdeci">#define AM_DIR</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00167">pff.h:167</a></div></div>
<div class="ttc" id="struct_d_i_r_html_aada1acd6ce100ead798e712b18c49547"><div class="ttname"><a href="struct_d_i_r.html#aada1acd6ce100ead798e712b18c49547">DIR::sclust</a></div><div class="ttdeci">CLUST sclust</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00113">tff.h:113</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_a54541860d8273ee2709def80ccc3e271"><div class="ttname"><a href="struct_f_a_t_f_s.html#a54541860d8273ee2709def80ccc3e271">FATFS::win</a></div><div class="ttdeci">byte win[512]</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00104">tff.h:104</a></div></div>
<div class="ttc" id="ff_8c_html_afa89348e9fc2de82ae9e12c661366b0e"><div class="ttname"><a href="ff_8c.html#afa89348e9fc2de82ae9e12c661366b0e">DIR_Name</a></div><div class="ttdeci">#define DIR_Name</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00430">ff.c:430</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3bb9e218b8a853db0871a0fa93a0eae6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_mount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a>&#160;</td>
          <td class="paramname"><em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_f_a_t_f_s.html">FATFS</a> *&#160;</td>
          <td class="paramname"><em>fs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l02142">2142</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>References <a class="el" href="ffconf_8h_source.html#l00128">_VOLUMES</a>, <a class="el" href="ff_8h_source.html#l00180">FR_INT_ERR</a>, <a class="el" href="tff_8h_source.html#l00155">FR_INVALID_DRIVE</a>, <a class="el" href="pff_8h_source.html#l00120">FR_OK</a>, and <a class="el" href="tff_8h_source.html#l00100">FATFS::fs_type</a>.</p>
<div class="fragment"><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;  {</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;    <a class="code" href="struct_f_a_t_f_s.html">FATFS</a> *rfs;</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;    <span class="keywordflow">if</span> (vol &gt;= <a class="code" href="ffconf_8h.html#a366da9a40c8ceb3103a6b72ca02b9969">_VOLUMES</a>) {<span class="comment">/* Check if the drive number is valid */</span></div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca487844af77de15f6932a3b41ef3a2d65">FR_INVALID_DRIVE</a>;</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;    }</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;    rfs = FatFs[vol]; <span class="comment">/* Get current fs object */</span></div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;    <span class="keywordflow">if</span> (rfs) {</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;<span class="preprocessor">#if _FS_SHARE</span></div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;<span class="preprocessor"></span>        clear_lock(rfs);</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#if _FS_REENTRANT               </span><span class="comment">/* Discard sync object of the current volume */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;<span class="preprocessor"></span>        <span class="keywordflow">if</span> (!ff_del_syncobj(rfs-&gt;sobj)) <span class="keywordflow">return</span> <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;<span class="preprocessor"></span>        rfs-&gt;<a class="code" href="struct_f_a_t_f_s.html#aee58d0bf64f06146927e78ad026b06ac">fs_type</a> = 0; <span class="comment">/* Clear old fs object */</span></div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;    }</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;    <span class="keywordflow">if</span> (fs) {</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;        fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#aee58d0bf64f06146927e78ad026b06ac">fs_type</a> = 0; <span class="comment">/* Clear new fs object */</span></div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;<span class="preprocessor">#if _FS_REENTRANT               </span><span class="comment">/* Create sync object for the new volume */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;<span class="preprocessor"></span>        <span class="keywordflow">if</span> (!ff_cre_syncobj(vol, &amp;fs-&gt;sobj)) <span class="keywordflow">return</span> <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;<span class="preprocessor"></span>    }</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;    FatFs[vol] = fs; <span class="comment">/* Register new fs object */</span></div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>;</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;}</div>
<div class="ttc" id="struct_f_a_t_f_s_html"><div class="ttname"><a href="struct_f_a_t_f_s.html">FATFS</a></div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00082">tff.h:82</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_aee58d0bf64f06146927e78ad026b06ac"><div class="ttname"><a href="struct_f_a_t_f_s.html#aee58d0bf64f06146927e78ad026b06ac">FATFS::fs_type</a></div><div class="ttdeci">byte fs_type</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00100">tff.h:100</a></div></div>
<div class="ttc" id="ffconf_8h_html_a366da9a40c8ceb3103a6b72ca02b9969"><div class="ttname"><a href="ffconf_8h.html#a366da9a40c8ceb3103a6b72ca02b9969">_VOLUMES</a></div><div class="ttdeci">#define _VOLUMES</div><div class="ttdef"><b>Definition:</b> <a href="ffconf_8h_source.html#l00128">ffconf.h:128</a></div></div>
<div class="ttc" id="ff_8h_html_a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76"><div class="ttname"><a href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a></div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00180">ff.h:180</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a></div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00120">pff.h:120</a></div></div>
<div class="ttc" id="tff_8h_html_a49d0171ecbd362cda5680a0d360db44ca487844af77de15f6932a3b41ef3a2d65"><div class="ttname"><a href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca487844af77de15f6932a3b41ef3a2d65">FR_INVALID_DRIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00155">tff.h:155</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab001edb1e8000ce84d9967e616a78ae7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a>&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l02177">2177</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>References <a class="el" href="pff_8h_source.html#l00167">AM_DIR</a>, <a class="el" href="pff_8h_source.html#l00162">AM_RDO</a>, <a class="el" href="ff_8h_source.html#l00128">FIL::cltbl</a>, <a class="el" href="tff_8h_source.html#l00123">FIL::csect</a>, <a class="el" href="ff_8c_source.html#l00477">DEF_NAMEBUF</a>, <a class="el" href="tff_8c_source.html#l00068">dir</a>, <a class="el" href="ff_8h_source.html#l00149">DIR::dir</a>, <a class="el" href="ff_8c_source.html#l00431">DIR_Attr</a>, <a class="el" href="ff_8c_source.html#l00433">DIR_CrtTime</a>, <a class="el" href="ff_8c_source.html#l00439">DIR_FileSize</a>, <a class="el" href="pff_8h_source.html#l00217">DIR_FstClusHI</a>, <a class="el" href="pff_8h_source.html#l00220">DIR_FstClusLO</a>, <a class="el" href="pff_8h_source.html#l00212">DIR_Name</a>, <a class="el" href="pff_8h_source.html#l00214">DIR_NTres</a>, <a class="el" href="tff_8h_source.html#l00132">FIL::dir_ptr</a>, <a class="el" href="tff_8h_source.html#l00131">FIL::dir_sect</a>, <a class="el" href="tff_8c_source.html#l00066">dj</a>, <a class="el" href="ff_8h_source.html#l00122">FIL::dsect</a>, <a class="el" href="tff_8h_source.html#l00215">FA__WRITTEN</a>, <a class="el" href="tff_8h_source.html#l00213">FA_CREATE_ALWAYS</a>, <a class="el" href="tff_8h_source.html#l00212">FA_CREATE_NEW</a>, <a class="el" href="tff_8h_source.html#l00214">FA_OPEN_ALWAYS</a>, <a class="el" href="tff_8h_source.html#l00208">FA_READ</a>, <a class="el" href="tff_8h_source.html#l00211">FA_WRITE</a>, <a class="el" href="tff_8h_source.html#l00122">FIL::flag</a>, <a class="el" href="tff_8h_source.html#l00125">FIL::fptr</a>, <a class="el" href="tff_8h_source.html#l00156">FR_DENIED</a>, <a class="el" href="tff_8h_source.html#l00157">FR_EXIST</a>, <a class="el" href="ff_8h_source.html#l00180">FR_INT_ERR</a>, <a class="el" href="tff_8h_source.html#l00154">FR_INVALID_NAME</a>, <a class="el" href="pff_8h_source.html#l00123">FR_NO_FILE</a>, <a class="el" href="pff_8h_source.html#l00120">FR_OK</a>, <a class="el" href="tff_8h_source.html#l00158">FR_RW_ERROR</a>, <a class="el" href="ff_8h_source.html#l00196">FR_TOO_MANY_OPEN_FILES</a>, <a class="el" href="ff_8c_source.html#l00479">FREE_BUF</a>, <a class="el" href="tff_8h_source.html#l00112">DIR::fs</a>, <a class="el" href="tff_8h_source.html#l00124">FIL::fs</a>, <a class="el" href="tff_8h_source.html#l00126">FIL::fsize</a>, <a class="el" href="p32_2include_2pinguino_2libraries_2sd_2diskio_8c_source.html#l00583">get_fattime()</a>, <a class="el" href="tff_8h_source.html#l00083">FATFS::id</a>, <a class="el" href="tff_8h_source.html#l00121">FIL::id</a>, <a class="el" href="ff_8c_source.html#l00478">INIT_BUF</a>, <a class="el" href="tff_8h_source.html#l00092">FATFS::last_clust</a>, <a class="el" href="ff_8c_source.html#l00149">LD_CLUST</a>, <a class="el" href="pff_8h_source.html#l00235">LD_DWORD</a>, <a class="el" href="pff_8h_source.html#l00234">LD_WORD</a>, <a class="el" href="ff_8c_source.html#l00130">LEAVE_FF</a>, <a class="el" href="p8_2pinguino_2core_2const_8h_source.html#l00033">NULL</a>, <a class="el" href="tff_8h_source.html#l00127">FIL::org_clust</a>, <a class="el" href="tff_8c_source.html#l00065">res</a>, <a class="el" href="ff_8h_source.html#l00120">FIL::sclust</a>, <a class="el" href="ff_8c_source.html#l00150">ST_CLUST</a>, <a class="el" href="pff_8h_source.html#l00237">ST_DWORD</a>, <a class="el" href="pff_8h_source.html#l00236">ST_WORD</a>, <a class="el" href="ff_8h_source.html#l00082">FATFS::wflag</a>, <a class="el" href="tff_8h_source.html#l00103">FATFS::winflag</a>, and <a class="el" href="tff_8h_source.html#l00085">FATFS::winsect</a>.</p>
<div class="fragment"><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;  {</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;    <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> <a class="code" href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a>;</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;    <a class="code" href="struct_d_i_r.html">DIR</a> <a class="code" href="tff_8c.html#a90affc32512431e143844fa9721bf9d9">dj</a>;</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;    <a class="code" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a> *<a class="code" href="tff_8c.html#addeee88e846cc637a785bcaf23b45b5e">dir</a>;</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;    <a class="code" href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a>;</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;    fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a> = 0; <span class="comment">/* Clear file object */</span></div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;<span class="preprocessor">#if !_FS_READONLY</span></div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;<span class="preprocessor"></span>    mode &amp;= <a class="code" href="tff_8h.html#a1f4f3530ff03abbd979b072536e72290">FA_READ</a> | <a class="code" href="tff_8h.html#afa366963220c89b882c0361794020c14">FA_WRITE</a> | <a class="code" href="tff_8h.html#afba4546b131dea4b24727fa20a80e29f">FA_CREATE_ALWAYS</a> | <a class="code" href="tff_8h.html#a17b01553029920ac0468912b4bcb16c7">FA_OPEN_ALWAYS</a></div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;            | <a class="code" href="tff_8h.html#a417bb1babd1785fd181a806b5613eba3">FA_CREATE_NEW</a>;</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;    res = chk_mounted(&amp;path, &amp;dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, (<a class="code" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a>) (mode &amp; ~<a class="code" href="tff_8h.html#a1f4f3530ff03abbd979b072536e72290">FA_READ</a>));</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;<span class="preprocessor"></span>    mode &amp;= <a class="code" href="tff_8h.html#a1f4f3530ff03abbd979b072536e72290">FA_READ</a>;</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;    res = chk_mounted(&amp;path, &amp;dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, 0);</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;<span class="preprocessor"></span>    <a class="code" href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a>(dj);</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;    <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>)</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;        res = follow_path(&amp;dj, path); <span class="comment">/* Follow the file path */</span></div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;    dir = dj.<a class="code" href="struct_d_i_r.html#ab9e26ba9262ce0f12d043d71dd4b2cf5">dir</a>;</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;<span class="preprocessor">#if !_FS_READONLY   </span><span class="comment">/* R/W configuration */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;        <span class="keywordflow">if</span> (!dir) <span class="comment">/* Current dir itself */</span></div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;            res = <a class="code" href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;<span class="preprocessor">#if _FS_SHARE</span></div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;<span class="preprocessor"></span>        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;        res = chk_lock(&amp;dj, (mode &amp; ~<a class="code" href="tff_8h.html#a1f4f3530ff03abbd979b072536e72290">FA_READ</a>) ? 1 : 0);</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;<span class="preprocessor"></span>    }</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;    <span class="comment">/* Create or Open a file */</span></div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;    <span class="keywordflow">if</span> (mode &amp; (<a class="code" href="tff_8h.html#afba4546b131dea4b24727fa20a80e29f">FA_CREATE_ALWAYS</a> | <a class="code" href="tff_8h.html#a17b01553029920ac0468912b4bcb16c7">FA_OPEN_ALWAYS</a> | <a class="code" href="tff_8h.html#a417bb1babd1785fd181a806b5613eba3">FA_CREATE_NEW</a>)) {</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;        <a class="code" href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> dw, cl;</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;        <span class="keywordflow">if</span> (res != <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) { <span class="comment">/* No file, create new */</span></div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;            <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>) <span class="comment">/* There is no file to open, create a new entry */</span></div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;<span class="preprocessor">#if _FS_SHARE</span></div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;<span class="preprocessor"></span>                res = enq_lock() ? dir_register(&amp;dj) : <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca50dd3c3c274ccebb2cfbddde9d065bb9">FR_TOO_MANY_OPEN_FILES</a>;</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;<span class="preprocessor"></span>                res = dir_register(&amp;dj);</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;<span class="preprocessor"></span>            mode |= <a class="code" href="tff_8h.html#afba4546b131dea4b24727fa20a80e29f">FA_CREATE_ALWAYS</a>; <span class="comment">/* File is created */</span></div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;            dir = dj.<a class="code" href="struct_d_i_r.html#ab9e26ba9262ce0f12d043d71dd4b2cf5">dir</a>; <span class="comment">/* New entry */</span></div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;        } <span class="keywordflow">else</span> { <span class="comment">/* Any object is already existing */</span></div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;            <span class="keywordflow">if</span> (dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] &amp; (<a class="code" href="pff_8h.html#add6d85d1e7a02b4f6188783ef91a5f1e">AM_RDO</a> | <a class="code" href="pff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>)) { <span class="comment">/* Cannot overwrite it (R/O or DIR) */</span></div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;                res = <a class="code" href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>;</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;                <span class="keywordflow">if</span> (mode &amp; <a class="code" href="tff_8h.html#a417bb1babd1785fd181a806b5613eba3">FA_CREATE_NEW</a>) <span class="comment">/* Cannot create as new file */</span></div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;                    res = <a class="code" href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca0d8f024d256df76e84782b95018a2450">FR_EXIST</a>;</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;            }</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;        }</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;        <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> &amp;&amp; (mode &amp; <a class="code" href="tff_8h.html#afba4546b131dea4b24727fa20a80e29f">FA_CREATE_ALWAYS</a>)) { <span class="comment">/* Truncate it if overwrite mode */</span></div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;            dw = <a class="code" href="tff_8h.html#a489f23a9be58cd896a5c45e45c6e6e6f">get_fattime</a>(); <span class="comment">/* Created time */</span></div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;            <a class="code" href="pff_8h.html#abf5aba973d95ac5843b80aa7379cdd66">ST_DWORD</a>(dir+<a class="code" href="ff_8c.html#a47fb1881ea71d860db9b8280564cb4d5">DIR_CrtTime</a>, dw);</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;            dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] = 0; <span class="comment">/* Reset attribute */</span></div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;            <a class="code" href="pff_8h.html#abf5aba973d95ac5843b80aa7379cdd66">ST_DWORD</a>(dir+<a class="code" href="ff_8c.html#abfbfa613864a02a65f0bf70ead6672c7">DIR_FileSize</a>, 0); <span class="comment">/* size = 0 */</span></div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;            cl = <a class="code" href="ff_8c.html#a19cd426084600d6007eb6f976c81fbdf">LD_CLUST</a>(dir); <span class="comment">/* Get start cluster */</span></div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;            <a class="code" href="ff_8c.html#a08174fa72222a48a5c9e5de70c341af7">ST_CLUST</a>(dir, 0); <span class="comment">/* cluster = 0 */</span></div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;            dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a34eeef694e75229e1608f07acba3ed1c">wflag</a> = 1;</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;            <span class="keywordflow">if</span> (cl) { <span class="comment">/* Remove the cluster chain if exist */</span></div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;                dw = dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a5ee19a26d1dfd79d52fbba59cc792da3">winsect</a>;</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;                res = remove_chain(dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, cl);</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;                <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;                    dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a07b2a137b54c6c95ffcee006c8906429">last_clust</a> = cl - 1; <span class="comment">/* Reuse the cluster hole */</span></div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;                    res = move_window(dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, dw);</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;                }</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;            }</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;        }</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;    } <span class="keywordflow">else</span> { <span class="comment">/* Open an existing file */</span></div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;        <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) { <span class="comment">/* Follow succeeded */</span></div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;            <span class="keywordflow">if</span> (dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] &amp; <a class="code" href="pff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>) { <span class="comment">/* It is a directory */</span></div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;                res = <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>;</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;                <span class="keywordflow">if</span> ((mode &amp; <a class="code" href="tff_8h.html#afa366963220c89b882c0361794020c14">FA_WRITE</a>) &amp;&amp; (dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] &amp; <a class="code" href="pff_8h.html#add6d85d1e7a02b4f6188783ef91a5f1e">AM_RDO</a>)) <span class="comment">/* R/O violation */</span></div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;                    res = <a class="code" href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>;</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;            }</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;        }</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;    }</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;    <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;        <span class="keywordflow">if</span> (mode &amp; FA_CREATE_ALWAYS) <span class="comment">/* Set file change flag if created or overwritten */</span></div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;            mode |= <a class="code" href="tff_8h.html#ac4b7d5223f84df91c306ffbff536fae4">FA__WRITTEN</a>;</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;        fp-&gt;<a class="code" href="struct_f_i_l.html#ac40d4a51f8f940e6154d364c45935278">dir_sect</a> = dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a5ee19a26d1dfd79d52fbba59cc792da3">winsect</a>; <span class="comment">/* Pointer to the directory entry */</span></div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;        fp-&gt;<a class="code" href="struct_f_i_l.html#abc0a41dfbb69ffc78a01f5a357412995">dir_ptr</a> = <a class="code" href="tff_8c.html#addeee88e846cc637a785bcaf23b45b5e">dir</a>;</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;<span class="preprocessor">#if _FS_SHARE</span></div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;<span class="preprocessor"></span>        fp-&gt;lockid = inc_lock(&amp;dj, (mode &amp; ~<a class="code" href="tff_8h.html#a1f4f3530ff03abbd979b072536e72290">FA_READ</a>) ? 1 : 0);</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;        <span class="keywordflow">if</span> (!fp-&gt;lockid) res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;<span class="preprocessor"></span>    }</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;<span class="preprocessor">#else               </span><span class="comment">/* R/O configuration */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) { <span class="comment">/* Follow succeeded */</span></div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;        <span class="keywordflow">if</span> (!dir) { <span class="comment">/* Current dir itself */</span></div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;            res = <a class="code" href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;            <span class="keywordflow">if</span> (dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] &amp; AM_DIR) <span class="comment">/* It is a directory */</span></div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;            res = <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>;</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;        }</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;    }</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;<span class="preprocessor"></span>    <a class="code" href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a>();</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;    <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;        fp-&gt;<a class="code" href="struct_f_i_l.html#ae84669505a47c55d6246560a290a298d">flag</a> = mode; <span class="comment">/* File access mode */</span></div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;        fp-&gt;<a class="code" href="struct_f_i_l.html#ad5d52f3fde971d2a05ff777a6243c252">sclust</a> = <a class="code" href="ff_8c.html#a19cd426084600d6007eb6f976c81fbdf">LD_CLUST</a>(dir); <span class="comment">/* File start cluster */</span></div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;        fp-&gt;<a class="code" href="struct_f_i_l.html#a7582a0b3a658c0543f6cdc7585d84f7c">fsize</a> = <a class="code" href="pff_8h.html#a4690304ddc975516f7dc02575c96e34e">LD_DWORD</a>(dir+<a class="code" href="ff_8c.html#abfbfa613864a02a65f0bf70ead6672c7">DIR_FileSize</a>); <span class="comment">/* File size */</span></div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;        fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a> = 0; <span class="comment">/* File pointer */</span></div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;        fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a> = 0;</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;<span class="preprocessor">#if _USE_FASTSEEK</span></div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;<span class="preprocessor"></span>        fp-&gt;<a class="code" href="struct_f_i_l.html#a807e335a4d92639456ac4273cb0de4cb">cltbl</a> = 0; <span class="comment">/* Normal seek mode */</span></div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;<span class="preprocessor"></span>        fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a> = dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>;</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;        fp-&gt;<a class="code" href="struct_f_i_l.html#a588688f55d57bf8a7e8c1d2cf88a3c56">id</a> = dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a588688f55d57bf8a7e8c1d2cf88a3c56">id</a>; <span class="comment">/* Validate file object */</span></div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;    }</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;    <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, res);</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;}</div>
<div class="ttc" id="ff_8c_html_a966fe5792671b39db1ccf655a8c1af8d"><div class="ttname"><a href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a></div><div class="ttdeci">#define INIT_BUF(dobj)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00478">ff.c:478</a></div></div>
<div class="ttc" id="tff_8h_html_afba4546b131dea4b24727fa20a80e29f"><div class="ttname"><a href="tff_8h.html#afba4546b131dea4b24727fa20a80e29f">FA_CREATE_ALWAYS</a></div><div class="ttdeci">#define FA_CREATE_ALWAYS</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00213">tff.h:213</a></div></div>
<div class="ttc" id="struct_f_i_l_html_ae84669505a47c55d6246560a290a298d"><div class="ttname"><a href="struct_f_i_l.html#ae84669505a47c55d6246560a290a298d">FIL::flag</a></div><div class="ttdeci">byte flag</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00122">tff.h:122</a></div></div>
<div class="ttc" id="pff_8h_html_abf5aba973d95ac5843b80aa7379cdd66"><div class="ttname"><a href="pff_8h.html#abf5aba973d95ac5843b80aa7379cdd66">ST_DWORD</a></div><div class="ttdeci">#define ST_DWORD(ptr, val)</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00237">pff.h:237</a></div></div>
<div class="ttc" id="tff_8h_html_a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45"><div class="ttname"><a href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a></div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00154">tff.h:154</a></div></div>
<div class="ttc" id="struct_f_i_l_html_abc0a41dfbb69ffc78a01f5a357412995"><div class="ttname"><a href="struct_f_i_l.html#abc0a41dfbb69ffc78a01f5a357412995">FIL::dir_ptr</a></div><div class="ttdeci">byte * dir_ptr</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00132">tff.h:132</a></div></div>
<div class="ttc" id="tff_8h_html_a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d"><div class="ttname"><a href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a></div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00156">tff.h:156</a></div></div>
<div class="ttc" id="struct_d_i_r_html_ab9e26ba9262ce0f12d043d71dd4b2cf5"><div class="ttname"><a href="struct_d_i_r.html#ab9e26ba9262ce0f12d043d71dd4b2cf5">DIR::dir</a></div><div class="ttdeci">PF_BYTE * dir</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00149">ff.h:149</a></div></div>
<div class="ttc" id="tff_8h_html_a417bb1babd1785fd181a806b5613eba3"><div class="ttname"><a href="tff_8h.html#a417bb1babd1785fd181a806b5613eba3">FA_CREATE_NEW</a></div><div class="ttdeci">#define FA_CREATE_NEW</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00212">tff.h:212</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a7582a0b3a658c0543f6cdc7585d84f7c"><div class="ttname"><a href="struct_f_i_l.html#a7582a0b3a658c0543f6cdc7585d84f7c">FIL::fsize</a></div><div class="ttdeci">dword fsize</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00126">tff.h:126</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a472e3612956e3ffb3ab823c37ca33250"><div class="ttname"><a href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">FIL::fs</a></div><div class="ttdeci">FATFS * fs</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00124">tff.h:124</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_a5ee19a26d1dfd79d52fbba59cc792da3"><div class="ttname"><a href="struct_f_a_t_f_s.html#a5ee19a26d1dfd79d52fbba59cc792da3">FATFS::winsect</a></div><div class="ttdeci">dword winsect</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00085">tff.h:85</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a></div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00123">pff.h:123</a></div></div>
<div class="ttc" id="ff_8c_html_ad3233e40118ed66095f3c9545b788f8a"><div class="ttname"><a href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a></div><div class="ttdeci">#define DIR_Attr</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00431">ff.c:431</a></div></div>
<div class="ttc" id="tff_8h_html_afa366963220c89b882c0361794020c14"><div class="ttname"><a href="tff_8h.html#afa366963220c89b882c0361794020c14">FA_WRITE</a></div><div class="ttdeci">#define FA_WRITE</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00211">tff.h:211</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a272171f74215002aba31a89428f1d290"><div class="ttname"><a href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">FIL::dsect</a></div><div class="ttdeci">DWORD dsect</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00122">ff.h:122</a></div></div>
<div class="ttc" id="struct_d_i_r_html"><div class="ttname"><a href="struct_d_i_r.html">DIR</a></div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00109">tff.h:109</a></div></div>
<div class="ttc" id="ff_8c_html_a7e653d8ca0ae09faa49cd5b7335fea84"><div class="ttname"><a href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a></div><div class="ttdeci">#define LEAVE_FF(fs, res)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00130">ff.c:130</a></div></div>
<div class="ttc" id="pff_8h_html_a4690304ddc975516f7dc02575c96e34e"><div class="ttname"><a href="pff_8h.html#a4690304ddc975516f7dc02575c96e34e">LD_DWORD</a></div><div class="ttdeci">#define LD_DWORD(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00235">pff.h:235</a></div></div>
<div class="ttc" id="ff_8c_html_a08174fa72222a48a5c9e5de70c341af7"><div class="ttname"><a href="ff_8c.html#a08174fa72222a48a5c9e5de70c341af7">ST_CLUST</a></div><div class="ttdeci">#define ST_CLUST(dir, cl)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00150">ff.c:150</a></div></div>
<div class="ttc" id="ff_8h_html_a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76"><div class="ttname"><a href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a></div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00180">ff.h:180</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a807e335a4d92639456ac4273cb0de4cb"><div class="ttname"><a href="struct_f_i_l.html#a807e335a4d92639456ac4273cb0de4cb">FIL::cltbl</a></div><div class="ttdeci">DWORD * cltbl</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00128">ff.h:128</a></div></div>
<div class="ttc" id="p32_2include_2pinguino_2libraries_2sd_2integer_8h_html_aa1e36ce100a7ff1291e95b4515d42e65"><div class="ttname"><a href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a></div><div class="ttdeci">unsigned char PF_BYTE</div><div class="ttdef"><b>Definition:</b> <a href="p32_2include_2pinguino_2libraries_2sd_2integer_8h_source.html#l00008">integer.h:8</a></div></div>
<div class="ttc" id="p8_2pinguino_2libraries_2integer_8h_html_ad342ac907eb044443153a22f964bf0af"><div class="ttname"><a href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a></div><div class="ttdeci">unsigned long DWORD</div><div class="ttdef"><b>Definition:</b> <a href="p8_2pinguino_2libraries_2integer_8h_source.html#l00033">integer.h:33</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a></div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00120">pff.h:120</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44c"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a></div><div class="ttdeci">FRESULT</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00119">pff.h:119</a></div></div>
<div class="ttc" id="tff_8c_html_a90affc32512431e143844fa9721bf9d9"><div class="ttname"><a href="tff_8c.html#a90affc32512431e143844fa9721bf9d9">dj</a></div><div class="ttdeci">DIR dj</div><div class="ttdef"><b>Definition:</b> <a href="tff_8c_source.html#l00066">tff.c:66</a></div></div>
<div class="ttc" id="struct_f_i_l_html_ad5d52f3fde971d2a05ff777a6243c252"><div class="ttname"><a href="struct_f_i_l.html#ad5d52f3fde971d2a05ff777a6243c252">FIL::sclust</a></div><div class="ttdeci">DWORD sclust</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00120">ff.h:120</a></div></div>
<div class="ttc" id="tff_8h_html_a49d0171ecbd362cda5680a0d360db44ca0d8f024d256df76e84782b95018a2450"><div class="ttname"><a href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca0d8f024d256df76e84782b95018a2450">FR_EXIST</a></div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00157">tff.h:157</a></div></div>
<div class="ttc" id="ff_8c_html_a47fb1881ea71d860db9b8280564cb4d5"><div class="ttname"><a href="ff_8c.html#a47fb1881ea71d860db9b8280564cb4d5">DIR_CrtTime</a></div><div class="ttdeci">#define DIR_CrtTime</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00433">ff.c:433</a></div></div>
<div class="ttc" id="struct_f_i_l_html_ac40d4a51f8f940e6154d364c45935278"><div class="ttname"><a href="struct_f_i_l.html#ac40d4a51f8f940e6154d364c45935278">FIL::dir_sect</a></div><div class="ttdeci">dword dir_sect</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00131">tff.h:131</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_a588688f55d57bf8a7e8c1d2cf88a3c56"><div class="ttname"><a href="struct_f_a_t_f_s.html#a588688f55d57bf8a7e8c1d2cf88a3c56">FATFS::id</a></div><div class="ttdeci">word id</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00083">tff.h:83</a></div></div>
<div class="ttc" id="tff_8h_html_ac4b7d5223f84df91c306ffbff536fae4"><div class="ttname"><a href="tff_8h.html#ac4b7d5223f84df91c306ffbff536fae4">FA__WRITTEN</a></div><div class="ttdeci">#define FA__WRITTEN</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00215">tff.h:215</a></div></div>
<div class="ttc" id="ff_8c_html_aba6d6942b59f11cf285bdbfb7e38f1fa"><div class="ttname"><a href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a></div><div class="ttdeci">#define FREE_BUF()</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00479">ff.c:479</a></div></div>
<div class="ttc" id="ff_8h_html_a49d0171ecbd362cda5680a0d360db44ca50dd3c3c274ccebb2cfbddde9d065bb9"><div class="ttname"><a href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca50dd3c3c274ccebb2cfbddde9d065bb9">FR_TOO_MANY_OPEN_FILES</a></div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00196">ff.h:196</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a5afdaf3451d484cc97e07228b775ccf1"><div class="ttname"><a href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">FIL::fptr</a></div><div class="ttdeci">dword fptr</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00125">tff.h:125</a></div></div>
<div class="ttc" id="tff_8h_html_a1f4f3530ff03abbd979b072536e72290"><div class="ttname"><a href="tff_8h.html#a1f4f3530ff03abbd979b072536e72290">FA_READ</a></div><div class="ttdeci">#define FA_READ</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00208">tff.h:208</a></div></div>
<div class="ttc" id="struct_d_i_r_html_a472e3612956e3ffb3ab823c37ca33250"><div class="ttname"><a href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">DIR::fs</a></div><div class="ttdeci">FATFS * fs</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00112">tff.h:112</a></div></div>
<div class="ttc" id="pff_8h_html_add6d85d1e7a02b4f6188783ef91a5f1e"><div class="ttname"><a href="pff_8h.html#add6d85d1e7a02b4f6188783ef91a5f1e">AM_RDO</a></div><div class="ttdeci">#define AM_RDO</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00162">pff.h:162</a></div></div>
<div class="ttc" id="tff_8h_html_a17b01553029920ac0468912b4bcb16c7"><div class="ttname"><a href="tff_8h.html#a17b01553029920ac0468912b4bcb16c7">FA_OPEN_ALWAYS</a></div><div class="ttdeci">#define FA_OPEN_ALWAYS</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00214">tff.h:214</a></div></div>
<div class="ttc" id="tff_8h_html_a489f23a9be58cd896a5c45e45c6e6e6f"><div class="ttname"><a href="tff_8h.html#a489f23a9be58cd896a5c45e45c6e6e6f">get_fattime</a></div><div class="ttdeci">dword get_fattime(void)</div><div class="ttdef"><b>Definition:</b> <a href="p32_2include_2pinguino_2libraries_2sd_2diskio_8c_source.html#l00583">diskio.c:583</a></div></div>
<div class="ttc" id="tff_8c_html_addeee88e846cc637a785bcaf23b45b5e"><div class="ttname"><a href="tff_8c.html#addeee88e846cc637a785bcaf23b45b5e">dir</a></div><div class="ttdeci">byte * dir</div><div class="ttdef"><b>Definition:</b> <a href="tff_8c_source.html#l00068">tff.c:68</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_a34eeef694e75229e1608f07acba3ed1c"><div class="ttname"><a href="struct_f_a_t_f_s.html#a34eeef694e75229e1608f07acba3ed1c">FATFS::wflag</a></div><div class="ttdeci">PF_BYTE wflag</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00082">ff.h:82</a></div></div>
<div class="ttc" id="tff_8c_html_aab43d7bcfb87e7ef71138d651ce1bea1"><div class="ttname"><a href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a></div><div class="ttdeci">FRESULT res</div><div class="ttdef"><b>Definition:</b> <a href="tff_8c_source.html#l00065">tff.c:65</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_a07b2a137b54c6c95ffcee006c8906429"><div class="ttname"><a href="struct_f_a_t_f_s.html#a07b2a137b54c6c95ffcee006c8906429">FATFS::last_clust</a></div><div class="ttdeci">CLUST last_clust</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00092">tff.h:92</a></div></div>
<div class="ttc" id="ff_8c_html_a40aba328871d2be78bfdd74b390275db"><div class="ttname"><a href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a></div><div class="ttdeci">#define DEF_NAMEBUF</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00477">ff.c:477</a></div></div>
<div class="ttc" id="pff_8h_html_a3a9db44e978ed6c13b641e092d4cd7d3"><div class="ttname"><a href="pff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a></div><div class="ttdeci">#define AM_DIR</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00167">pff.h:167</a></div></div>
<div class="ttc" id="ff_8c_html_a19cd426084600d6007eb6f976c81fbdf"><div class="ttname"><a href="ff_8c.html#a19cd426084600d6007eb6f976c81fbdf">LD_CLUST</a></div><div class="ttdeci">#define LD_CLUST(dir)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00149">ff.c:149</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a588688f55d57bf8a7e8c1d2cf88a3c56"><div class="ttname"><a href="struct_f_i_l.html#a588688f55d57bf8a7e8c1d2cf88a3c56">FIL::id</a></div><div class="ttdeci">word id</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00121">tff.h:121</a></div></div>
<div class="ttc" id="ff_8c_html_abfbfa613864a02a65f0bf70ead6672c7"><div class="ttname"><a href="ff_8c.html#abfbfa613864a02a65f0bf70ead6672c7">DIR_FileSize</a></div><div class="ttdeci">#define DIR_FileSize</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00439">ff.c:439</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5a7b44d8858165d18ff5617d81244f35"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_opendir </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_d_i_r.html">DIR</a> *&#160;</td>
          <td class="paramname"><em>dj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l02890">2890</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>References <a class="el" href="pff_8h_source.html#l00167">AM_DIR</a>, <a class="el" href="tff_8h_source.html#l00114">DIR::clust</a>, <a class="el" href="ff_8c_source.html#l00764">clust2sect()</a>, <a class="el" href="ff_8c_source.html#l00477">DEF_NAMEBUF</a>, <a class="el" href="ff_8h_source.html#l00149">DIR::dir</a>, <a class="el" href="ff_8c_source.html#l00431">DIR_Attr</a>, <a class="el" href="pff_8h_source.html#l00217">DIR_FstClusHI</a>, <a class="el" href="pff_8h_source.html#l00220">DIR_FstClusLO</a>, <a class="el" href="pff_8h_source.html#l00123">FR_NO_FILE</a>, <a class="el" href="pff_8h_source.html#l00124">FR_NO_PATH</a>, <a class="el" href="pff_8h_source.html#l00120">FR_OK</a>, <a class="el" href="ff_8c_source.html#l00479">FREE_BUF</a>, <a class="el" href="tff_8h_source.html#l00112">DIR::fs</a>, <a class="el" href="tff_8h_source.html#l00083">FATFS::id</a>, <a class="el" href="tff_8h_source.html#l00110">DIR::id</a>, <a class="el" href="tff_8h_source.html#l00111">DIR::index</a>, <a class="el" href="ff_8c_source.html#l00478">INIT_BUF</a>, <a class="el" href="ff_8c_source.html#l00149">LD_CLUST</a>, <a class="el" href="pff_8h_source.html#l00234">LD_WORD</a>, <a class="el" href="ff_8c_source.html#l00130">LEAVE_FF</a>, <a class="el" href="tff_8c_source.html#l00065">res</a>, <a class="el" href="tff_8h_source.html#l00113">DIR::sclust</a>, and <a class="el" href="tff_8h_source.html#l00115">DIR::sect</a>.</p>
<div class="fragment"><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;  {</div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;    <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> <a class="code" href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a>;</div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;    <a class="code" href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a>;</div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;    res = chk_mounted(&amp;path, &amp;dj-&gt;<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, 0);</div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;    <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;        <a class="code" href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a>(*dj);</div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;        res = follow_path(dj, path); <span class="comment">/* Follow the path to the directory */</span></div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;        <a class="code" href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a>();</div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;        <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) { <span class="comment">/* Follow completed */</span></div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;            <span class="keywordflow">if</span> (dj-&gt;<a class="code" href="struct_d_i_r.html#ab9e26ba9262ce0f12d043d71dd4b2cf5">dir</a>) { <span class="comment">/* It is not the root dir */</span></div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;                <span class="keywordflow">if</span> (dj-&gt;<a class="code" href="struct_d_i_r.html#ab9e26ba9262ce0f12d043d71dd4b2cf5">dir</a>[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] &amp; <a class="code" href="pff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>) { <span class="comment">/* The object is a directory */</span></div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;                    dj-&gt;<a class="code" href="struct_d_i_r.html#aada1acd6ce100ead798e712b18c49547">sclust</a> = <a class="code" href="ff_8c.html#a19cd426084600d6007eb6f976c81fbdf">LD_CLUST</a>(dj-&gt;<a class="code" href="struct_d_i_r.html#ab9e26ba9262ce0f12d043d71dd4b2cf5">dir</a>);</div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;                } <span class="keywordflow">else</span> { <span class="comment">/* The object is not a directory */</span></div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;                    res = <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44cae4529c8cc8b59783d6efc9ba4f574532">FR_NO_PATH</a>;</div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;                }</div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;            }</div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;            <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;                dj-&gt;<a class="code" href="struct_d_i_r.html#a588688f55d57bf8a7e8c1d2cf88a3c56">id</a> = dj-&gt;<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a588688f55d57bf8a7e8c1d2cf88a3c56">id</a>;</div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;                res = dir_sdi(dj, 0); <span class="comment">/* Rewind dir */</span></div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;            }</div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;        }</div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;        <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>)</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;            res = <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44cae4529c8cc8b59783d6efc9ba4f574532">FR_NO_PATH</a>;</div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;    }</div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;    <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(dj-&gt;<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, res);</div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;}</div>
<div class="ttc" id="ff_8c_html_a966fe5792671b39db1ccf655a8c1af8d"><div class="ttname"><a href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a></div><div class="ttdeci">#define INIT_BUF(dobj)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00478">ff.c:478</a></div></div>
<div class="ttc" id="struct_d_i_r_html_ab9e26ba9262ce0f12d043d71dd4b2cf5"><div class="ttname"><a href="struct_d_i_r.html#ab9e26ba9262ce0f12d043d71dd4b2cf5">DIR::dir</a></div><div class="ttdeci">PF_BYTE * dir</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00149">ff.h:149</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a></div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00123">pff.h:123</a></div></div>
<div class="ttc" id="ff_8c_html_ad3233e40118ed66095f3c9545b788f8a"><div class="ttname"><a href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a></div><div class="ttdeci">#define DIR_Attr</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00431">ff.c:431</a></div></div>
<div class="ttc" id="struct_d_i_r_html_a588688f55d57bf8a7e8c1d2cf88a3c56"><div class="ttname"><a href="struct_d_i_r.html#a588688f55d57bf8a7e8c1d2cf88a3c56">DIR::id</a></div><div class="ttdeci">word id</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00110">tff.h:110</a></div></div>
<div class="ttc" id="ff_8c_html_a7e653d8ca0ae09faa49cd5b7335fea84"><div class="ttname"><a href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a></div><div class="ttdeci">#define LEAVE_FF(fs, res)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00130">ff.c:130</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a></div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00120">pff.h:120</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44c"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a></div><div class="ttdeci">FRESULT</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00119">pff.h:119</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_a588688f55d57bf8a7e8c1d2cf88a3c56"><div class="ttname"><a href="struct_f_a_t_f_s.html#a588688f55d57bf8a7e8c1d2cf88a3c56">FATFS::id</a></div><div class="ttdeci">word id</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00083">tff.h:83</a></div></div>
<div class="ttc" id="ff_8c_html_aba6d6942b59f11cf285bdbfb7e38f1fa"><div class="ttname"><a href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a></div><div class="ttdeci">#define FREE_BUF()</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00479">ff.c:479</a></div></div>
<div class="ttc" id="struct_d_i_r_html_a472e3612956e3ffb3ab823c37ca33250"><div class="ttname"><a href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">DIR::fs</a></div><div class="ttdeci">FATFS * fs</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00112">tff.h:112</a></div></div>
<div class="ttc" id="tff_8c_html_aab43d7bcfb87e7ef71138d651ce1bea1"><div class="ttname"><a href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a></div><div class="ttdeci">FRESULT res</div><div class="ttdef"><b>Definition:</b> <a href="tff_8c_source.html#l00065">tff.c:65</a></div></div>
<div class="ttc" id="ff_8c_html_a40aba328871d2be78bfdd74b390275db"><div class="ttname"><a href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a></div><div class="ttdeci">#define DEF_NAMEBUF</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00477">ff.c:477</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44cae4529c8cc8b59783d6efc9ba4f574532"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44cae4529c8cc8b59783d6efc9ba4f574532">FR_NO_PATH</a></div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00124">pff.h:124</a></div></div>
<div class="ttc" id="pff_8h_html_a3a9db44e978ed6c13b641e092d4cd7d3"><div class="ttname"><a href="pff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a></div><div class="ttdeci">#define AM_DIR</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00167">pff.h:167</a></div></div>
<div class="ttc" id="struct_d_i_r_html_aada1acd6ce100ead798e712b18c49547"><div class="ttname"><a href="struct_d_i_r.html#aada1acd6ce100ead798e712b18c49547">DIR::sclust</a></div><div class="ttdeci">CLUST sclust</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00113">tff.h:113</a></div></div>
<div class="ttc" id="ff_8c_html_a19cd426084600d6007eb6f976c81fbdf"><div class="ttname"><a href="ff_8c.html#a19cd426084600d6007eb6f976c81fbdf">LD_CLUST</a></div><div class="ttdeci">#define LD_CLUST(dir)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00149">ff.c:149</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac4c3dcb6869ca252888eebabe39727b3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="p8_2pinguino_2libraries_2integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>&#160;</td>
          <td class="paramname"><em>btr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="p8_2pinguino_2libraries_2integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> *&#160;</td>
          <td class="paramname"><em>br</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l02301">2301</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>References <a class="el" href="ff_8c_source.html#l00133">ABORT</a>, <a class="el" href="ff_8h_source.html#l00134">FIL::buf</a>, <a class="el" href="ff_8h_source.html#l00128">FIL::cltbl</a>, <a class="el" href="ff_8h_source.html#l00121">FIL::clust</a>, <a class="el" href="ff_8c_source.html#l00764">clust2sect()</a>, <a class="el" href="tff_8h_source.html#l00123">FIL::csect</a>, <a class="el" href="tff_8h_source.html#l00101">FATFS::csize</a>, <a class="el" href="tff_8h_source.html#l00128">FIL::curr_clust</a>, <a class="el" href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#a77ba19c0c97a900fac95999446e32308">disk_read()</a>, <a class="el" href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#a7ffe0ccc946550a260d00871c6b636e7">disk_write()</a>, <a class="el" href="ff_8h_source.html#l00079">FATFS::drv</a>, <a class="el" href="ff_8h_source.html#l00122">FIL::dsect</a>, <a class="el" href="ff_8h_source.html#l00290">FA__DIRTY</a>, <a class="el" href="tff_8h_source.html#l00217">FA__ERROR</a>, <a class="el" href="tff_8h_source.html#l00208">FA_READ</a>, <a class="el" href="tff_8h_source.html#l00122">FIL::flag</a>, <a class="el" href="tff_8h_source.html#l00125">FIL::fptr</a>, <a class="el" href="tff_8h_source.html#l00156">FR_DENIED</a>, <a class="el" href="pff_8h_source.html#l00121">FR_DISK_ERR</a>, <a class="el" href="ff_8h_source.html#l00180">FR_INT_ERR</a>, <a class="el" href="pff_8h_source.html#l00120">FR_OK</a>, <a class="el" href="tff_8h_source.html#l00158">FR_RW_ERROR</a>, <a class="el" href="tff_8h_source.html#l00124">FIL::fs</a>, <a class="el" href="tff_8h_source.html#l00126">FIL::fsize</a>, <a class="el" href="ff_8c_source.html#l00778">get_fat()</a>, <a class="el" href="tff_8h_source.html#l00121">FIL::id</a>, <a class="el" href="ff_8c_source.html#l00130">LEAVE_FF</a>, <a class="el" href="tff_8h_source.html#l00090">FATFS::max_clust</a>, <a class="el" href="tff_8h_source.html#l00127">FIL::org_clust</a>, <a class="el" href="tff_8c_source.html#l00065">res</a>, <a class="el" href="p8_2pinguino_2libraries_2sd_2diskio_8h_source.html#l00015">RES_OK</a>, <a class="el" href="ff_8h_source.html#l00120">FIL::sclust</a>, <a class="el" href="ff_8c_source.html#l00118">SS</a>, <a class="el" href="ff_8h_source.html#l00082">FATFS::wflag</a>, <a class="el" href="tff_8h_source.html#l00104">FATFS::win</a>, and <a class="el" href="tff_8h_source.html#l00085">FATFS::winsect</a>.</p>
<div class="fragment"><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;  {</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;    <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> <a class="code" href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a>;</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;    <a class="code" href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> clst, sect, remain;</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;    <a class="code" href="p8_2pinguino_2libraries_2integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> rcnt, cc;</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;    <a class="code" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a> csect, *rbuff = buff;</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;    *br = 0; <span class="comment">/* Initialize byte counter */</span></div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;    res = validate(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a588688f55d57bf8a7e8c1d2cf88a3c56">id</a>); <span class="comment">/* Check validity */</span></div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;    <span class="keywordflow">if</span> (res != <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>)</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, res);</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;    <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#ae84669505a47c55d6246560a290a298d">flag</a> &amp; <a class="code" href="tff_8h.html#ad3b47fe8126573b17752a9a242b76b9a">FA__ERROR</a>) <span class="comment">/* Aborted file? */</span></div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;    <span class="keywordflow">if</span> (!(fp-&gt;<a class="code" href="struct_f_i_l.html#ae84669505a47c55d6246560a290a298d">flag</a> &amp; <a class="code" href="tff_8h.html#a1f4f3530ff03abbd979b072536e72290">FA_READ</a>)) <span class="comment">/* Check access mode */</span></div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>);</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;    remain = fp-&gt;<a class="code" href="struct_f_i_l.html#a7582a0b3a658c0543f6cdc7585d84f7c">fsize</a> - fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a>;</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;    <span class="keywordflow">if</span> (btr &gt; remain)</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;        btr = (<a class="code" href="p8_2pinguino_2libraries_2integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>) remain; <span class="comment">/* Truncate btr by remaining bytes */</span></div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;    <span class="keywordflow">for</span> (; btr; <span class="comment">/* Repeat until all data read */</span></div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;    rbuff += rcnt, fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a> += rcnt, *br += rcnt, btr -= rcnt) {</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;        <span class="keywordflow">if</span> ((fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a> % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>)) == 0) { <span class="comment">/* On the sector boundary? */</span></div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;            csect = (<a class="code" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a>) (fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a> / <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>) &amp; (fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#af8143a50ac7be72544022dd46a7013da">csize</a> - 1)); <span class="comment">/* Sector offset in the cluster */</span></div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;            <span class="keywordflow">if</span> (!csect) { <span class="comment">/* On the cluster boundary? */</span></div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;                <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a> == 0) { <span class="comment">/* On the top of the file? */</span></div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;                    clst = fp-&gt;<a class="code" href="struct_f_i_l.html#ad5d52f3fde971d2a05ff777a6243c252">sclust</a>; <span class="comment">/* Follow from the origin */</span></div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;                } <span class="keywordflow">else</span> { <span class="comment">/* Middle or end of the file */</span></div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;<span class="preprocessor">#if _USE_FASTSEEK</span></div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;<span class="preprocessor"></span>                    <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#a807e335a4d92639456ac4273cb0de4cb">cltbl</a>)</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;                        clst = clmt_clust(fp, fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a>); <span class="comment">/* Get cluster# from the CLMT */</span></div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;<span class="preprocessor"></span>                        clst = <a class="code" href="ff_8c.html#a65611adf1626e5e08da77cd33a98dd8b">get_fat</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#ac134c1b4645be670eb5207032e714616">clust</a>); <span class="comment">/* Follow cluster chain on the FAT */</span></div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;                }</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;                <span class="keywordflow">if</span> (clst &lt; 2)</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;                    <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;                <span class="keywordflow">if</span> (clst == 0xFFFFFFFF)</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;                    <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;                fp-&gt;<a class="code" href="struct_f_i_l.html#ac134c1b4645be670eb5207032e714616">clust</a> = clst; <span class="comment">/* Update current cluster */</span></div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;            }</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;            sect = <a class="code" href="ff_8c.html#a7519abb60fe91f6aa1d17f64fbae123a">clust2sect</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#ac134c1b4645be670eb5207032e714616">clust</a>); <span class="comment">/* Get current sector */</span></div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;            <span class="keywordflow">if</span> (!sect)</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;                <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;            sect += csect;</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;            cc = btr / <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>); <span class="comment">/* When remaining bytes &gt;= sector size, */</span></div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;            <span class="keywordflow">if</span> (cc) { <span class="comment">/* Read maximum contiguous sectors directly */</span></div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;                <span class="keywordflow">if</span> (csect + cc &gt; fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#af8143a50ac7be72544022dd46a7013da">csize</a>) <span class="comment">/* Clip at cluster boundary */</span></div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;                    cc = fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#af8143a50ac7be72544022dd46a7013da">csize</a> - csect;</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#a77ba19c0c97a900fac95999446e32308">disk_read</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#aabcebc0763f1acbd8928158570150c9f">drv</a>, rbuff, sect, (<a class="code" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a>) cc) != <a class="code" href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>)</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;                    <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;<span class="preprocessor">#if !_FS_READONLY &amp;&amp; _FS_MINIMIZE &lt;= 2          </span><span class="comment">/* Replace one of the read sectors with cached data if it contains a dirty sector */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#if _FS_TINY</span></div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;<span class="preprocessor"></span>                <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a34eeef694e75229e1608f07acba3ed1c">wflag</a> &amp;&amp; fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a5ee19a26d1dfd79d52fbba59cc792da3">winsect</a> - sect &lt; cc)</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;                mem_cpy(rbuff + ((fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a5ee19a26d1dfd79d52fbba59cc792da3">winsect</a> - sect) * <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>)), fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a54541860d8273ee2709def80ccc3e271">win</a>, <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>));</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;<span class="preprocessor"></span>                <span class="keywordflow">if</span> ((fp-&gt;<a class="code" href="struct_f_i_l.html#ae84669505a47c55d6246560a290a298d">flag</a> &amp; <a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>) &amp;&amp; fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a> - sect &lt; cc)</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;                    mem_cpy(rbuff + ((fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a> - sect) * <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>)), fp-&gt;<a class="code" href="struct_f_i_l.html#a8b83239f9e2ae594c0cbc75d23ddff89">buf</a>,</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;                            <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>));</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;<span class="preprocessor"></span>                rcnt = <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>) * cc; <span class="comment">/* Number of bytes transferred */</span></div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;            }</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;<span class="preprocessor">#if !_FS_TINY</span></div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;<span class="preprocessor"></span>            <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a> != sect) { <span class="comment">/* Load data sector if not in cache */</span></div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;<span class="preprocessor">#if !_FS_READONLY</span></div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;<span class="preprocessor"></span>                <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#ae84669505a47c55d6246560a290a298d">flag</a> &amp; <a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>) { <span class="comment">/* Write-back dirty sector cache */</span></div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#a7ffe0ccc946550a260d00871c6b636e7">disk_write</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#aabcebc0763f1acbd8928158570150c9f">drv</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a8b83239f9e2ae594c0cbc75d23ddff89">buf</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a>, 1)</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;                            != <a class="code" href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>)</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;                        <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;                    fp-&gt;<a class="code" href="struct_f_i_l.html#ae84669505a47c55d6246560a290a298d">flag</a> &amp;= ~<a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>;</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;                }</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;<span class="preprocessor"></span>                <span class="keywordflow">if</span> (<a class="code" href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#a77ba19c0c97a900fac95999446e32308">disk_read</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#aabcebc0763f1acbd8928158570150c9f">drv</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a8b83239f9e2ae594c0cbc75d23ddff89">buf</a>, sect, 1) != <a class="code" href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>) <span class="comment">/* Fill sector cache */</span></div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;                    <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;            }</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;<span class="preprocessor"></span>            fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a> = sect;</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;        }</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;        rcnt = <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>) - (fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a> % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>)); <span class="comment">/* Get partial sector data from sector buffer */</span></div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;        <span class="keywordflow">if</span> (rcnt &gt; btr)</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;            rcnt = btr;</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;<span class="preprocessor">#if _FS_TINY</span></div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;<span class="preprocessor"></span>        <span class="keywordflow">if</span> (move_window(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a>)) <span class="comment">/* Move sector window */</span></div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;        <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;        mem_cpy(rbuff, &amp;fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a54541860d8273ee2709def80ccc3e271">win</a>[fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a> % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>)], rcnt); <span class="comment">/* Pick partial sector */</span></div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;<span class="preprocessor"></span>        mem_cpy(rbuff, &amp;fp-&gt;<a class="code" href="struct_f_i_l.html#a8b83239f9e2ae594c0cbc75d23ddff89">buf</a>[fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a> % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>)], rcnt); <span class="comment">/* Pick partial sector */</span></div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;<span class="preprocessor"></span>    }</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;    <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>);</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;}</div>
<div class="ttc" id="struct_f_i_l_html_ae84669505a47c55d6246560a290a298d"><div class="ttname"><a href="struct_f_i_l.html#ae84669505a47c55d6246560a290a298d">FIL::flag</a></div><div class="ttdeci">byte flag</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00122">tff.h:122</a></div></div>
<div class="ttc" id="tff_8h_html_a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d"><div class="ttname"><a href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a></div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00156">tff.h:156</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a7582a0b3a658c0543f6cdc7585d84f7c"><div class="ttname"><a href="struct_f_i_l.html#a7582a0b3a658c0543f6cdc7585d84f7c">FIL::fsize</a></div><div class="ttdeci">dword fsize</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00126">tff.h:126</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a472e3612956e3ffb3ab823c37ca33250"><div class="ttname"><a href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">FIL::fs</a></div><div class="ttdeci">FATFS * fs</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00124">tff.h:124</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_a5ee19a26d1dfd79d52fbba59cc792da3"><div class="ttname"><a href="struct_f_a_t_f_s.html#a5ee19a26d1dfd79d52fbba59cc792da3">FATFS::winsect</a></div><div class="ttdeci">dword winsect</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00085">tff.h:85</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a></div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00121">pff.h:121</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a272171f74215002aba31a89428f1d290"><div class="ttname"><a href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">FIL::dsect</a></div><div class="ttdeci">DWORD dsect</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00122">ff.h:122</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_aabcebc0763f1acbd8928158570150c9f"><div class="ttname"><a href="struct_f_a_t_f_s.html#aabcebc0763f1acbd8928158570150c9f">FATFS::drv</a></div><div class="ttdeci">PF_BYTE drv</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00079">ff.h:79</a></div></div>
<div class="ttc" id="ff_8c_html_a41e4c46636679236568cf50b5535847f"><div class="ttname"><a href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a></div><div class="ttdeci">#define ABORT(fs, res)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00133">ff.c:133</a></div></div>
<div class="ttc" id="ff_8c_html_a7e653d8ca0ae09faa49cd5b7335fea84"><div class="ttname"><a href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a></div><div class="ttdeci">#define LEAVE_FF(fs, res)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00130">ff.c:130</a></div></div>
<div class="ttc" id="ff_8c_html_a7519abb60fe91f6aa1d17f64fbae123a"><div class="ttname"><a href="ff_8c.html#a7519abb60fe91f6aa1d17f64fbae123a">clust2sect</a></div><div class="ttdeci">DWORD clust2sect(FATFS *fs, DWORD clst)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00764">ff.c:764</a></div></div>
<div class="ttc" id="tff_8h_html_ad3b47fe8126573b17752a9a242b76b9a"><div class="ttname"><a href="tff_8h.html#ad3b47fe8126573b17752a9a242b76b9a">FA__ERROR</a></div><div class="ttdeci">#define FA__ERROR</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00217">tff.h:217</a></div></div>
<div class="ttc" id="struct_f_i_l_html_ac134c1b4645be670eb5207032e714616"><div class="ttname"><a href="struct_f_i_l.html#ac134c1b4645be670eb5207032e714616">FIL::clust</a></div><div class="ttdeci">DWORD clust</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00121">ff.h:121</a></div></div>
<div class="ttc" id="ff_8h_html_a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76"><div class="ttname"><a href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a></div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00180">ff.h:180</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a807e335a4d92639456ac4273cb0de4cb"><div class="ttname"><a href="struct_f_i_l.html#a807e335a4d92639456ac4273cb0de4cb">FIL::cltbl</a></div><div class="ttdeci">DWORD * cltbl</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00128">ff.h:128</a></div></div>
<div class="ttc" id="p32_2include_2pinguino_2libraries_2sd_2integer_8h_html_aa1e36ce100a7ff1291e95b4515d42e65"><div class="ttname"><a href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a></div><div class="ttdeci">unsigned char PF_BYTE</div><div class="ttdef"><b>Definition:</b> <a href="p32_2include_2pinguino_2libraries_2sd_2integer_8h_source.html#l00008">integer.h:8</a></div></div>
<div class="ttc" id="p8_2pinguino_2libraries_2sd_2diskio_8h_html_a7ffe0ccc946550a260d00871c6b636e7"><div class="ttname"><a href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#a7ffe0ccc946550a260d00871c6b636e7">disk_write</a></div><div class="ttdeci">DRESULT disk_write(const u8 *, u32, u8)</div></div>
<div class="ttc" id="p8_2pinguino_2libraries_2integer_8h_html_ad342ac907eb044443153a22f964bf0af"><div class="ttname"><a href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a></div><div class="ttdeci">unsigned long DWORD</div><div class="ttdef"><b>Definition:</b> <a href="p8_2pinguino_2libraries_2integer_8h_source.html#l00033">integer.h:33</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a></div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00120">pff.h:120</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44c"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a></div><div class="ttdeci">FRESULT</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00119">pff.h:119</a></div></div>
<div class="ttc" id="struct_f_i_l_html_ad5d52f3fde971d2a05ff777a6243c252"><div class="ttname"><a href="struct_f_i_l.html#ad5d52f3fde971d2a05ff777a6243c252">FIL::sclust</a></div><div class="ttdeci">DWORD sclust</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00120">ff.h:120</a></div></div>
<div class="ttc" id="ff_8c_html_a65611adf1626e5e08da77cd33a98dd8b"><div class="ttname"><a href="ff_8c.html#a65611adf1626e5e08da77cd33a98dd8b">get_fat</a></div><div class="ttdeci">DWORD get_fat(FATFS *fs, DWORD clst)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00778">ff.c:778</a></div></div>
<div class="ttc" id="ff_8h_html_a5b2962e3616a1e9eb709d95f4c75c67c"><div class="ttname"><a href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a></div><div class="ttdeci">#define FA__DIRTY</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00290">ff.h:290</a></div></div>
<div class="ttc" id="p8_2pinguino_2libraries_2sd_2diskio_8h_html_aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737"><div class="ttname"><a href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a></div><div class="ttdef"><b>Definition:</b> <a href="p8_2pinguino_2libraries_2sd_2diskio_8h_source.html#l00015">diskio.h:15</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a5afdaf3451d484cc97e07228b775ccf1"><div class="ttname"><a href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">FIL::fptr</a></div><div class="ttdeci">dword fptr</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00125">tff.h:125</a></div></div>
<div class="ttc" id="tff_8h_html_a1f4f3530ff03abbd979b072536e72290"><div class="ttname"><a href="tff_8h.html#a1f4f3530ff03abbd979b072536e72290">FA_READ</a></div><div class="ttdeci">#define FA_READ</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00208">tff.h:208</a></div></div>
<div class="ttc" id="p8_2pinguino_2libraries_2integer_8h_html_a36cb3b01d81ffd844bbbfb54003e06ec"><div class="ttname"><a href="p8_2pinguino_2libraries_2integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a></div><div class="ttdeci">unsigned int UINT</div><div class="ttdef"><b>Definition:</b> <a href="p8_2pinguino_2libraries_2integer_8h_source.html#l00017">integer.h:17</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_af8143a50ac7be72544022dd46a7013da"><div class="ttname"><a href="struct_f_a_t_f_s.html#af8143a50ac7be72544022dd46a7013da">FATFS::csize</a></div><div class="ttdeci">byte csize</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00101">tff.h:101</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_a34eeef694e75229e1608f07acba3ed1c"><div class="ttname"><a href="struct_f_a_t_f_s.html#a34eeef694e75229e1608f07acba3ed1c">FATFS::wflag</a></div><div class="ttdeci">PF_BYTE wflag</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00082">ff.h:82</a></div></div>
<div class="ttc" id="tff_8c_html_aab43d7bcfb87e7ef71138d651ce1bea1"><div class="ttname"><a href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a></div><div class="ttdeci">FRESULT res</div><div class="ttdef"><b>Definition:</b> <a href="tff_8c_source.html#l00065">tff.c:65</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a8b83239f9e2ae594c0cbc75d23ddff89"><div class="ttname"><a href="struct_f_i_l.html#a8b83239f9e2ae594c0cbc75d23ddff89">FIL::buf</a></div><div class="ttdeci">PF_BYTE buf[_MAX_SS]</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00134">ff.h:134</a></div></div>
<div class="ttc" id="p8_2pinguino_2libraries_2sd_2diskio_8h_html_a77ba19c0c97a900fac95999446e32308"><div class="ttname"><a href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#a77ba19c0c97a900fac95999446e32308">disk_read</a></div><div class="ttdeci">DRESULT disk_read(u8 *, u32, u8)</div></div>
<div class="ttc" id="ff_8c_html_a42b5140fc5e09a53c8f4cba66dc0e6c1"><div class="ttname"><a href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a></div><div class="ttdeci">#define SS(fs)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00118">ff.c:118</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_a54541860d8273ee2709def80ccc3e271"><div class="ttname"><a href="struct_f_a_t_f_s.html#a54541860d8273ee2709def80ccc3e271">FATFS::win</a></div><div class="ttdeci">byte win[512]</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00104">tff.h:104</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a588688f55d57bf8a7e8c1d2cf88a3c56"><div class="ttname"><a href="struct_f_i_l.html#a588688f55d57bf8a7e8c1d2cf88a3c56">FIL::id</a></div><div class="ttdeci">word id</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00121">tff.h:121</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a329a4cbc309719043e5066031fc844c6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_readdir </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_d_i_r.html">DIR</a> *&#160;</td>
          <td class="paramname"><em>dj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_f_i_l_i_n_f_o.html">FILINFO</a> *&#160;</td>
          <td class="paramname"><em>fno</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l02925">2925</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>References <a class="el" href="p8_2pinguino_2libraries_2_p_c_d8544_8c_source.html#l00234">c</a>, <a class="el" href="ff_8c_source.html#l00477">DEF_NAMEBUF</a>, <a class="el" href="pff_8h_source.html#l00213">DIR_Attr</a>, <a class="el" href="pff_8h_source.html#l00212">DIR_Name</a>, <a class="el" href="tff_8h_source.html#l00143">FILINFO::fname</a>, <a class="el" href="pff_8h_source.html#l00123">FR_NO_FILE</a>, <a class="el" href="pff_8h_source.html#l00120">FR_OK</a>, <a class="el" href="tff_8h_source.html#l00158">FR_RW_ERROR</a>, <a class="el" href="ff_8c_source.html#l00479">FREE_BUF</a>, <a class="el" href="tff_8h_source.html#l00112">DIR::fs</a>, <a class="el" href="tff_8h_source.html#l00110">DIR::id</a>, <a class="el" href="p8_2pinguino_2libraries_2_p_c_d8544_8c_source.html#l00276">if()</a>, <a class="el" href="tff_8h_source.html#l00111">DIR::index</a>, <a class="el" href="ff_8c_source.html#l00478">INIT_BUF</a>, <a class="el" href="ff_8c_source.html#l00130">LEAVE_FF</a>, <a class="el" href="tff_8c_source.html#l00065">res</a>, <a class="el" href="tff_8h_source.html#l00115">DIR::sect</a>, and <a class="el" href="tff_8h_source.html#l00104">FATFS::win</a>.</p>
<div class="fragment"><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;  {</div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;    <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> <a class="code" href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a>;</div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;    <a class="code" href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a>;</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;</div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;    res = validate(dj-&gt;<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, dj-&gt;<a class="code" href="struct_d_i_r.html#a588688f55d57bf8a7e8c1d2cf88a3c56">id</a>); <span class="comment">/* Check validity of the object */</span></div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;    <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;        <span class="keywordflow">if</span> (!fno) {</div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;            res = dir_sdi(dj, 0); <span class="comment">/* Rewind the directory object */</span></div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;            <a class="code" href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a>(*dj);</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;            res = dir_read(dj); <span class="comment">/* Read an directory item */</span></div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;            <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>) { <span class="comment">/* Reached end of dir */</span></div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;                dj-&gt;<a class="code" href="struct_d_i_r.html#aa7c560f325cb4d59f40dc8cf731b6e22">sect</a> = 0;</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;                res = <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>;</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;            }</div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;            <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) { <span class="comment">/* A valid entry is found */</span></div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;                get_fileinfo(dj, fno); <span class="comment">/* Get the object information */</span></div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;                res = dir_next(dj, 0); <span class="comment">/* Increment index for next */</span></div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;                <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>) {</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;                    dj-&gt;<a class="code" href="struct_d_i_r.html#aa7c560f325cb4d59f40dc8cf731b6e22">sect</a> = 0;</div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;                    res = <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>;</div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;                }</div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;            } <a class="code" href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a>();</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;        }</div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;    }</div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;    <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(dj-&gt;<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, res);</div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;}</div>
<div class="ttc" id="ff_8c_html_a966fe5792671b39db1ccf655a8c1af8d"><div class="ttname"><a href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a></div><div class="ttdeci">#define INIT_BUF(dobj)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00478">ff.c:478</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a></div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00123">pff.h:123</a></div></div>
<div class="ttc" id="struct_d_i_r_html_a588688f55d57bf8a7e8c1d2cf88a3c56"><div class="ttname"><a href="struct_d_i_r.html#a588688f55d57bf8a7e8c1d2cf88a3c56">DIR::id</a></div><div class="ttdeci">word id</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00110">tff.h:110</a></div></div>
<div class="ttc" id="ff_8c_html_a7e653d8ca0ae09faa49cd5b7335fea84"><div class="ttname"><a href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a></div><div class="ttdeci">#define LEAVE_FF(fs, res)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00130">ff.c:130</a></div></div>
<div class="ttc" id="struct_d_i_r_html_aa7c560f325cb4d59f40dc8cf731b6e22"><div class="ttname"><a href="struct_d_i_r.html#aa7c560f325cb4d59f40dc8cf731b6e22">DIR::sect</a></div><div class="ttdeci">dword sect</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00115">tff.h:115</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a></div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00120">pff.h:120</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44c"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a></div><div class="ttdeci">FRESULT</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00119">pff.h:119</a></div></div>
<div class="ttc" id="ff_8c_html_aba6d6942b59f11cf285bdbfb7e38f1fa"><div class="ttname"><a href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a></div><div class="ttdeci">#define FREE_BUF()</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00479">ff.c:479</a></div></div>
<div class="ttc" id="struct_d_i_r_html_a472e3612956e3ffb3ab823c37ca33250"><div class="ttname"><a href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">DIR::fs</a></div><div class="ttdeci">FATFS * fs</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00112">tff.h:112</a></div></div>
<div class="ttc" id="tff_8c_html_aab43d7bcfb87e7ef71138d651ce1bea1"><div class="ttname"><a href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a></div><div class="ttdeci">FRESULT res</div><div class="ttdef"><b>Definition:</b> <a href="tff_8c_source.html#l00065">tff.c:65</a></div></div>
<div class="ttc" id="ff_8c_html_a40aba328871d2be78bfdd74b390275db"><div class="ttname"><a href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a></div><div class="ttdeci">#define DEF_NAMEBUF</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00477">ff.c:477</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa775b9b024acfeb3a66523cab497d142"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_rename </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path_old</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path_new</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l03316">3316</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>References <a class="el" href="ffconf_8h_source.html#l00113">_FS_RPATH</a>, <a class="el" href="pff_8h_source.html#l00168">AM_ARC</a>, <a class="el" href="pff_8h_source.html#l00167">AM_DIR</a>, <a class="el" href="ff_8c_source.html#l00764">clust2sect()</a>, <a class="el" href="ff_8c_source.html#l00477">DEF_NAMEBUF</a>, <a class="el" href="tff_8c_source.html#l00068">dir</a>, <a class="el" href="ff_8h_source.html#l00149">DIR::dir</a>, <a class="el" href="ff_8c_source.html#l00431">DIR_Attr</a>, <a class="el" href="pff_8h_source.html#l00212">DIR_Name</a>, <a class="el" href="pff_8h_source.html#l00214">DIR_NTres</a>, <a class="el" href="tff_8h_source.html#l00087">FATFS::dirbase</a>, <a class="el" href="ff_8h_source.html#l00150">DIR::fn</a>, <a class="el" href="tff_8h_source.html#l00157">FR_EXIST</a>, <a class="el" href="ff_8h_source.html#l00180">FR_INT_ERR</a>, <a class="el" href="tff_8h_source.html#l00154">FR_INVALID_NAME</a>, <a class="el" href="pff_8h_source.html#l00123">FR_NO_FILE</a>, <a class="el" href="pff_8h_source.html#l00120">FR_OK</a>, <a class="el" href="tff_8h_source.html#l00158">FR_RW_ERROR</a>, <a class="el" href="ff_8c_source.html#l00479">FREE_BUF</a>, <a class="el" href="tff_8h_source.html#l00112">DIR::fs</a>, <a class="el" href="pff_8h_source.html#l00157">FS_FAT32</a>, <a class="el" href="tff_8h_source.html#l00100">FATFS::fs_type</a>, <a class="el" href="ff_8c_source.html#l00478">INIT_BUF</a>, <a class="el" href="ff_8c_source.html#l00149">LD_CLUST</a>, <a class="el" href="ff_8c_source.html#l00130">LEAVE_FF</a>, <a class="el" href="ff_8c_source.html#l00375">NS</a>, <a class="el" href="tff_8c_source.html#l00065">res</a>, <a class="el" href="tff_8h_source.html#l00113">DIR::sclust</a>, <a class="el" href="ff_8c_source.html#l00150">ST_CLUST</a>, <a class="el" href="ff_8c_source.html#l00445">SZ_DIR</a>, <a class="el" href="ff_8h_source.html#l00082">FATFS::wflag</a>, <a class="el" href="tff_8h_source.html#l00104">FATFS::win</a>, <a class="el" href="tff_8h_source.html#l00103">FATFS::winflag</a>, and <a class="el" href="tff_8h_source.html#l00085">FATFS::winsect</a>.</p>
<div class="fragment"><div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;  {</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;    <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> <a class="code" href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a>;</div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;    <a class="code" href="struct_d_i_r.html">DIR</a> djo, djn;</div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;    <a class="code" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a> buf[21], *<a class="code" href="tff_8c.html#addeee88e846cc637a785bcaf23b45b5e">dir</a>;</div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;    <a class="code" href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> dw;</div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;    <a class="code" href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a>;</div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;</div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;    res = chk_mounted(&amp;path_old, &amp;djo.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, 1);</div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;    <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;        djn.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a> = djo.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>;</div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;        <a class="code" href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a>(djo);</div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;        res = follow_path(&amp;djo, path_old); <span class="comment">/* Check old object */</span></div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ffconf_8h.html#a52faf11025401372f71e9d81905b7af4">_FS_RPATH</a> &amp;&amp; res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> &amp;&amp; (djo.<a class="code" href="struct_d_i_r.html#af5245f40680a50c52ce1028bbe62d9f9">fn</a>[<a class="code" href="ff_8c.html#a06c201f90533d5b49cd039c960327968">NS</a>] &amp; <a class="code" href="ff_8c.html#a2db528782a021797b34bdc6e9e9de1c3">NS_DOT</a>))</div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;            res = <a class="code" href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;</div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;<span class="preprocessor">#if _FS_SHARE</span></div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;<span class="preprocessor"></span>        <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) res = chk_lock(&amp;djo, 2);</div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;<span class="preprocessor"></span>        <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) { <span class="comment">/* Old object is found */</span></div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;            <span class="keywordflow">if</span> (!djo.<a class="code" href="struct_d_i_r.html#ab9e26ba9262ce0f12d043d71dd4b2cf5">dir</a>) { <span class="comment">/* Is root dir? */</span></div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;                res = <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>;</div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;                mem_cpy(buf, djo.<a class="code" href="struct_d_i_r.html#ab9e26ba9262ce0f12d043d71dd4b2cf5">dir</a> + <a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>, 21); <span class="comment">/* Save the object information except for name */</span></div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;                mem_cpy(&amp;djn, &amp;djo, <span class="keyword">sizeof</span>(<a class="code" href="struct_d_i_r.html">DIR</a>)); <span class="comment">/* Check new object */</span></div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;                res = follow_path(&amp;djn, path_new);</div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;                <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>)</div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;                    res = <a class="code" href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca0d8f024d256df76e84782b95018a2450">FR_EXIST</a>; <span class="comment">/* The new object name is already existing */</span></div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;                <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>) { <span class="comment">/* Is it a valid path and no name collision? */</span></div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;                    <span class="comment">/* Start critical section that any interruption or error can cause cross-link */</span></div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;                    res = dir_register(&amp;djn); <span class="comment">/* Register the new entry */</span></div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;                    <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;                        dir = djn.<a class="code" href="struct_d_i_r.html#ab9e26ba9262ce0f12d043d71dd4b2cf5">dir</a>; <span class="comment">/* Copy object information except for name */</span></div>
<div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;                        mem_cpy(dir + 13, buf + 2, 19);</div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;                        dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] = buf[0] | <a class="code" href="pff_8h.html#ae8174d00798e34e7c9e95898cb9e1a09">AM_ARC</a>;</div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;                        djo.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a34eeef694e75229e1608f07acba3ed1c">wflag</a> = 1;</div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;                        <span class="keywordflow">if</span> (djo.<a class="code" href="struct_d_i_r.html#aada1acd6ce100ead798e712b18c49547">sclust</a> != djn.<a class="code" href="struct_d_i_r.html#aada1acd6ce100ead798e712b18c49547">sclust</a></div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;                                &amp;&amp; (dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] &amp; <a class="code" href="pff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>)) { <span class="comment">/* Update .. entry in the directory if needed */</span></div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;                            dw = <a class="code" href="ff_8c.html#a7519abb60fe91f6aa1d17f64fbae123a">clust2sect</a>(djn.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="ff_8c.html#a19cd426084600d6007eb6f976c81fbdf">LD_CLUST</a>(dir));</div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;                            <span class="keywordflow">if</span> (!dw) {</div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;                                res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;                            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;                                res = move_window(djn.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, dw);</div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;                                dir = djn.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a54541860d8273ee2709def80ccc3e271">win</a> + <a class="code" href="ff_8c.html#ab10c2f2271dbdc132f9a6b9313fc7324">SZ_DIR</a>; <span class="comment">/* .. entry */</span></div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;                                <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> &amp;&amp; dir[1] == <span class="charliteral">&#39;.&#39;</span>) {</div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;                                    dw</div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;                                            = (djn.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#aee58d0bf64f06146927e78ad026b06ac">fs_type</a> == <a class="code" href="pff_8h.html#ac63e0796095a789cefdbc3c3c676c9ce">FS_FAT32</a></div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;                                                    &amp;&amp; djn.<a class="code" href="struct_d_i_r.html#aada1acd6ce100ead798e712b18c49547">sclust</a></div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;                                                            == djn.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a2152449dba421b7671f09ec7fcc7fa4e">dirbase</a>) ? 0</div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;                                                    : djn.<a class="code" href="struct_d_i_r.html#aada1acd6ce100ead798e712b18c49547">sclust</a>;</div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;                                    <a class="code" href="ff_8c.html#a08174fa72222a48a5c9e5de70c341af7">ST_CLUST</a>(dir, dw);</div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;                                    djn.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a34eeef694e75229e1608f07acba3ed1c">wflag</a> = 1;</div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;                                }</div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;                            }</div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;                        }</div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;                        <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;                            res = dir_remove(&amp;djo); <span class="comment">/* Remove old entry */</span></div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;                            <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>)</div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;                                res = sync(djo.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>);</div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;                        }</div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;                    }</div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;                    <span class="comment">/* End critical section */</span></div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;                }</div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;            }</div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;        }<a class="code" href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a>();</div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;    }</div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;    <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(djo.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, res);</div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;}</div>
<div class="ttc" id="ff_8c_html_a966fe5792671b39db1ccf655a8c1af8d"><div class="ttname"><a href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a></div><div class="ttdeci">#define INIT_BUF(dobj)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00478">ff.c:478</a></div></div>
<div class="ttc" id="tff_8h_html_a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45"><div class="ttname"><a href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a></div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00154">tff.h:154</a></div></div>
<div class="ttc" id="struct_d_i_r_html_ab9e26ba9262ce0f12d043d71dd4b2cf5"><div class="ttname"><a href="struct_d_i_r.html#ab9e26ba9262ce0f12d043d71dd4b2cf5">DIR::dir</a></div><div class="ttdeci">PF_BYTE * dir</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00149">ff.h:149</a></div></div>
<div class="ttc" id="ff_8c_html_a06c201f90533d5b49cd039c960327968"><div class="ttname"><a href="ff_8c.html#a06c201f90533d5b49cd039c960327968">NS</a></div><div class="ttdeci">#define NS</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00375">ff.c:375</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a></div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00123">pff.h:123</a></div></div>
<div class="ttc" id="ff_8c_html_ad3233e40118ed66095f3c9545b788f8a"><div class="ttname"><a href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a></div><div class="ttdeci">#define DIR_Attr</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00431">ff.c:431</a></div></div>
<div class="ttc" id="struct_d_i_r_html_af5245f40680a50c52ce1028bbe62d9f9"><div class="ttname"><a href="struct_d_i_r.html#af5245f40680a50c52ce1028bbe62d9f9">DIR::fn</a></div><div class="ttdeci">PF_BYTE * fn</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00150">ff.h:150</a></div></div>
<div class="ttc" id="struct_d_i_r_html"><div class="ttname"><a href="struct_d_i_r.html">DIR</a></div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00109">tff.h:109</a></div></div>
<div class="ttc" id="ff_8c_html_a7e653d8ca0ae09faa49cd5b7335fea84"><div class="ttname"><a href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a></div><div class="ttdeci">#define LEAVE_FF(fs, res)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00130">ff.c:130</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_aee58d0bf64f06146927e78ad026b06ac"><div class="ttname"><a href="struct_f_a_t_f_s.html#aee58d0bf64f06146927e78ad026b06ac">FATFS::fs_type</a></div><div class="ttdeci">byte fs_type</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00100">tff.h:100</a></div></div>
<div class="ttc" id="ff_8c_html_ab10c2f2271dbdc132f9a6b9313fc7324"><div class="ttname"><a href="ff_8c.html#ab10c2f2271dbdc132f9a6b9313fc7324">SZ_DIR</a></div><div class="ttdeci">#define SZ_DIR</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00445">ff.c:445</a></div></div>
<div class="ttc" id="ff_8c_html_a7519abb60fe91f6aa1d17f64fbae123a"><div class="ttname"><a href="ff_8c.html#a7519abb60fe91f6aa1d17f64fbae123a">clust2sect</a></div><div class="ttdeci">DWORD clust2sect(FATFS *fs, DWORD clst)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00764">ff.c:764</a></div></div>
<div class="ttc" id="ff_8c_html_a08174fa72222a48a5c9e5de70c341af7"><div class="ttname"><a href="ff_8c.html#a08174fa72222a48a5c9e5de70c341af7">ST_CLUST</a></div><div class="ttdeci">#define ST_CLUST(dir, cl)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00150">ff.c:150</a></div></div>
<div class="ttc" id="ff_8h_html_a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76"><div class="ttname"><a href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a></div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00180">ff.h:180</a></div></div>
<div class="ttc" id="ffconf_8h_html_a52faf11025401372f71e9d81905b7af4"><div class="ttname"><a href="ffconf_8h.html#a52faf11025401372f71e9d81905b7af4">_FS_RPATH</a></div><div class="ttdeci">#define _FS_RPATH</div><div class="ttdef"><b>Definition:</b> <a href="ffconf_8h_source.html#l00113">ffconf.h:113</a></div></div>
<div class="ttc" id="p32_2include_2pinguino_2libraries_2sd_2integer_8h_html_aa1e36ce100a7ff1291e95b4515d42e65"><div class="ttname"><a href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a></div><div class="ttdeci">unsigned char PF_BYTE</div><div class="ttdef"><b>Definition:</b> <a href="p32_2include_2pinguino_2libraries_2sd_2integer_8h_source.html#l00008">integer.h:8</a></div></div>
<div class="ttc" id="p8_2pinguino_2libraries_2integer_8h_html_ad342ac907eb044443153a22f964bf0af"><div class="ttname"><a href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a></div><div class="ttdeci">unsigned long DWORD</div><div class="ttdef"><b>Definition:</b> <a href="p8_2pinguino_2libraries_2integer_8h_source.html#l00033">integer.h:33</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a></div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00120">pff.h:120</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44c"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a></div><div class="ttdeci">FRESULT</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00119">pff.h:119</a></div></div>
<div class="ttc" id="tff_8h_html_a49d0171ecbd362cda5680a0d360db44ca0d8f024d256df76e84782b95018a2450"><div class="ttname"><a href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca0d8f024d256df76e84782b95018a2450">FR_EXIST</a></div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00157">tff.h:157</a></div></div>
<div class="ttc" id="ff_8c_html_aba6d6942b59f11cf285bdbfb7e38f1fa"><div class="ttname"><a href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a></div><div class="ttdeci">#define FREE_BUF()</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00479">ff.c:479</a></div></div>
<div class="ttc" id="struct_d_i_r_html_a472e3612956e3ffb3ab823c37ca33250"><div class="ttname"><a href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">DIR::fs</a></div><div class="ttdeci">FATFS * fs</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00112">tff.h:112</a></div></div>
<div class="ttc" id="pff_8h_html_ac63e0796095a789cefdbc3c3c676c9ce"><div class="ttname"><a href="pff_8h.html#ac63e0796095a789cefdbc3c3c676c9ce">FS_FAT32</a></div><div class="ttdeci">#define FS_FAT32</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00157">pff.h:157</a></div></div>
<div class="ttc" id="ff_8c_html_a2db528782a021797b34bdc6e9e9de1c3"><div class="ttname"><a href="ff_8c.html#a2db528782a021797b34bdc6e9e9de1c3">NS_DOT</a></div><div class="ttdeci">#define NS_DOT</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00381">ff.c:381</a></div></div>
<div class="ttc" id="tff_8c_html_addeee88e846cc637a785bcaf23b45b5e"><div class="ttname"><a href="tff_8c.html#addeee88e846cc637a785bcaf23b45b5e">dir</a></div><div class="ttdeci">byte * dir</div><div class="ttdef"><b>Definition:</b> <a href="tff_8c_source.html#l00068">tff.c:68</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_a34eeef694e75229e1608f07acba3ed1c"><div class="ttname"><a href="struct_f_a_t_f_s.html#a34eeef694e75229e1608f07acba3ed1c">FATFS::wflag</a></div><div class="ttdeci">PF_BYTE wflag</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00082">ff.h:82</a></div></div>
<div class="ttc" id="tff_8c_html_aab43d7bcfb87e7ef71138d651ce1bea1"><div class="ttname"><a href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a></div><div class="ttdeci">FRESULT res</div><div class="ttdef"><b>Definition:</b> <a href="tff_8c_source.html#l00065">tff.c:65</a></div></div>
<div class="ttc" id="pff_8h_html_ae8174d00798e34e7c9e95898cb9e1a09"><div class="ttname"><a href="pff_8h.html#ae8174d00798e34e7c9e95898cb9e1a09">AM_ARC</a></div><div class="ttdeci">#define AM_ARC</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00168">pff.h:168</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_a2152449dba421b7671f09ec7fcc7fa4e"><div class="ttname"><a href="struct_f_a_t_f_s.html#a2152449dba421b7671f09ec7fcc7fa4e">FATFS::dirbase</a></div><div class="ttdeci">dword dirbase</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00087">tff.h:87</a></div></div>
<div class="ttc" id="ff_8c_html_a40aba328871d2be78bfdd74b390275db"><div class="ttname"><a href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a></div><div class="ttdeci">#define DEF_NAMEBUF</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00477">ff.c:477</a></div></div>
<div class="ttc" id="pff_8h_html_a3a9db44e978ed6c13b641e092d4cd7d3"><div class="ttname"><a href="pff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a></div><div class="ttdeci">#define AM_DIR</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00167">pff.h:167</a></div></div>
<div class="ttc" id="struct_d_i_r_html_aada1acd6ce100ead798e712b18c49547"><div class="ttname"><a href="struct_d_i_r.html#aada1acd6ce100ead798e712b18c49547">DIR::sclust</a></div><div class="ttdeci">CLUST sclust</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00113">tff.h:113</a></div></div>
<div class="ttc" id="ff_8c_html_a19cd426084600d6007eb6f976c81fbdf"><div class="ttname"><a href="ff_8c.html#a19cd426084600d6007eb6f976c81fbdf">LD_CLUST</a></div><div class="ttdeci">#define LD_CLUST(dir)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00149">ff.c:149</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_a54541860d8273ee2709def80ccc3e271"><div class="ttname"><a href="struct_f_a_t_f_s.html#a54541860d8273ee2709def80ccc3e271">FATFS::win</a></div><div class="ttdeci">byte win[512]</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00104">tff.h:104</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abe1f60daab5c7d11170c334fb832c798"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_stat </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_f_i_l_i_n_f_o.html">FILINFO</a> *&#160;</td>
          <td class="paramname"><em>fno</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l02961">2961</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>References <a class="el" href="ff_8c_source.html#l00477">DEF_NAMEBUF</a>, <a class="el" href="ff_8h_source.html#l00149">DIR::dir</a>, <a class="el" href="tff_8c_source.html#l00066">dj</a>, <a class="el" href="tff_8h_source.html#l00154">FR_INVALID_NAME</a>, <a class="el" href="pff_8h_source.html#l00120">FR_OK</a>, <a class="el" href="ff_8c_source.html#l00479">FREE_BUF</a>, <a class="el" href="tff_8h_source.html#l00112">DIR::fs</a>, <a class="el" href="ff_8c_source.html#l00478">INIT_BUF</a>, <a class="el" href="ff_8c_source.html#l00130">LEAVE_FF</a>, and <a class="el" href="tff_8c_source.html#l00065">res</a>.</p>
<div class="fragment"><div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;  {</div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;    <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> <a class="code" href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a>;</div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;    <a class="code" href="struct_d_i_r.html">DIR</a> <a class="code" href="tff_8c.html#a90affc32512431e143844fa9721bf9d9">dj</a>;</div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;    <a class="code" href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a>;</div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;</div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;    res = chk_mounted(&amp;path, &amp;dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, 0);</div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;    <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;        <a class="code" href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a>(dj);</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;        res = follow_path(&amp;dj, path); <span class="comment">/* Follow the file path */</span></div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;        <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) { <span class="comment">/* Follow completed */</span></div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;            <span class="keywordflow">if</span> (dj.<a class="code" href="struct_d_i_r.html#ab9e26ba9262ce0f12d043d71dd4b2cf5">dir</a>) <span class="comment">/* Found an object */</span></div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;                get_fileinfo(&amp;dj, fno);</div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;                <span class="comment">/* It is root dir */</span></div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;                res = <a class="code" href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;</div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;        }<a class="code" href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a>();</div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;    }</div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;</div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;    <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, res);</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;}</div>
<div class="ttc" id="ff_8c_html_a966fe5792671b39db1ccf655a8c1af8d"><div class="ttname"><a href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a></div><div class="ttdeci">#define INIT_BUF(dobj)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00478">ff.c:478</a></div></div>
<div class="ttc" id="tff_8h_html_a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45"><div class="ttname"><a href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a></div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00154">tff.h:154</a></div></div>
<div class="ttc" id="struct_d_i_r_html_ab9e26ba9262ce0f12d043d71dd4b2cf5"><div class="ttname"><a href="struct_d_i_r.html#ab9e26ba9262ce0f12d043d71dd4b2cf5">DIR::dir</a></div><div class="ttdeci">PF_BYTE * dir</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00149">ff.h:149</a></div></div>
<div class="ttc" id="struct_d_i_r_html"><div class="ttname"><a href="struct_d_i_r.html">DIR</a></div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00109">tff.h:109</a></div></div>
<div class="ttc" id="ff_8c_html_a7e653d8ca0ae09faa49cd5b7335fea84"><div class="ttname"><a href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a></div><div class="ttdeci">#define LEAVE_FF(fs, res)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00130">ff.c:130</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a></div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00120">pff.h:120</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44c"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a></div><div class="ttdeci">FRESULT</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00119">pff.h:119</a></div></div>
<div class="ttc" id="tff_8c_html_a90affc32512431e143844fa9721bf9d9"><div class="ttname"><a href="tff_8c.html#a90affc32512431e143844fa9721bf9d9">dj</a></div><div class="ttdeci">DIR dj</div><div class="ttdef"><b>Definition:</b> <a href="tff_8c_source.html#l00066">tff.c:66</a></div></div>
<div class="ttc" id="ff_8c_html_aba6d6942b59f11cf285bdbfb7e38f1fa"><div class="ttname"><a href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a></div><div class="ttdeci">#define FREE_BUF()</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00479">ff.c:479</a></div></div>
<div class="ttc" id="struct_d_i_r_html_a472e3612956e3ffb3ab823c37ca33250"><div class="ttname"><a href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">DIR::fs</a></div><div class="ttdeci">FATFS * fs</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00112">tff.h:112</a></div></div>
<div class="ttc" id="tff_8c_html_aab43d7bcfb87e7ef71138d651ce1bea1"><div class="ttname"><a href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a></div><div class="ttdeci">FRESULT res</div><div class="ttdef"><b>Definition:</b> <a href="tff_8c_source.html#l00065">tff.c:65</a></div></div>
<div class="ttc" id="ff_8c_html_a40aba328871d2be78bfdd74b390275db"><div class="ttname"><a href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a></div><div class="ttdeci">#define DEF_NAMEBUF</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00477">ff.c:477</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad69c7246b122ba56a134939ee0eaf847"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_sync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname"><em>fp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l02527">2527</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>References <a class="el" href="pff_8h_source.html#l00168">AM_ARC</a>, <a class="el" href="ff_8h_source.html#l00134">FIL::buf</a>, <a class="el" href="tff_8c_source.html#l00068">dir</a>, <a class="el" href="ff_8c_source.html#l00431">DIR_Attr</a>, <a class="el" href="ff_8c_source.html#l00439">DIR_FileSize</a>, <a class="el" href="pff_8h_source.html#l00217">DIR_FstClusHI</a>, <a class="el" href="pff_8h_source.html#l00220">DIR_FstClusLO</a>, <a class="el" href="tff_8h_source.html#l00132">FIL::dir_ptr</a>, <a class="el" href="tff_8h_source.html#l00131">FIL::dir_sect</a>, <a class="el" href="ff_8c_source.html#l00436">DIR_WrtTime</a>, <a class="el" href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#a7ffe0ccc946550a260d00871c6b636e7">disk_write()</a>, <a class="el" href="ff_8h_source.html#l00079">FATFS::drv</a>, <a class="el" href="ff_8h_source.html#l00122">FIL::dsect</a>, <a class="el" href="ff_8h_source.html#l00290">FA__DIRTY</a>, <a class="el" href="tff_8h_source.html#l00215">FA__WRITTEN</a>, <a class="el" href="tff_8h_source.html#l00122">FIL::flag</a>, <a class="el" href="pff_8h_source.html#l00121">FR_DISK_ERR</a>, <a class="el" href="pff_8h_source.html#l00120">FR_OK</a>, <a class="el" href="tff_8h_source.html#l00158">FR_RW_ERROR</a>, <a class="el" href="tff_8h_source.html#l00124">FIL::fs</a>, <a class="el" href="tff_8h_source.html#l00126">FIL::fsize</a>, <a class="el" href="p32_2include_2pinguino_2libraries_2sd_2diskio_8c_source.html#l00583">get_fattime()</a>, <a class="el" href="tff_8h_source.html#l00121">FIL::id</a>, <a class="el" href="ff_8c_source.html#l00130">LEAVE_FF</a>, <a class="el" href="tff_8h_source.html#l00127">FIL::org_clust</a>, <a class="el" href="tff_8c_source.html#l00065">res</a>, <a class="el" href="p8_2pinguino_2libraries_2sd_2diskio_8h_source.html#l00015">RES_OK</a>, <a class="el" href="ff_8h_source.html#l00120">FIL::sclust</a>, <a class="el" href="ff_8c_source.html#l00150">ST_CLUST</a>, <a class="el" href="pff_8h_source.html#l00237">ST_DWORD</a>, <a class="el" href="pff_8h_source.html#l00236">ST_WORD</a>, and <a class="el" href="ff_8h_source.html#l00082">FATFS::wflag</a>.</p>

<p>Referenced by <a class="el" href="ff_8c_source.html#l02568">f_close()</a>.</p>
<div class="fragment"><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;  {</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;    <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> <a class="code" href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a>;</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;    <a class="code" href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> tim;</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;    <a class="code" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a> *<a class="code" href="tff_8c.html#addeee88e846cc637a785bcaf23b45b5e">dir</a>;</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;    res = validate(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a588688f55d57bf8a7e8c1d2cf88a3c56">id</a>); <span class="comment">/* Check validity of the object */</span></div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;    <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;        <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#ae84669505a47c55d6246560a290a298d">flag</a> &amp; <a class="code" href="tff_8h.html#ac4b7d5223f84df91c306ffbff536fae4">FA__WRITTEN</a>) { <span class="comment">/* Has the file been written? */</span></div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;<span class="preprocessor">#if !_FS_TINY   </span><span class="comment">/* Write-back dirty buffer */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;<span class="preprocessor"></span>            <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#ae84669505a47c55d6246560a290a298d">flag</a> &amp; <a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>) {</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#a7ffe0ccc946550a260d00871c6b636e7">disk_write</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#aabcebc0763f1acbd8928158570150c9f">drv</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a8b83239f9e2ae594c0cbc75d23ddff89">buf</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a>, 1) != <a class="code" href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>)</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;                    <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;                fp-&gt;<a class="code" href="struct_f_i_l.html#ae84669505a47c55d6246560a290a298d">flag</a> &amp;= ~<a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>;</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;            }</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;<span class="preprocessor"></span>            <span class="comment">/* Update the directory entry */</span></div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;            res = move_window(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#ac40d4a51f8f940e6154d364c45935278">dir_sect</a>);</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;            <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;                dir = fp-&gt;<a class="code" href="struct_f_i_l.html#abc0a41dfbb69ffc78a01f5a357412995">dir_ptr</a>;</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;                dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] |= <a class="code" href="pff_8h.html#ae8174d00798e34e7c9e95898cb9e1a09">AM_ARC</a>; <span class="comment">/* Set archive bit */</span></div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;                <a class="code" href="pff_8h.html#abf5aba973d95ac5843b80aa7379cdd66">ST_DWORD</a>(dir+<a class="code" href="ff_8c.html#abfbfa613864a02a65f0bf70ead6672c7">DIR_FileSize</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a7582a0b3a658c0543f6cdc7585d84f7c">fsize</a>); <span class="comment">/* Update file size */</span></div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;                <a class="code" href="ff_8c.html#a08174fa72222a48a5c9e5de70c341af7">ST_CLUST</a>(dir, fp-&gt;<a class="code" href="struct_f_i_l.html#ad5d52f3fde971d2a05ff777a6243c252">sclust</a>); <span class="comment">/* Update start cluster */</span></div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;                tim = <a class="code" href="tff_8h.html#a489f23a9be58cd896a5c45e45c6e6e6f">get_fattime</a>(); <span class="comment">/* Update updated time */</span></div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;                <a class="code" href="pff_8h.html#abf5aba973d95ac5843b80aa7379cdd66">ST_DWORD</a>(dir+<a class="code" href="ff_8c.html#ab9452d336adeece2a1b0b54ab35b8a59">DIR_WrtTime</a>, tim);</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;                fp-&gt;<a class="code" href="struct_f_i_l.html#ae84669505a47c55d6246560a290a298d">flag</a> &amp;= ~<a class="code" href="tff_8h.html#ac4b7d5223f84df91c306ffbff536fae4">FA__WRITTEN</a>;</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;                fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a34eeef694e75229e1608f07acba3ed1c">wflag</a> = 1;</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;                res = sync(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>);</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;            }</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;        }</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;    }</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;    <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, res);</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;}</div>
<div class="ttc" id="struct_f_i_l_html_ae84669505a47c55d6246560a290a298d"><div class="ttname"><a href="struct_f_i_l.html#ae84669505a47c55d6246560a290a298d">FIL::flag</a></div><div class="ttdeci">byte flag</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00122">tff.h:122</a></div></div>
<div class="ttc" id="pff_8h_html_abf5aba973d95ac5843b80aa7379cdd66"><div class="ttname"><a href="pff_8h.html#abf5aba973d95ac5843b80aa7379cdd66">ST_DWORD</a></div><div class="ttdeci">#define ST_DWORD(ptr, val)</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00237">pff.h:237</a></div></div>
<div class="ttc" id="struct_f_i_l_html_abc0a41dfbb69ffc78a01f5a357412995"><div class="ttname"><a href="struct_f_i_l.html#abc0a41dfbb69ffc78a01f5a357412995">FIL::dir_ptr</a></div><div class="ttdeci">byte * dir_ptr</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00132">tff.h:132</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a7582a0b3a658c0543f6cdc7585d84f7c"><div class="ttname"><a href="struct_f_i_l.html#a7582a0b3a658c0543f6cdc7585d84f7c">FIL::fsize</a></div><div class="ttdeci">dword fsize</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00126">tff.h:126</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a472e3612956e3ffb3ab823c37ca33250"><div class="ttname"><a href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">FIL::fs</a></div><div class="ttdeci">FATFS * fs</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00124">tff.h:124</a></div></div>
<div class="ttc" id="ff_8c_html_ad3233e40118ed66095f3c9545b788f8a"><div class="ttname"><a href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a></div><div class="ttdeci">#define DIR_Attr</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00431">ff.c:431</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a></div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00121">pff.h:121</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a272171f74215002aba31a89428f1d290"><div class="ttname"><a href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">FIL::dsect</a></div><div class="ttdeci">DWORD dsect</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00122">ff.h:122</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_aabcebc0763f1acbd8928158570150c9f"><div class="ttname"><a href="struct_f_a_t_f_s.html#aabcebc0763f1acbd8928158570150c9f">FATFS::drv</a></div><div class="ttdeci">PF_BYTE drv</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00079">ff.h:79</a></div></div>
<div class="ttc" id="ff_8c_html_a7e653d8ca0ae09faa49cd5b7335fea84"><div class="ttname"><a href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a></div><div class="ttdeci">#define LEAVE_FF(fs, res)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00130">ff.c:130</a></div></div>
<div class="ttc" id="ff_8c_html_a08174fa72222a48a5c9e5de70c341af7"><div class="ttname"><a href="ff_8c.html#a08174fa72222a48a5c9e5de70c341af7">ST_CLUST</a></div><div class="ttdeci">#define ST_CLUST(dir, cl)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00150">ff.c:150</a></div></div>
<div class="ttc" id="p32_2include_2pinguino_2libraries_2sd_2integer_8h_html_aa1e36ce100a7ff1291e95b4515d42e65"><div class="ttname"><a href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a></div><div class="ttdeci">unsigned char PF_BYTE</div><div class="ttdef"><b>Definition:</b> <a href="p32_2include_2pinguino_2libraries_2sd_2integer_8h_source.html#l00008">integer.h:8</a></div></div>
<div class="ttc" id="p8_2pinguino_2libraries_2sd_2diskio_8h_html_a7ffe0ccc946550a260d00871c6b636e7"><div class="ttname"><a href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#a7ffe0ccc946550a260d00871c6b636e7">disk_write</a></div><div class="ttdeci">DRESULT disk_write(const u8 *, u32, u8)</div></div>
<div class="ttc" id="p8_2pinguino_2libraries_2integer_8h_html_ad342ac907eb044443153a22f964bf0af"><div class="ttname"><a href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a></div><div class="ttdeci">unsigned long DWORD</div><div class="ttdef"><b>Definition:</b> <a href="p8_2pinguino_2libraries_2integer_8h_source.html#l00033">integer.h:33</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a></div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00120">pff.h:120</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44c"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a></div><div class="ttdeci">FRESULT</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00119">pff.h:119</a></div></div>
<div class="ttc" id="struct_f_i_l_html_ad5d52f3fde971d2a05ff777a6243c252"><div class="ttname"><a href="struct_f_i_l.html#ad5d52f3fde971d2a05ff777a6243c252">FIL::sclust</a></div><div class="ttdeci">DWORD sclust</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00120">ff.h:120</a></div></div>
<div class="ttc" id="struct_f_i_l_html_ac40d4a51f8f940e6154d364c45935278"><div class="ttname"><a href="struct_f_i_l.html#ac40d4a51f8f940e6154d364c45935278">FIL::dir_sect</a></div><div class="ttdeci">dword dir_sect</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00131">tff.h:131</a></div></div>
<div class="ttc" id="ff_8h_html_a5b2962e3616a1e9eb709d95f4c75c67c"><div class="ttname"><a href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a></div><div class="ttdeci">#define FA__DIRTY</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00290">ff.h:290</a></div></div>
<div class="ttc" id="p8_2pinguino_2libraries_2sd_2diskio_8h_html_aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737"><div class="ttname"><a href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a></div><div class="ttdef"><b>Definition:</b> <a href="p8_2pinguino_2libraries_2sd_2diskio_8h_source.html#l00015">diskio.h:15</a></div></div>
<div class="ttc" id="tff_8h_html_ac4b7d5223f84df91c306ffbff536fae4"><div class="ttname"><a href="tff_8h.html#ac4b7d5223f84df91c306ffbff536fae4">FA__WRITTEN</a></div><div class="ttdeci">#define FA__WRITTEN</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00215">tff.h:215</a></div></div>
<div class="ttc" id="ff_8c_html_ab9452d336adeece2a1b0b54ab35b8a59"><div class="ttname"><a href="ff_8c.html#ab9452d336adeece2a1b0b54ab35b8a59">DIR_WrtTime</a></div><div class="ttdeci">#define DIR_WrtTime</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00436">ff.c:436</a></div></div>
<div class="ttc" id="tff_8h_html_a489f23a9be58cd896a5c45e45c6e6e6f"><div class="ttname"><a href="tff_8h.html#a489f23a9be58cd896a5c45e45c6e6e6f">get_fattime</a></div><div class="ttdeci">dword get_fattime(void)</div><div class="ttdef"><b>Definition:</b> <a href="p32_2include_2pinguino_2libraries_2sd_2diskio_8c_source.html#l00583">diskio.c:583</a></div></div>
<div class="ttc" id="tff_8c_html_addeee88e846cc637a785bcaf23b45b5e"><div class="ttname"><a href="tff_8c.html#addeee88e846cc637a785bcaf23b45b5e">dir</a></div><div class="ttdeci">byte * dir</div><div class="ttdef"><b>Definition:</b> <a href="tff_8c_source.html#l00068">tff.c:68</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_a34eeef694e75229e1608f07acba3ed1c"><div class="ttname"><a href="struct_f_a_t_f_s.html#a34eeef694e75229e1608f07acba3ed1c">FATFS::wflag</a></div><div class="ttdeci">PF_BYTE wflag</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00082">ff.h:82</a></div></div>
<div class="ttc" id="tff_8c_html_aab43d7bcfb87e7ef71138d651ce1bea1"><div class="ttname"><a href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a></div><div class="ttdeci">FRESULT res</div><div class="ttdef"><b>Definition:</b> <a href="tff_8c_source.html#l00065">tff.c:65</a></div></div>
<div class="ttc" id="pff_8h_html_ae8174d00798e34e7c9e95898cb9e1a09"><div class="ttname"><a href="pff_8h.html#ae8174d00798e34e7c9e95898cb9e1a09">AM_ARC</a></div><div class="ttdeci">#define AM_ARC</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00168">pff.h:168</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a8b83239f9e2ae594c0cbc75d23ddff89"><div class="ttname"><a href="struct_f_i_l.html#a8b83239f9e2ae594c0cbc75d23ddff89">FIL::buf</a></div><div class="ttdeci">PF_BYTE buf[_MAX_SS]</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00134">ff.h:134</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a588688f55d57bf8a7e8c1d2cf88a3c56"><div class="ttname"><a href="struct_f_i_l.html#a588688f55d57bf8a7e8c1d2cf88a3c56">FIL::id</a></div><div class="ttdeci">word id</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00121">tff.h:121</a></div></div>
<div class="ttc" id="ff_8c_html_abfbfa613864a02a65f0bf70ead6672c7"><div class="ttname"><a href="ff_8c.html#abfbfa613864a02a65f0bf70ead6672c7">DIR_FileSize</a></div><div class="ttdeci">#define DIR_FileSize</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00439">ff.c:439</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a691a27b40c348f7c84b42e911636f38a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_truncate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname"><em>fp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l03062">3062</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>References <a class="el" href="ff_8h_source.html#l00121">FIL::clust</a>, <a class="el" href="tff_8h_source.html#l00128">FIL::curr_clust</a>, <a class="el" href="tff_8h_source.html#l00217">FA__ERROR</a>, <a class="el" href="tff_8h_source.html#l00215">FA__WRITTEN</a>, <a class="el" href="tff_8h_source.html#l00211">FA_WRITE</a>, <a class="el" href="tff_8h_source.html#l00122">FIL::flag</a>, <a class="el" href="tff_8h_source.html#l00125">FIL::fptr</a>, <a class="el" href="tff_8h_source.html#l00156">FR_DENIED</a>, <a class="el" href="pff_8h_source.html#l00121">FR_DISK_ERR</a>, <a class="el" href="ff_8h_source.html#l00180">FR_INT_ERR</a>, <a class="el" href="pff_8h_source.html#l00120">FR_OK</a>, <a class="el" href="tff_8h_source.html#l00158">FR_RW_ERROR</a>, <a class="el" href="tff_8h_source.html#l00124">FIL::fs</a>, <a class="el" href="tff_8h_source.html#l00126">FIL::fsize</a>, <a class="el" href="ff_8c_source.html#l00778">get_fat()</a>, <a class="el" href="tff_8h_source.html#l00121">FIL::id</a>, <a class="el" href="ff_8c_source.html#l00130">LEAVE_FF</a>, <a class="el" href="tff_8h_source.html#l00090">FATFS::max_clust</a>, <a class="el" href="ff_8h_source.html#l00100">FATFS::n_fatent</a>, <a class="el" href="tff_8h_source.html#l00127">FIL::org_clust</a>, <a class="el" href="ff_8c_source.html#l00822">put_fat()</a>, <a class="el" href="tff_8c_source.html#l00065">res</a>, and <a class="el" href="ff_8h_source.html#l00120">FIL::sclust</a>.</p>
<div class="fragment"><div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;  {</div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;    <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> <a class="code" href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a>;</div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;    <a class="code" href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> ncl;</div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;</div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;    res = validate(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a588688f55d57bf8a7e8c1d2cf88a3c56">id</a>); <span class="comment">/* Check validity of the object */</span></div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;    <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;        <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#ae84669505a47c55d6246560a290a298d">flag</a> &amp; <a class="code" href="tff_8h.html#ad3b47fe8126573b17752a9a242b76b9a">FA__ERROR</a>) { <span class="comment">/* Check abort flag */</span></div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;            res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;            <span class="keywordflow">if</span> (!(fp-&gt;<a class="code" href="struct_f_i_l.html#ae84669505a47c55d6246560a290a298d">flag</a> &amp; <a class="code" href="tff_8h.html#afa366963220c89b882c0361794020c14">FA_WRITE</a>)) <span class="comment">/* Check access mode */</span></div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;                res = <a class="code" href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>;</div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;        }</div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;    }</div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;    <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;        <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#a7582a0b3a658c0543f6cdc7585d84f7c">fsize</a> &gt; fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a>) {</div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;            fp-&gt;<a class="code" href="struct_f_i_l.html#a7582a0b3a658c0543f6cdc7585d84f7c">fsize</a> = fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a>; <span class="comment">/* Set file size to current R/W point */</span></div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;            fp-&gt;<a class="code" href="struct_f_i_l.html#ae84669505a47c55d6246560a290a298d">flag</a> |= <a class="code" href="tff_8h.html#ac4b7d5223f84df91c306ffbff536fae4">FA__WRITTEN</a>;</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;            <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a> == 0) { <span class="comment">/* When set file size to zero, remove entire cluster chain */</span></div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;                res = remove_chain(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#ad5d52f3fde971d2a05ff777a6243c252">sclust</a>);</div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;                fp-&gt;<a class="code" href="struct_f_i_l.html#ad5d52f3fde971d2a05ff777a6243c252">sclust</a> = 0;</div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;            } <span class="keywordflow">else</span> { <span class="comment">/* When truncate a part of the file, remove remaining clusters */</span></div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;                ncl = <a class="code" href="ff_8c.html#a65611adf1626e5e08da77cd33a98dd8b">get_fat</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#ac134c1b4645be670eb5207032e714616">clust</a>);</div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;                res = <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>;</div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;                <span class="keywordflow">if</span> (ncl == 0xFFFFFFFF)</div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;                    res = <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>;</div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;                <span class="keywordflow">if</span> (ncl == 1)</div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;                    res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;                <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> &amp;&amp; ncl &lt; fp-&gt;fs-&gt;n_fatent) {</div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;                    res = <a class="code" href="ff_8c.html#abd4b6b071a8d728a88727051c12bc6d7">put_fat</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#ac134c1b4645be670eb5207032e714616">clust</a>, 0x0FFFFFFF);</div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;                    <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>)</div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;                        res = remove_chain(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, ncl);</div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;                }</div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;            }</div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;        }</div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;        <span class="keywordflow">if</span> (res != <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>)</div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;            fp-&gt;<a class="code" href="struct_f_i_l.html#ae84669505a47c55d6246560a290a298d">flag</a> |= <a class="code" href="tff_8h.html#ad3b47fe8126573b17752a9a242b76b9a">FA__ERROR</a>;</div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;    }</div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;</div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;    <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, res);</div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;}</div>
<div class="ttc" id="struct_f_i_l_html_ae84669505a47c55d6246560a290a298d"><div class="ttname"><a href="struct_f_i_l.html#ae84669505a47c55d6246560a290a298d">FIL::flag</a></div><div class="ttdeci">byte flag</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00122">tff.h:122</a></div></div>
<div class="ttc" id="tff_8h_html_a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d"><div class="ttname"><a href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a></div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00156">tff.h:156</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a7582a0b3a658c0543f6cdc7585d84f7c"><div class="ttname"><a href="struct_f_i_l.html#a7582a0b3a658c0543f6cdc7585d84f7c">FIL::fsize</a></div><div class="ttdeci">dword fsize</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00126">tff.h:126</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a472e3612956e3ffb3ab823c37ca33250"><div class="ttname"><a href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">FIL::fs</a></div><div class="ttdeci">FATFS * fs</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00124">tff.h:124</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a></div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00121">pff.h:121</a></div></div>
<div class="ttc" id="tff_8h_html_afa366963220c89b882c0361794020c14"><div class="ttname"><a href="tff_8h.html#afa366963220c89b882c0361794020c14">FA_WRITE</a></div><div class="ttdeci">#define FA_WRITE</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00211">tff.h:211</a></div></div>
<div class="ttc" id="ff_8c_html_a7e653d8ca0ae09faa49cd5b7335fea84"><div class="ttname"><a href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a></div><div class="ttdeci">#define LEAVE_FF(fs, res)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00130">ff.c:130</a></div></div>
<div class="ttc" id="tff_8h_html_ad3b47fe8126573b17752a9a242b76b9a"><div class="ttname"><a href="tff_8h.html#ad3b47fe8126573b17752a9a242b76b9a">FA__ERROR</a></div><div class="ttdeci">#define FA__ERROR</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00217">tff.h:217</a></div></div>
<div class="ttc" id="struct_f_i_l_html_ac134c1b4645be670eb5207032e714616"><div class="ttname"><a href="struct_f_i_l.html#ac134c1b4645be670eb5207032e714616">FIL::clust</a></div><div class="ttdeci">DWORD clust</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00121">ff.h:121</a></div></div>
<div class="ttc" id="ff_8h_html_a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76"><div class="ttname"><a href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a></div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00180">ff.h:180</a></div></div>
<div class="ttc" id="p8_2pinguino_2libraries_2integer_8h_html_ad342ac907eb044443153a22f964bf0af"><div class="ttname"><a href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a></div><div class="ttdeci">unsigned long DWORD</div><div class="ttdef"><b>Definition:</b> <a href="p8_2pinguino_2libraries_2integer_8h_source.html#l00033">integer.h:33</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a></div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00120">pff.h:120</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44c"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a></div><div class="ttdeci">FRESULT</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00119">pff.h:119</a></div></div>
<div class="ttc" id="struct_f_i_l_html_ad5d52f3fde971d2a05ff777a6243c252"><div class="ttname"><a href="struct_f_i_l.html#ad5d52f3fde971d2a05ff777a6243c252">FIL::sclust</a></div><div class="ttdeci">DWORD sclust</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00120">ff.h:120</a></div></div>
<div class="ttc" id="ff_8c_html_a65611adf1626e5e08da77cd33a98dd8b"><div class="ttname"><a href="ff_8c.html#a65611adf1626e5e08da77cd33a98dd8b">get_fat</a></div><div class="ttdeci">DWORD get_fat(FATFS *fs, DWORD clst)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00778">ff.c:778</a></div></div>
<div class="ttc" id="ff_8c_html_abd4b6b071a8d728a88727051c12bc6d7"><div class="ttname"><a href="ff_8c.html#abd4b6b071a8d728a88727051c12bc6d7">put_fat</a></div><div class="ttdeci">FRESULT put_fat(FATFS *fs, DWORD clst, DWORD val)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00822">ff.c:822</a></div></div>
<div class="ttc" id="tff_8h_html_ac4b7d5223f84df91c306ffbff536fae4"><div class="ttname"><a href="tff_8h.html#ac4b7d5223f84df91c306ffbff536fae4">FA__WRITTEN</a></div><div class="ttdeci">#define FA__WRITTEN</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00215">tff.h:215</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a5afdaf3451d484cc97e07228b775ccf1"><div class="ttname"><a href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">FIL::fptr</a></div><div class="ttdeci">dword fptr</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00125">tff.h:125</a></div></div>
<div class="ttc" id="tff_8c_html_aab43d7bcfb87e7ef71138d651ce1bea1"><div class="ttname"><a href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a></div><div class="ttdeci">FRESULT res</div><div class="ttdef"><b>Definition:</b> <a href="tff_8c_source.html#l00065">tff.c:65</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a588688f55d57bf8a7e8c1d2cf88a3c56"><div class="ttname"><a href="struct_f_i_l.html#a588688f55d57bf8a7e8c1d2cf88a3c56">FIL::id</a></div><div class="ttdeci">word id</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00121">tff.h:121</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2858167fcd0bced48e9be434b3895efe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_unlink </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l03108">3108</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>References <a class="el" href="ffconf_8h_source.html#l00113">_FS_RPATH</a>, <a class="el" href="pff_8h_source.html#l00167">AM_DIR</a>, <a class="el" href="pff_8h_source.html#l00162">AM_RDO</a>, <a class="el" href="tff_8h_source.html#l00114">DIR::clust</a>, <a class="el" href="ff_8c_source.html#l00764">clust2sect()</a>, <a class="el" href="ff_8c_source.html#l00477">DEF_NAMEBUF</a>, <a class="el" href="tff_8c_source.html#l00068">dir</a>, <a class="el" href="ff_8h_source.html#l00149">DIR::dir</a>, <a class="el" href="ff_8c_source.html#l00431">DIR_Attr</a>, <a class="el" href="pff_8h_source.html#l00217">DIR_FstClusHI</a>, <a class="el" href="pff_8h_source.html#l00220">DIR_FstClusLO</a>, <a class="el" href="pff_8h_source.html#l00212">DIR_Name</a>, <a class="el" href="tff_8c_source.html#l00066">dj</a>, <a class="el" href="ff_8h_source.html#l00150">DIR::fn</a>, <a class="el" href="tff_8h_source.html#l00156">FR_DENIED</a>, <a class="el" href="ff_8h_source.html#l00180">FR_INT_ERR</a>, <a class="el" href="tff_8h_source.html#l00154">FR_INVALID_NAME</a>, <a class="el" href="pff_8h_source.html#l00123">FR_NO_FILE</a>, <a class="el" href="pff_8h_source.html#l00120">FR_OK</a>, <a class="el" href="tff_8h_source.html#l00158">FR_RW_ERROR</a>, <a class="el" href="ff_8c_source.html#l00479">FREE_BUF</a>, <a class="el" href="tff_8h_source.html#l00112">DIR::fs</a>, <a class="el" href="tff_8h_source.html#l00111">DIR::index</a>, <a class="el" href="ff_8c_source.html#l00478">INIT_BUF</a>, <a class="el" href="ff_8c_source.html#l00149">LD_CLUST</a>, <a class="el" href="pff_8h_source.html#l00234">LD_WORD</a>, <a class="el" href="ff_8c_source.html#l00130">LEAVE_FF</a>, <a class="el" href="ff_8c_source.html#l00375">NS</a>, <a class="el" href="tff_8c_source.html#l00065">res</a>, <a class="el" href="tff_8h_source.html#l00113">DIR::sclust</a>, <a class="el" href="tff_8h_source.html#l00115">DIR::sect</a>, <a class="el" href="tff_8h_source.html#l00104">FATFS::win</a>, <a class="el" href="tff_8h_source.html#l00103">FATFS::winflag</a>, and <a class="el" href="tff_8h_source.html#l00085">FATFS::winsect</a>.</p>
<div class="fragment"><div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;  {</div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;    <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> <a class="code" href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a>;</div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;    <a class="code" href="struct_d_i_r.html">DIR</a> <a class="code" href="tff_8c.html#a90affc32512431e143844fa9721bf9d9">dj</a>, sdj;</div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;    <a class="code" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a> *<a class="code" href="tff_8c.html#addeee88e846cc637a785bcaf23b45b5e">dir</a>;</div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;    <a class="code" href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> dclst;</div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;    <a class="code" href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a>;</div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;</div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;    res = chk_mounted(&amp;path, &amp;dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, 1);</div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;    <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;        <a class="code" href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a>(dj);</div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;        res = follow_path(&amp;dj, path); <span class="comment">/* Follow the file path */</span></div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ffconf_8h.html#a52faf11025401372f71e9d81905b7af4">_FS_RPATH</a> &amp;&amp; res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> &amp;&amp; (dj.<a class="code" href="struct_d_i_r.html#af5245f40680a50c52ce1028bbe62d9f9">fn</a>[<a class="code" href="ff_8c.html#a06c201f90533d5b49cd039c960327968">NS</a>] &amp; <a class="code" href="ff_8c.html#a2db528782a021797b34bdc6e9e9de1c3">NS_DOT</a>))</div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;            res = <a class="code" href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>; <span class="comment">/* Cannot remove dot entry */</span></div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;<span class="preprocessor">#if _FS_SHARE</span></div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;<span class="preprocessor"></span>        <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) res = chk_lock(&amp;dj, 2); <span class="comment">/* Cannot remove open file */</span></div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;<span class="preprocessor"></span>        <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) { <span class="comment">/* The object is accessible */</span></div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;            dir = dj.<a class="code" href="struct_d_i_r.html#ab9e26ba9262ce0f12d043d71dd4b2cf5">dir</a>;</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;            <span class="keywordflow">if</span> (!dir) {</div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;                res = <a class="code" href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>; <span class="comment">/* Cannot remove the start directory */</span></div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;                <span class="keywordflow">if</span> (dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] &amp; <a class="code" href="pff_8h.html#add6d85d1e7a02b4f6188783ef91a5f1e">AM_RDO</a>)</div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;                    res = <a class="code" href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>; <span class="comment">/* Cannot remove R/O object */</span></div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;            }</div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;            dclst = <a class="code" href="ff_8c.html#a19cd426084600d6007eb6f976c81fbdf">LD_CLUST</a>(dir);</div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;            <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> &amp;&amp; (dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] &amp; <a class="code" href="pff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>)) { <span class="comment">/* Is it a sub-dir? */</span></div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;                <span class="keywordflow">if</span> (dclst &lt; 2) {</div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;                    res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;                    mem_cpy(&amp;sdj, &amp;dj, <span class="keyword">sizeof</span>(<a class="code" href="struct_d_i_r.html">DIR</a>)); <span class="comment">/* Check if the sub-dir is empty or not */</span></div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;                    sdj.<a class="code" href="struct_d_i_r.html#aada1acd6ce100ead798e712b18c49547">sclust</a> = dclst;</div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;                    res = dir_sdi(&amp;sdj, 2); <span class="comment">/* Exclude dot entries */</span></div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;                    <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;                        res = dir_read(&amp;sdj);</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;                        <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> <span class="comment">/* Not empty dir */</span></div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;#<span class="keywordflow">if</span> <a class="code" href="ffconf_8h.html#a52faf11025401372f71e9d81905b7af4">_FS_RPATH</a></div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;                            || dclst == sdj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;cdir <span class="comment">/* Current dir */</span></div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;#endif</div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;                            ) res = <a class="code" href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>;</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;                        <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>)</div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;                            res = <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>; <span class="comment">/* Empty */</span></div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;                    }</div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;                }</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;            }</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;            <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;                res = dir_remove(&amp;dj); <span class="comment">/* Remove the directory entry */</span></div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;                <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;                    <span class="keywordflow">if</span> (dclst) <span class="comment">/* Remove the cluster chain if exist */</span></div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;                        res = remove_chain(dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, dclst);</div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;                    <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>)</div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;                        res = sync(dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>);</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;                }</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;            }</div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;        }<a class="code" href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a>();</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;    }</div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;    <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, res);</div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;}</div>
<div class="ttc" id="ff_8c_html_a966fe5792671b39db1ccf655a8c1af8d"><div class="ttname"><a href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a></div><div class="ttdeci">#define INIT_BUF(dobj)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00478">ff.c:478</a></div></div>
<div class="ttc" id="tff_8h_html_a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45"><div class="ttname"><a href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a></div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00154">tff.h:154</a></div></div>
<div class="ttc" id="tff_8h_html_a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d"><div class="ttname"><a href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a></div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00156">tff.h:156</a></div></div>
<div class="ttc" id="struct_d_i_r_html_ab9e26ba9262ce0f12d043d71dd4b2cf5"><div class="ttname"><a href="struct_d_i_r.html#ab9e26ba9262ce0f12d043d71dd4b2cf5">DIR::dir</a></div><div class="ttdeci">PF_BYTE * dir</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00149">ff.h:149</a></div></div>
<div class="ttc" id="ff_8c_html_a06c201f90533d5b49cd039c960327968"><div class="ttname"><a href="ff_8c.html#a06c201f90533d5b49cd039c960327968">NS</a></div><div class="ttdeci">#define NS</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00375">ff.c:375</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a></div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00123">pff.h:123</a></div></div>
<div class="ttc" id="ff_8c_html_ad3233e40118ed66095f3c9545b788f8a"><div class="ttname"><a href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a></div><div class="ttdeci">#define DIR_Attr</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00431">ff.c:431</a></div></div>
<div class="ttc" id="struct_d_i_r_html_af5245f40680a50c52ce1028bbe62d9f9"><div class="ttname"><a href="struct_d_i_r.html#af5245f40680a50c52ce1028bbe62d9f9">DIR::fn</a></div><div class="ttdeci">PF_BYTE * fn</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00150">ff.h:150</a></div></div>
<div class="ttc" id="struct_d_i_r_html"><div class="ttname"><a href="struct_d_i_r.html">DIR</a></div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00109">tff.h:109</a></div></div>
<div class="ttc" id="ff_8c_html_a7e653d8ca0ae09faa49cd5b7335fea84"><div class="ttname"><a href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a></div><div class="ttdeci">#define LEAVE_FF(fs, res)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00130">ff.c:130</a></div></div>
<div class="ttc" id="ff_8h_html_a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76"><div class="ttname"><a href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a></div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00180">ff.h:180</a></div></div>
<div class="ttc" id="ffconf_8h_html_a52faf11025401372f71e9d81905b7af4"><div class="ttname"><a href="ffconf_8h.html#a52faf11025401372f71e9d81905b7af4">_FS_RPATH</a></div><div class="ttdeci">#define _FS_RPATH</div><div class="ttdef"><b>Definition:</b> <a href="ffconf_8h_source.html#l00113">ffconf.h:113</a></div></div>
<div class="ttc" id="p32_2include_2pinguino_2libraries_2sd_2integer_8h_html_aa1e36ce100a7ff1291e95b4515d42e65"><div class="ttname"><a href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a></div><div class="ttdeci">unsigned char PF_BYTE</div><div class="ttdef"><b>Definition:</b> <a href="p32_2include_2pinguino_2libraries_2sd_2integer_8h_source.html#l00008">integer.h:8</a></div></div>
<div class="ttc" id="p8_2pinguino_2libraries_2integer_8h_html_ad342ac907eb044443153a22f964bf0af"><div class="ttname"><a href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a></div><div class="ttdeci">unsigned long DWORD</div><div class="ttdef"><b>Definition:</b> <a href="p8_2pinguino_2libraries_2integer_8h_source.html#l00033">integer.h:33</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a></div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00120">pff.h:120</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44c"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a></div><div class="ttdeci">FRESULT</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00119">pff.h:119</a></div></div>
<div class="ttc" id="tff_8c_html_a90affc32512431e143844fa9721bf9d9"><div class="ttname"><a href="tff_8c.html#a90affc32512431e143844fa9721bf9d9">dj</a></div><div class="ttdeci">DIR dj</div><div class="ttdef"><b>Definition:</b> <a href="tff_8c_source.html#l00066">tff.c:66</a></div></div>
<div class="ttc" id="ff_8c_html_aba6d6942b59f11cf285bdbfb7e38f1fa"><div class="ttname"><a href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a></div><div class="ttdeci">#define FREE_BUF()</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00479">ff.c:479</a></div></div>
<div class="ttc" id="struct_d_i_r_html_a472e3612956e3ffb3ab823c37ca33250"><div class="ttname"><a href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">DIR::fs</a></div><div class="ttdeci">FATFS * fs</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00112">tff.h:112</a></div></div>
<div class="ttc" id="pff_8h_html_add6d85d1e7a02b4f6188783ef91a5f1e"><div class="ttname"><a href="pff_8h.html#add6d85d1e7a02b4f6188783ef91a5f1e">AM_RDO</a></div><div class="ttdeci">#define AM_RDO</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00162">pff.h:162</a></div></div>
<div class="ttc" id="ff_8c_html_a2db528782a021797b34bdc6e9e9de1c3"><div class="ttname"><a href="ff_8c.html#a2db528782a021797b34bdc6e9e9de1c3">NS_DOT</a></div><div class="ttdeci">#define NS_DOT</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00381">ff.c:381</a></div></div>
<div class="ttc" id="tff_8c_html_addeee88e846cc637a785bcaf23b45b5e"><div class="ttname"><a href="tff_8c.html#addeee88e846cc637a785bcaf23b45b5e">dir</a></div><div class="ttdeci">byte * dir</div><div class="ttdef"><b>Definition:</b> <a href="tff_8c_source.html#l00068">tff.c:68</a></div></div>
<div class="ttc" id="tff_8c_html_aab43d7bcfb87e7ef71138d651ce1bea1"><div class="ttname"><a href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a></div><div class="ttdeci">FRESULT res</div><div class="ttdef"><b>Definition:</b> <a href="tff_8c_source.html#l00065">tff.c:65</a></div></div>
<div class="ttc" id="ff_8c_html_a40aba328871d2be78bfdd74b390275db"><div class="ttname"><a href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a></div><div class="ttdeci">#define DEF_NAMEBUF</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00477">ff.c:477</a></div></div>
<div class="ttc" id="pff_8h_html_a3a9db44e978ed6c13b641e092d4cd7d3"><div class="ttname"><a href="pff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a></div><div class="ttdeci">#define AM_DIR</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00167">pff.h:167</a></div></div>
<div class="ttc" id="struct_d_i_r_html_aada1acd6ce100ead798e712b18c49547"><div class="ttname"><a href="struct_d_i_r.html#aada1acd6ce100ead798e712b18c49547">DIR::sclust</a></div><div class="ttdeci">CLUST sclust</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00113">tff.h:113</a></div></div>
<div class="ttc" id="ff_8c_html_a19cd426084600d6007eb6f976c81fbdf"><div class="ttname"><a href="ff_8c.html#a19cd426084600d6007eb6f976c81fbdf">LD_CLUST</a></div><div class="ttdeci">#define LD_CLUST(dir)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00149">ff.c:149</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aafaa718d1a487e12a8f0087173dba0b9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_utime </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_f_i_l_i_n_f_o.html">FILINFO</a> *&#160;</td>
          <td class="paramname"><em>fno</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l03281">3281</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>References <a class="el" href="ffconf_8h_source.html#l00113">_FS_RPATH</a>, <a class="el" href="ff_8c_source.html#l00477">DEF_NAMEBUF</a>, <a class="el" href="tff_8c_source.html#l00068">dir</a>, <a class="el" href="ff_8h_source.html#l00149">DIR::dir</a>, <a class="el" href="ff_8c_source.html#l00437">DIR_WrtDate</a>, <a class="el" href="ff_8c_source.html#l00436">DIR_WrtTime</a>, <a class="el" href="tff_8c_source.html#l00066">dj</a>, <a class="el" href="tff_8h_source.html#l00140">FILINFO::fdate</a>, <a class="el" href="ff_8h_source.html#l00150">DIR::fn</a>, <a class="el" href="tff_8h_source.html#l00154">FR_INVALID_NAME</a>, <a class="el" href="pff_8h_source.html#l00120">FR_OK</a>, <a class="el" href="ff_8c_source.html#l00479">FREE_BUF</a>, <a class="el" href="tff_8h_source.html#l00112">DIR::fs</a>, <a class="el" href="tff_8h_source.html#l00141">FILINFO::ftime</a>, <a class="el" href="ff_8c_source.html#l00478">INIT_BUF</a>, <a class="el" href="ff_8c_source.html#l00130">LEAVE_FF</a>, <a class="el" href="ff_8c_source.html#l00375">NS</a>, <a class="el" href="tff_8c_source.html#l00065">res</a>, <a class="el" href="pff_8h_source.html#l00236">ST_WORD</a>, and <a class="el" href="ff_8h_source.html#l00082">FATFS::wflag</a>.</p>
<div class="fragment"><div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;  {</div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;    <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> <a class="code" href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a>;</div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;    <a class="code" href="struct_d_i_r.html">DIR</a> <a class="code" href="tff_8c.html#a90affc32512431e143844fa9721bf9d9">dj</a>;</div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;    <a class="code" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a> *<a class="code" href="tff_8c.html#addeee88e846cc637a785bcaf23b45b5e">dir</a>;</div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;    <a class="code" href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a>;</div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;</div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;    res = chk_mounted(&amp;path, &amp;dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, 1);</div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;    <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;        <a class="code" href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a>(dj);</div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;        res = follow_path(&amp;dj, path); <span class="comment">/* Follow the file path */</span></div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;        <a class="code" href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a>();</div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ffconf_8h.html#a52faf11025401372f71e9d81905b7af4">_FS_RPATH</a> &amp;&amp; res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> &amp;&amp; (dj.<a class="code" href="struct_d_i_r.html#af5245f40680a50c52ce1028bbe62d9f9">fn</a>[<a class="code" href="ff_8c.html#a06c201f90533d5b49cd039c960327968">NS</a>] &amp; <a class="code" href="ff_8c.html#a2db528782a021797b34bdc6e9e9de1c3">NS_DOT</a>))</div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;            res = <a class="code" href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;</div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;        <span class="keywordflow">if</span> (res == <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;            dir = dj.<a class="code" href="struct_d_i_r.html#ab9e26ba9262ce0f12d043d71dd4b2cf5">dir</a>;</div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;            <span class="keywordflow">if</span> (!dir) { <span class="comment">/* Root directory */</span></div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;                res = <a class="code" href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;</div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;            } <span class="keywordflow">else</span> { <span class="comment">/* File or sub-directory */</span></div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;                <a class="code" href="pff_8h.html#a95ceb4c25b216e71baa7102939edfd0d">ST_WORD</a>(dir+<a class="code" href="ff_8c.html#ab9452d336adeece2a1b0b54ab35b8a59">DIR_WrtTime</a>, fno-&gt;<a class="code" href="struct_f_i_l_i_n_f_o.html#a3f6ad56d9c47d7ca879332e034917077">ftime</a>);</div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;                <a class="code" href="pff_8h.html#a95ceb4c25b216e71baa7102939edfd0d">ST_WORD</a>(dir+<a class="code" href="ff_8c.html#abed17fa699511b09cbf64961373d63a4">DIR_WrtDate</a>, fno-&gt;<a class="code" href="struct_f_i_l_i_n_f_o.html#a9478c5225c4f3a09d739dbc2245a72fd">fdate</a>);</div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;                dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a34eeef694e75229e1608f07acba3ed1c">wflag</a> = 1;</div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;                res = sync(dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>);</div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;            }</div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;        }</div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;    }</div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;</div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;    <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(dj.<a class="code" href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, res);</div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;}</div>
<div class="ttc" id="ff_8c_html_a966fe5792671b39db1ccf655a8c1af8d"><div class="ttname"><a href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a></div><div class="ttdeci">#define INIT_BUF(dobj)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00478">ff.c:478</a></div></div>
<div class="ttc" id="tff_8h_html_a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45"><div class="ttname"><a href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a></div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00154">tff.h:154</a></div></div>
<div class="ttc" id="struct_d_i_r_html_ab9e26ba9262ce0f12d043d71dd4b2cf5"><div class="ttname"><a href="struct_d_i_r.html#ab9e26ba9262ce0f12d043d71dd4b2cf5">DIR::dir</a></div><div class="ttdeci">PF_BYTE * dir</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00149">ff.h:149</a></div></div>
<div class="ttc" id="ff_8c_html_a06c201f90533d5b49cd039c960327968"><div class="ttname"><a href="ff_8c.html#a06c201f90533d5b49cd039c960327968">NS</a></div><div class="ttdeci">#define NS</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00375">ff.c:375</a></div></div>
<div class="ttc" id="struct_d_i_r_html_af5245f40680a50c52ce1028bbe62d9f9"><div class="ttname"><a href="struct_d_i_r.html#af5245f40680a50c52ce1028bbe62d9f9">DIR::fn</a></div><div class="ttdeci">PF_BYTE * fn</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00150">ff.h:150</a></div></div>
<div class="ttc" id="struct_f_i_l_i_n_f_o_html_a9478c5225c4f3a09d739dbc2245a72fd"><div class="ttname"><a href="struct_f_i_l_i_n_f_o.html#a9478c5225c4f3a09d739dbc2245a72fd">FILINFO::fdate</a></div><div class="ttdeci">word fdate</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00140">tff.h:140</a></div></div>
<div class="ttc" id="struct_d_i_r_html"><div class="ttname"><a href="struct_d_i_r.html">DIR</a></div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00109">tff.h:109</a></div></div>
<div class="ttc" id="ff_8c_html_a7e653d8ca0ae09faa49cd5b7335fea84"><div class="ttname"><a href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a></div><div class="ttdeci">#define LEAVE_FF(fs, res)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00130">ff.c:130</a></div></div>
<div class="ttc" id="ff_8c_html_abed17fa699511b09cbf64961373d63a4"><div class="ttname"><a href="ff_8c.html#abed17fa699511b09cbf64961373d63a4">DIR_WrtDate</a></div><div class="ttdeci">#define DIR_WrtDate</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00437">ff.c:437</a></div></div>
<div class="ttc" id="ffconf_8h_html_a52faf11025401372f71e9d81905b7af4"><div class="ttname"><a href="ffconf_8h.html#a52faf11025401372f71e9d81905b7af4">_FS_RPATH</a></div><div class="ttdeci">#define _FS_RPATH</div><div class="ttdef"><b>Definition:</b> <a href="ffconf_8h_source.html#l00113">ffconf.h:113</a></div></div>
<div class="ttc" id="p32_2include_2pinguino_2libraries_2sd_2integer_8h_html_aa1e36ce100a7ff1291e95b4515d42e65"><div class="ttname"><a href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a></div><div class="ttdeci">unsigned char PF_BYTE</div><div class="ttdef"><b>Definition:</b> <a href="p32_2include_2pinguino_2libraries_2sd_2integer_8h_source.html#l00008">integer.h:8</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a></div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00120">pff.h:120</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44c"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a></div><div class="ttdeci">FRESULT</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00119">pff.h:119</a></div></div>
<div class="ttc" id="tff_8c_html_a90affc32512431e143844fa9721bf9d9"><div class="ttname"><a href="tff_8c.html#a90affc32512431e143844fa9721bf9d9">dj</a></div><div class="ttdeci">DIR dj</div><div class="ttdef"><b>Definition:</b> <a href="tff_8c_source.html#l00066">tff.c:66</a></div></div>
<div class="ttc" id="pff_8h_html_a95ceb4c25b216e71baa7102939edfd0d"><div class="ttname"><a href="pff_8h.html#a95ceb4c25b216e71baa7102939edfd0d">ST_WORD</a></div><div class="ttdeci">#define ST_WORD(ptr, val)</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00236">pff.h:236</a></div></div>
<div class="ttc" id="ff_8c_html_aba6d6942b59f11cf285bdbfb7e38f1fa"><div class="ttname"><a href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a></div><div class="ttdeci">#define FREE_BUF()</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00479">ff.c:479</a></div></div>
<div class="ttc" id="struct_d_i_r_html_a472e3612956e3ffb3ab823c37ca33250"><div class="ttname"><a href="struct_d_i_r.html#a472e3612956e3ffb3ab823c37ca33250">DIR::fs</a></div><div class="ttdeci">FATFS * fs</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00112">tff.h:112</a></div></div>
<div class="ttc" id="struct_f_i_l_i_n_f_o_html_a3f6ad56d9c47d7ca879332e034917077"><div class="ttname"><a href="struct_f_i_l_i_n_f_o.html#a3f6ad56d9c47d7ca879332e034917077">FILINFO::ftime</a></div><div class="ttdeci">word ftime</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00141">tff.h:141</a></div></div>
<div class="ttc" id="ff_8c_html_ab9452d336adeece2a1b0b54ab35b8a59"><div class="ttname"><a href="ff_8c.html#ab9452d336adeece2a1b0b54ab35b8a59">DIR_WrtTime</a></div><div class="ttdeci">#define DIR_WrtTime</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00436">ff.c:436</a></div></div>
<div class="ttc" id="ff_8c_html_a2db528782a021797b34bdc6e9e9de1c3"><div class="ttname"><a href="ff_8c.html#a2db528782a021797b34bdc6e9e9de1c3">NS_DOT</a></div><div class="ttdeci">#define NS_DOT</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00381">ff.c:381</a></div></div>
<div class="ttc" id="tff_8c_html_addeee88e846cc637a785bcaf23b45b5e"><div class="ttname"><a href="tff_8c.html#addeee88e846cc637a785bcaf23b45b5e">dir</a></div><div class="ttdeci">byte * dir</div><div class="ttdef"><b>Definition:</b> <a href="tff_8c_source.html#l00068">tff.c:68</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_a34eeef694e75229e1608f07acba3ed1c"><div class="ttname"><a href="struct_f_a_t_f_s.html#a34eeef694e75229e1608f07acba3ed1c">FATFS::wflag</a></div><div class="ttdeci">PF_BYTE wflag</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00082">ff.h:82</a></div></div>
<div class="ttc" id="tff_8c_html_aab43d7bcfb87e7ef71138d651ce1bea1"><div class="ttname"><a href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a></div><div class="ttdeci">FRESULT res</div><div class="ttdef"><b>Definition:</b> <a href="tff_8c_source.html#l00065">tff.c:65</a></div></div>
<div class="ttc" id="ff_8c_html_a40aba328871d2be78bfdd74b390275db"><div class="ttname"><a href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a></div><div class="ttdeci">#define DEF_NAMEBUF</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00477">ff.c:477</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae6a4dfae8a9e308bdb2283a37ef680f2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="p8_2pinguino_2libraries_2integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>&#160;</td>
          <td class="paramname"><em>btw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="p8_2pinguino_2libraries_2integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> *&#160;</td>
          <td class="paramname"><em>bw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l02404">2404</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>References <a class="el" href="ff_8c_source.html#l00133">ABORT</a>, <a class="el" href="ff_8h_source.html#l00134">FIL::buf</a>, <a class="el" href="ff_8h_source.html#l00128">FIL::cltbl</a>, <a class="el" href="ff_8h_source.html#l00121">FIL::clust</a>, <a class="el" href="ff_8c_source.html#l00764">clust2sect()</a>, <a class="el" href="tff_8h_source.html#l00123">FIL::csect</a>, <a class="el" href="tff_8h_source.html#l00101">FATFS::csize</a>, <a class="el" href="tff_8h_source.html#l00128">FIL::curr_clust</a>, <a class="el" href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#a77ba19c0c97a900fac95999446e32308">disk_read()</a>, <a class="el" href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#a7ffe0ccc946550a260d00871c6b636e7">disk_write()</a>, <a class="el" href="ff_8h_source.html#l00079">FATFS::drv</a>, <a class="el" href="ff_8h_source.html#l00122">FIL::dsect</a>, <a class="el" href="ff_8h_source.html#l00290">FA__DIRTY</a>, <a class="el" href="tff_8h_source.html#l00217">FA__ERROR</a>, <a class="el" href="tff_8h_source.html#l00215">FA__WRITTEN</a>, <a class="el" href="tff_8h_source.html#l00211">FA_WRITE</a>, <a class="el" href="tff_8h_source.html#l00122">FIL::flag</a>, <a class="el" href="tff_8h_source.html#l00125">FIL::fptr</a>, <a class="el" href="tff_8h_source.html#l00156">FR_DENIED</a>, <a class="el" href="pff_8h_source.html#l00121">FR_DISK_ERR</a>, <a class="el" href="ff_8h_source.html#l00180">FR_INT_ERR</a>, <a class="el" href="pff_8h_source.html#l00120">FR_OK</a>, <a class="el" href="tff_8h_source.html#l00158">FR_RW_ERROR</a>, <a class="el" href="tff_8h_source.html#l00124">FIL::fs</a>, <a class="el" href="tff_8h_source.html#l00126">FIL::fsize</a>, <a class="el" href="itdb02__graph_8h_source.html#l00176">fsize</a>, <a class="el" href="tff_8h_source.html#l00121">FIL::id</a>, <a class="el" href="ff_8c_source.html#l00130">LEAVE_FF</a>, <a class="el" href="tff_8h_source.html#l00090">FATFS::max_clust</a>, <a class="el" href="tff_8h_source.html#l00127">FIL::org_clust</a>, <a class="el" href="tff_8c_source.html#l00065">res</a>, <a class="el" href="p8_2pinguino_2libraries_2sd_2diskio_8h_source.html#l00015">RES_OK</a>, <a class="el" href="ff_8h_source.html#l00120">FIL::sclust</a>, <a class="el" href="ff_8c_source.html#l00118">SS</a>, <a class="el" href="ff_8h_source.html#l00082">FATFS::wflag</a>, <a class="el" href="tff_8h_source.html#l00104">FATFS::win</a>, <a class="el" href="tff_8h_source.html#l00103">FATFS::winflag</a>, and <a class="el" href="tff_8h_source.html#l00085">FATFS::winsect</a>.</p>
<div class="fragment"><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;  {</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;    <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> <a class="code" href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a>;</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;    <a class="code" href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> clst, sect;</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;    <a class="code" href="p8_2pinguino_2libraries_2integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> wcnt, cc;</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;    <span class="keyword">const</span> <a class="code" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a> *wbuff = buff;</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;    <a class="code" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a> csect;</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;    *bw = 0; <span class="comment">/* Initialize byte counter */</span></div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;    res = validate(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a588688f55d57bf8a7e8c1d2cf88a3c56">id</a>); <span class="comment">/* Check validity */</span></div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;    <span class="keywordflow">if</span> (res != <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>)</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, res);</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;    <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#ae84669505a47c55d6246560a290a298d">flag</a> &amp; <a class="code" href="tff_8h.html#ad3b47fe8126573b17752a9a242b76b9a">FA__ERROR</a>) <span class="comment">/* Aborted file? */</span></div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;    <span class="keywordflow">if</span> (!(fp-&gt;<a class="code" href="struct_f_i_l.html#ae84669505a47c55d6246560a290a298d">flag</a> &amp; <a class="code" href="tff_8h.html#afa366963220c89b882c0361794020c14">FA_WRITE</a>)) <span class="comment">/* Check access mode */</span></div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>);</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>) (fp-&gt;<a class="code" href="struct_f_i_l.html#a7582a0b3a658c0543f6cdc7585d84f7c">fsize</a> + btw) &lt; fp-&gt;<a class="code" href="struct_f_i_l.html#a7582a0b3a658c0543f6cdc7585d84f7c">fsize</a>)</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;        btw = 0; <span class="comment">/* File size cannot reach 4GB */</span></div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;    <span class="keywordflow">for</span> (; btw; <span class="comment">/* Repeat until all data written */</span></div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;    wbuff += wcnt, fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a> += wcnt, *bw += wcnt, btw -= wcnt) {</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;        <span class="keywordflow">if</span> ((fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a> % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>)) == 0) { <span class="comment">/* On the sector boundary? */</span></div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;            csect = (<a class="code" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a>) (fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a> / <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>) &amp; (fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#af8143a50ac7be72544022dd46a7013da">csize</a> - 1)); <span class="comment">/* Sector offset in the cluster */</span></div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;            <span class="keywordflow">if</span> (!csect) { <span class="comment">/* On the cluster boundary? */</span></div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;                <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a> == 0) { <span class="comment">/* On the top of the file? */</span></div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;                    clst = fp-&gt;<a class="code" href="struct_f_i_l.html#ad5d52f3fde971d2a05ff777a6243c252">sclust</a>; <span class="comment">/* Follow from the origin */</span></div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;                    <span class="keywordflow">if</span> (clst == 0) <span class="comment">/* When no cluster is allocated, */</span></div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;                        fp-&gt;<a class="code" href="struct_f_i_l.html#ad5d52f3fde971d2a05ff777a6243c252">sclust</a> = clst = create_chain(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, 0); <span class="comment">/* Create a new cluster chain */</span></div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;                } <span class="keywordflow">else</span> { <span class="comment">/* Middle or end of the file */</span></div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;<span class="preprocessor">#if _USE_FASTSEEK</span></div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;<span class="preprocessor"></span>                    <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#a807e335a4d92639456ac4273cb0de4cb">cltbl</a>)</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;                        clst = clmt_clust(fp, fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a>); <span class="comment">/* Get cluster# from the CLMT */</span></div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;<span class="preprocessor"></span>                        clst = create_chain(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#ac134c1b4645be670eb5207032e714616">clust</a>); <span class="comment">/* Follow or stretch cluster chain on the FAT */</span></div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;                }</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;                <span class="keywordflow">if</span> (clst == 0)</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;                    <span class="keywordflow">break</span>; <span class="comment">/* Could not allocate a new cluster (disk full) */</span></div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;                <span class="keywordflow">if</span> (clst == 1)</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;                    <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;                <span class="keywordflow">if</span> (clst == 0xFFFFFFFF)</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;                    <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;                fp-&gt;<a class="code" href="struct_f_i_l.html#ac134c1b4645be670eb5207032e714616">clust</a> = clst; <span class="comment">/* Update current cluster */</span></div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;            }</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;<span class="preprocessor">#if _FS_TINY</span></div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;<span class="preprocessor"></span>            <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a5ee19a26d1dfd79d52fbba59cc792da3">winsect</a> == fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a> &amp;&amp; move_window(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, 0)) <span class="comment">/* Write-back sector cache */</span></div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;            <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;<span class="preprocessor"></span>            <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#ae84669505a47c55d6246560a290a298d">flag</a> &amp; <a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>) { <span class="comment">/* Write-back sector cache */</span></div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#a7ffe0ccc946550a260d00871c6b636e7">disk_write</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#aabcebc0763f1acbd8928158570150c9f">drv</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a8b83239f9e2ae594c0cbc75d23ddff89">buf</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a>, 1) != <a class="code" href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>)</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;                    <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;                fp-&gt;<a class="code" href="struct_f_i_l.html#ae84669505a47c55d6246560a290a298d">flag</a> &amp;= ~<a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>;</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;            }</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;<span class="preprocessor"></span>            sect = <a class="code" href="ff_8c.html#a7519abb60fe91f6aa1d17f64fbae123a">clust2sect</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#ac134c1b4645be670eb5207032e714616">clust</a>); <span class="comment">/* Get current sector */</span></div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;            <span class="keywordflow">if</span> (!sect)</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;                <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;            sect += csect;</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;            cc = btw / <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>); <span class="comment">/* When remaining bytes &gt;= sector size, */</span></div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;            <span class="keywordflow">if</span> (cc) { <span class="comment">/* Write maximum contiguous sectors directly */</span></div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;                <span class="keywordflow">if</span> (csect + cc &gt; fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#af8143a50ac7be72544022dd46a7013da">csize</a>) <span class="comment">/* Clip at cluster boundary */</span></div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;                    cc = fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#af8143a50ac7be72544022dd46a7013da">csize</a> - csect;</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#a7ffe0ccc946550a260d00871c6b636e7">disk_write</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#aabcebc0763f1acbd8928158570150c9f">drv</a>, wbuff, sect, (<a class="code" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a>) cc)</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;                        != <a class="code" href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>)</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;                    <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;<span class="preprocessor">#if _FS_TINY</span></div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;<span class="preprocessor"></span>                <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a5ee19a26d1dfd79d52fbba59cc792da3">winsect</a> - sect &lt; cc) { <span class="comment">/* Refill sector cache if it gets invalidated by the direct write */</span></div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;                    mem_cpy(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a54541860d8273ee2709def80ccc3e271">win</a>, wbuff + ((fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a5ee19a26d1dfd79d52fbba59cc792da3">winsect</a> - sect) * <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>)), <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>));</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;                    fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a34eeef694e75229e1608f07acba3ed1c">wflag</a> = 0;</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;                }</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;<span class="preprocessor"></span>                <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a> - sect &lt; cc) { <span class="comment">/* Refill sector cache if it gets invalidated by the direct write */</span></div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;                    mem_cpy(fp-&gt;<a class="code" href="struct_f_i_l.html#a8b83239f9e2ae594c0cbc75d23ddff89">buf</a>, wbuff + ((fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a> - sect) * <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>)),</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;                            <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>));</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;                    fp-&gt;<a class="code" href="struct_f_i_l.html#ae84669505a47c55d6246560a290a298d">flag</a> &amp;= ~<a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>;</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;                }</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;<span class="preprocessor"></span>                wcnt = <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>) * cc; <span class="comment">/* Number of bytes transferred */</span></div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;            }</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;<span class="preprocessor">#if _FS_TINY</span></div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;<span class="preprocessor"></span>            <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a> &gt;= fp-&gt;<a class="code" href="struct_f_i_l.html#a7582a0b3a658c0543f6cdc7585d84f7c">fsize</a>) { <span class="comment">/* Avoid silly cache filling at growing edge */</span></div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;                <span class="keywordflow">if</span> (move_window(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, 0)) <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;                fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a5ee19a26d1dfd79d52fbba59cc792da3">winsect</a> = sect;</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;            }</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;<span class="preprocessor"></span>            <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a> != sect) { <span class="comment">/* Fill sector cache with file data */</span></div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;                <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a> &lt; fp-&gt;<a class="code" href="struct_f_i_l.html#a7582a0b3a658c0543f6cdc7585d84f7c">fsize</a> &amp;&amp; <a class="code" href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#a77ba19c0c97a900fac95999446e32308">disk_read</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#aabcebc0763f1acbd8928158570150c9f">drv</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a8b83239f9e2ae594c0cbc75d23ddff89">buf</a>,</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;                        sect, 1) != <a class="code" href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>)</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;                    <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;            }</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;<span class="preprocessor"></span>            fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a> = sect;</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;        }</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;        wcnt = <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>) - (fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a> % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>));<span class="comment">/* Put partial sector into file I/O buffer */</span></div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;        <span class="keywordflow">if</span> (wcnt &gt; btw)</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;            wcnt = btw;</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;<span class="preprocessor">#if _FS_TINY</span></div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;<span class="preprocessor"></span>        <span class="keywordflow">if</span> (move_window(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a>)) <span class="comment">/* Move sector window */</span></div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;        <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;        mem_cpy(&amp;fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a54541860d8273ee2709def80ccc3e271">win</a>[fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a> % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>)], wbuff, wcnt); <span class="comment">/* Fit partial sector */</span></div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;        fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a34eeef694e75229e1608f07acba3ed1c">wflag</a> = 1;</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;<span class="preprocessor"></span>        mem_cpy(&amp;fp-&gt;<a class="code" href="struct_f_i_l.html#a8b83239f9e2ae594c0cbc75d23ddff89">buf</a>[fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a> % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>)], wbuff, wcnt); <span class="comment">/* Fit partial sector */</span></div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;        fp-&gt;<a class="code" href="struct_f_i_l.html#ae84669505a47c55d6246560a290a298d">flag</a> |= <a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>;</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;<span class="preprocessor"></span>    }</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;    <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a> &gt; fp-&gt;<a class="code" href="struct_f_i_l.html#a7582a0b3a658c0543f6cdc7585d84f7c">fsize</a>)</div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;        fp-&gt;<a class="code" href="struct_f_i_l.html#a7582a0b3a658c0543f6cdc7585d84f7c">fsize</a> = fp-&gt;<a class="code" href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">fptr</a>; <span class="comment">/* Update file size if needed */</span></div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;    fp-&gt;<a class="code" href="struct_f_i_l.html#ae84669505a47c55d6246560a290a298d">flag</a> |= <a class="code" href="tff_8h.html#ac4b7d5223f84df91c306ffbff536fae4">FA__WRITTEN</a>; <span class="comment">/* Set file change flag */</span></div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;    <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">fs</a>, <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>);</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;}</div>
<div class="ttc" id="struct_f_i_l_html_ae84669505a47c55d6246560a290a298d"><div class="ttname"><a href="struct_f_i_l.html#ae84669505a47c55d6246560a290a298d">FIL::flag</a></div><div class="ttdeci">byte flag</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00122">tff.h:122</a></div></div>
<div class="ttc" id="tff_8h_html_a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d"><div class="ttname"><a href="tff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a></div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00156">tff.h:156</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a7582a0b3a658c0543f6cdc7585d84f7c"><div class="ttname"><a href="struct_f_i_l.html#a7582a0b3a658c0543f6cdc7585d84f7c">FIL::fsize</a></div><div class="ttdeci">dword fsize</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00126">tff.h:126</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a472e3612956e3ffb3ab823c37ca33250"><div class="ttname"><a href="struct_f_i_l.html#a472e3612956e3ffb3ab823c37ca33250">FIL::fs</a></div><div class="ttdeci">FATFS * fs</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00124">tff.h:124</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_a5ee19a26d1dfd79d52fbba59cc792da3"><div class="ttname"><a href="struct_f_a_t_f_s.html#a5ee19a26d1dfd79d52fbba59cc792da3">FATFS::winsect</a></div><div class="ttdeci">dword winsect</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00085">tff.h:85</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a></div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00121">pff.h:121</a></div></div>
<div class="ttc" id="tff_8h_html_afa366963220c89b882c0361794020c14"><div class="ttname"><a href="tff_8h.html#afa366963220c89b882c0361794020c14">FA_WRITE</a></div><div class="ttdeci">#define FA_WRITE</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00211">tff.h:211</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a272171f74215002aba31a89428f1d290"><div class="ttname"><a href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">FIL::dsect</a></div><div class="ttdeci">DWORD dsect</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00122">ff.h:122</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_aabcebc0763f1acbd8928158570150c9f"><div class="ttname"><a href="struct_f_a_t_f_s.html#aabcebc0763f1acbd8928158570150c9f">FATFS::drv</a></div><div class="ttdeci">PF_BYTE drv</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00079">ff.h:79</a></div></div>
<div class="ttc" id="ff_8c_html_a41e4c46636679236568cf50b5535847f"><div class="ttname"><a href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a></div><div class="ttdeci">#define ABORT(fs, res)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00133">ff.c:133</a></div></div>
<div class="ttc" id="ff_8c_html_a7e653d8ca0ae09faa49cd5b7335fea84"><div class="ttname"><a href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a></div><div class="ttdeci">#define LEAVE_FF(fs, res)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00130">ff.c:130</a></div></div>
<div class="ttc" id="ff_8c_html_a7519abb60fe91f6aa1d17f64fbae123a"><div class="ttname"><a href="ff_8c.html#a7519abb60fe91f6aa1d17f64fbae123a">clust2sect</a></div><div class="ttdeci">DWORD clust2sect(FATFS *fs, DWORD clst)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00764">ff.c:764</a></div></div>
<div class="ttc" id="tff_8h_html_ad3b47fe8126573b17752a9a242b76b9a"><div class="ttname"><a href="tff_8h.html#ad3b47fe8126573b17752a9a242b76b9a">FA__ERROR</a></div><div class="ttdeci">#define FA__ERROR</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00217">tff.h:217</a></div></div>
<div class="ttc" id="struct_f_i_l_html_ac134c1b4645be670eb5207032e714616"><div class="ttname"><a href="struct_f_i_l.html#ac134c1b4645be670eb5207032e714616">FIL::clust</a></div><div class="ttdeci">DWORD clust</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00121">ff.h:121</a></div></div>
<div class="ttc" id="ff_8h_html_a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76"><div class="ttname"><a href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a></div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00180">ff.h:180</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a807e335a4d92639456ac4273cb0de4cb"><div class="ttname"><a href="struct_f_i_l.html#a807e335a4d92639456ac4273cb0de4cb">FIL::cltbl</a></div><div class="ttdeci">DWORD * cltbl</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00128">ff.h:128</a></div></div>
<div class="ttc" id="p32_2include_2pinguino_2libraries_2sd_2integer_8h_html_aa1e36ce100a7ff1291e95b4515d42e65"><div class="ttname"><a href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a></div><div class="ttdeci">unsigned char PF_BYTE</div><div class="ttdef"><b>Definition:</b> <a href="p32_2include_2pinguino_2libraries_2sd_2integer_8h_source.html#l00008">integer.h:8</a></div></div>
<div class="ttc" id="p8_2pinguino_2libraries_2sd_2diskio_8h_html_a7ffe0ccc946550a260d00871c6b636e7"><div class="ttname"><a href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#a7ffe0ccc946550a260d00871c6b636e7">disk_write</a></div><div class="ttdeci">DRESULT disk_write(const u8 *, u32, u8)</div></div>
<div class="ttc" id="p8_2pinguino_2libraries_2integer_8h_html_ad342ac907eb044443153a22f964bf0af"><div class="ttname"><a href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a></div><div class="ttdeci">unsigned long DWORD</div><div class="ttdef"><b>Definition:</b> <a href="p8_2pinguino_2libraries_2integer_8h_source.html#l00033">integer.h:33</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a></div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00120">pff.h:120</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44c"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a></div><div class="ttdeci">FRESULT</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00119">pff.h:119</a></div></div>
<div class="ttc" id="struct_f_i_l_html_ad5d52f3fde971d2a05ff777a6243c252"><div class="ttname"><a href="struct_f_i_l.html#ad5d52f3fde971d2a05ff777a6243c252">FIL::sclust</a></div><div class="ttdeci">DWORD sclust</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00120">ff.h:120</a></div></div>
<div class="ttc" id="ff_8h_html_a5b2962e3616a1e9eb709d95f4c75c67c"><div class="ttname"><a href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a></div><div class="ttdeci">#define FA__DIRTY</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00290">ff.h:290</a></div></div>
<div class="ttc" id="p8_2pinguino_2libraries_2sd_2diskio_8h_html_aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737"><div class="ttname"><a href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a></div><div class="ttdef"><b>Definition:</b> <a href="p8_2pinguino_2libraries_2sd_2diskio_8h_source.html#l00015">diskio.h:15</a></div></div>
<div class="ttc" id="tff_8h_html_ac4b7d5223f84df91c306ffbff536fae4"><div class="ttname"><a href="tff_8h.html#ac4b7d5223f84df91c306ffbff536fae4">FA__WRITTEN</a></div><div class="ttdeci">#define FA__WRITTEN</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00215">tff.h:215</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a5afdaf3451d484cc97e07228b775ccf1"><div class="ttname"><a href="struct_f_i_l.html#a5afdaf3451d484cc97e07228b775ccf1">FIL::fptr</a></div><div class="ttdeci">dword fptr</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00125">tff.h:125</a></div></div>
<div class="ttc" id="p8_2pinguino_2libraries_2integer_8h_html_a36cb3b01d81ffd844bbbfb54003e06ec"><div class="ttname"><a href="p8_2pinguino_2libraries_2integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a></div><div class="ttdeci">unsigned int UINT</div><div class="ttdef"><b>Definition:</b> <a href="p8_2pinguino_2libraries_2integer_8h_source.html#l00017">integer.h:17</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_af8143a50ac7be72544022dd46a7013da"><div class="ttname"><a href="struct_f_a_t_f_s.html#af8143a50ac7be72544022dd46a7013da">FATFS::csize</a></div><div class="ttdeci">byte csize</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00101">tff.h:101</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_a34eeef694e75229e1608f07acba3ed1c"><div class="ttname"><a href="struct_f_a_t_f_s.html#a34eeef694e75229e1608f07acba3ed1c">FATFS::wflag</a></div><div class="ttdeci">PF_BYTE wflag</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00082">ff.h:82</a></div></div>
<div class="ttc" id="tff_8c_html_aab43d7bcfb87e7ef71138d651ce1bea1"><div class="ttname"><a href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a></div><div class="ttdeci">FRESULT res</div><div class="ttdef"><b>Definition:</b> <a href="tff_8c_source.html#l00065">tff.c:65</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a8b83239f9e2ae594c0cbc75d23ddff89"><div class="ttname"><a href="struct_f_i_l.html#a8b83239f9e2ae594c0cbc75d23ddff89">FIL::buf</a></div><div class="ttdeci">PF_BYTE buf[_MAX_SS]</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00134">ff.h:134</a></div></div>
<div class="ttc" id="p8_2pinguino_2libraries_2sd_2diskio_8h_html_a77ba19c0c97a900fac95999446e32308"><div class="ttname"><a href="p8_2pinguino_2libraries_2sd_2diskio_8h.html#a77ba19c0c97a900fac95999446e32308">disk_read</a></div><div class="ttdeci">DRESULT disk_read(u8 *, u32, u8)</div></div>
<div class="ttc" id="ff_8c_html_a42b5140fc5e09a53c8f4cba66dc0e6c1"><div class="ttname"><a href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a></div><div class="ttdeci">#define SS(fs)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00118">ff.c:118</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_a54541860d8273ee2709def80ccc3e271"><div class="ttname"><a href="struct_f_a_t_f_s.html#a54541860d8273ee2709def80ccc3e271">FATFS::win</a></div><div class="ttdeci">byte win[512]</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00104">tff.h:104</a></div></div>
<div class="ttc" id="struct_f_i_l_html_a588688f55d57bf8a7e8c1d2cf88a3c56"><div class="ttname"><a href="struct_f_i_l.html#a588688f55d57bf8a7e8c1d2cf88a3c56">FIL::id</a></div><div class="ttdeci">word id</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00121">tff.h:121</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a65611adf1626e5e08da77cd33a98dd8b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> get_fat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_a_t_f_s.html">FATFS</a> *&#160;</td>
          <td class="paramname"><em>fs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>&#160;</td>
          <td class="paramname"><em>clst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00778">778</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>References <a class="el" href="tff_8h_source.html#l00086">FATFS::fatbase</a>, <a class="el" href="pff_8h_source.html#l00155">FS_FAT12</a>, <a class="el" href="pff_8h_source.html#l00156">FS_FAT16</a>, <a class="el" href="pff_8h_source.html#l00157">FS_FAT32</a>, <a class="el" href="tff_8h_source.html#l00100">FATFS::fs_type</a>, <a class="el" href="pff_8h_source.html#l00235">LD_DWORD</a>, <a class="el" href="pff_8h_source.html#l00234">LD_WORD</a>, <a class="el" href="ff_8h_source.html#l00100">FATFS::n_fatent</a>, <a class="el" href="ff_8c_source.html#l00118">SS</a>, and <a class="el" href="tff_8h_source.html#l00104">FATFS::win</a>.</p>

<p>Referenced by <a class="el" href="ff_8c_source.html#l02989">f_getfree()</a>, <a class="el" href="ff_8c_source.html#l02721">f_lseek()</a>, <a class="el" href="ff_8c_source.html#l02301">f_read()</a>, and <a class="el" href="ff_8c_source.html#l03062">f_truncate()</a>.</p>
<div class="fragment"><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  {</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    <a class="code" href="p8_2pinguino_2libraries_2integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> wc, bc;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    <a class="code" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a> *p;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="keywordflow">if</span> (clst &lt; 2 || clst &gt;= fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a388eb0fa0f3f1449a6ab88c6674e16fc">n_fatent</a>) <span class="comment">/* Chack range */</span></div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <span class="keywordflow">switch</span> (fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#aee58d0bf64f06146927e78ad026b06ac">fs_type</a>) {</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="pff_8h.html#aab755aa1b4f81f4aabee4a5d4738cfb0">FS_FAT12</a>:</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        bc = (<a class="code" href="p8_2pinguino_2libraries_2integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>) clst;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        bc += bc / 2;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        <span class="keywordflow">if</span> (move_window(fs, fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a4c158f002bd87f70c1595baef8888d96">fatbase</a> + (bc / <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs))))</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        wc = fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a54541860d8273ee2709def80ccc3e271">win</a>[bc % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs)];</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;        bc++;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        <span class="keywordflow">if</span> (move_window(fs, fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a4c158f002bd87f70c1595baef8888d96">fatbase</a> + (bc / <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs))))</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        wc |= fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a54541860d8273ee2709def80ccc3e271">win</a>[bc % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs)] &lt;&lt; 8;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        <span class="keywordflow">return</span> (clst &amp; 1) ? (wc &gt;&gt; 4) : (wc &amp; 0xFFF);</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="pff_8h.html#a7ef90a36d99edfc0138a2155a17a79b9">FS_FAT16</a>:</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        <span class="keywordflow">if</span> (move_window(fs, fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a4c158f002bd87f70c1595baef8888d96">fatbase</a> + (clst / (<a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs) / 2))))</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;        p = &amp;fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a54541860d8273ee2709def80ccc3e271">win</a>[clst * 2 % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs)];</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="pff_8h.html#a398519bb08da6457e62567d1f0b567e3">LD_WORD</a>(p);</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="pff_8h.html#ac63e0796095a789cefdbc3c3c676c9ce">FS_FAT32</a>:</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;        <span class="keywordflow">if</span> (move_window(fs, fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a4c158f002bd87f70c1595baef8888d96">fatbase</a> + (clst / (<a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs) / 4))))</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        p = &amp;fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a54541860d8273ee2709def80ccc3e271">win</a>[clst * 4 % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs)];</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="pff_8h.html#a4690304ddc975516f7dc02575c96e34e">LD_DWORD</a>(p) &amp; 0x0FFFFFFF;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    }</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <span class="keywordflow">return</span> 0xFFFFFFFF; <span class="comment">/* An error occurred at the disk I/O layer */</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;}</div>
<div class="ttc" id="struct_f_a_t_f_s_html_a4c158f002bd87f70c1595baef8888d96"><div class="ttname"><a href="struct_f_a_t_f_s.html#a4c158f002bd87f70c1595baef8888d96">FATFS::fatbase</a></div><div class="ttdeci">dword fatbase</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00086">tff.h:86</a></div></div>
<div class="ttc" id="pff_8h_html_a398519bb08da6457e62567d1f0b567e3"><div class="ttname"><a href="pff_8h.html#a398519bb08da6457e62567d1f0b567e3">LD_WORD</a></div><div class="ttdeci">#define LD_WORD(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00234">pff.h:234</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_a388eb0fa0f3f1449a6ab88c6674e16fc"><div class="ttname"><a href="struct_f_a_t_f_s.html#a388eb0fa0f3f1449a6ab88c6674e16fc">FATFS::n_fatent</a></div><div class="ttdeci">DWORD n_fatent</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00100">ff.h:100</a></div></div>
<div class="ttc" id="pff_8h_html_a7ef90a36d99edfc0138a2155a17a79b9"><div class="ttname"><a href="pff_8h.html#a7ef90a36d99edfc0138a2155a17a79b9">FS_FAT16</a></div><div class="ttdeci">#define FS_FAT16</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00156">pff.h:156</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_aee58d0bf64f06146927e78ad026b06ac"><div class="ttname"><a href="struct_f_a_t_f_s.html#aee58d0bf64f06146927e78ad026b06ac">FATFS::fs_type</a></div><div class="ttdeci">byte fs_type</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00100">tff.h:100</a></div></div>
<div class="ttc" id="pff_8h_html_a4690304ddc975516f7dc02575c96e34e"><div class="ttname"><a href="pff_8h.html#a4690304ddc975516f7dc02575c96e34e">LD_DWORD</a></div><div class="ttdeci">#define LD_DWORD(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00235">pff.h:235</a></div></div>
<div class="ttc" id="p32_2include_2pinguino_2libraries_2sd_2integer_8h_html_aa1e36ce100a7ff1291e95b4515d42e65"><div class="ttname"><a href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a></div><div class="ttdeci">unsigned char PF_BYTE</div><div class="ttdef"><b>Definition:</b> <a href="p32_2include_2pinguino_2libraries_2sd_2integer_8h_source.html#l00008">integer.h:8</a></div></div>
<div class="ttc" id="pff_8h_html_ac63e0796095a789cefdbc3c3c676c9ce"><div class="ttname"><a href="pff_8h.html#ac63e0796095a789cefdbc3c3c676c9ce">FS_FAT32</a></div><div class="ttdeci">#define FS_FAT32</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00157">pff.h:157</a></div></div>
<div class="ttc" id="p8_2pinguino_2libraries_2integer_8h_html_a36cb3b01d81ffd844bbbfb54003e06ec"><div class="ttname"><a href="p8_2pinguino_2libraries_2integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a></div><div class="ttdeci">unsigned int UINT</div><div class="ttdef"><b>Definition:</b> <a href="p8_2pinguino_2libraries_2integer_8h_source.html#l00017">integer.h:17</a></div></div>
<div class="ttc" id="pff_8h_html_aab755aa1b4f81f4aabee4a5d4738cfb0"><div class="ttname"><a href="pff_8h.html#aab755aa1b4f81f4aabee4a5d4738cfb0">FS_FAT12</a></div><div class="ttdeci">#define FS_FAT12</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00155">pff.h:155</a></div></div>
<div class="ttc" id="ff_8c_html_a42b5140fc5e09a53c8f4cba66dc0e6c1"><div class="ttname"><a href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a></div><div class="ttdeci">#define SS(fs)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00118">ff.c:118</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_a54541860d8273ee2709def80ccc3e271"><div class="ttname"><a href="struct_f_a_t_f_s.html#a54541860d8273ee2709def80ccc3e271">FATFS::win</a></div><div class="ttdeci">byte win[512]</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00104">tff.h:104</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abd4b6b071a8d728a88727051c12bc6d7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> put_fat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_a_t_f_s.html">FATFS</a> *&#160;</td>
          <td class="paramname"><em>fs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>&#160;</td>
          <td class="paramname"><em>clst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="p8_2pinguino_2libraries_2integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00822">822</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

<p>References <a class="el" href="tff_8h_source.html#l00086">FATFS::fatbase</a>, <a class="el" href="ff_8h_source.html#l00180">FR_INT_ERR</a>, <a class="el" href="pff_8h_source.html#l00120">FR_OK</a>, <a class="el" href="pff_8h_source.html#l00155">FS_FAT12</a>, <a class="el" href="pff_8h_source.html#l00156">FS_FAT16</a>, <a class="el" href="pff_8h_source.html#l00157">FS_FAT32</a>, <a class="el" href="tff_8h_source.html#l00100">FATFS::fs_type</a>, <a class="el" href="pff_8h_source.html#l00235">LD_DWORD</a>, <a class="el" href="ff_8h_source.html#l00100">FATFS::n_fatent</a>, <a class="el" href="tff_8c_source.html#l00065">res</a>, <a class="el" href="ff_8c_source.html#l00118">SS</a>, <a class="el" href="pff_8h_source.html#l00237">ST_DWORD</a>, <a class="el" href="pff_8h_source.html#l00236">ST_WORD</a>, <a class="el" href="ff_8h_source.html#l00082">FATFS::wflag</a>, and <a class="el" href="tff_8h_source.html#l00104">FATFS::win</a>.</p>

<p>Referenced by <a class="el" href="ff_8c_source.html#l03062">f_truncate()</a>.</p>
<div class="fragment"><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  {</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    <a class="code" href="p8_2pinguino_2libraries_2integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> bc;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <a class="code" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a> *p;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> <a class="code" href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a>;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <span class="keywordflow">if</span> (clst &lt; 2 || clst &gt;= fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a388eb0fa0f3f1449a6ab88c6674e16fc">n_fatent</a>) { <span class="comment">/* Check range */</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        <span class="keywordflow">switch</span> (fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#aee58d0bf64f06146927e78ad026b06ac">fs_type</a>) {</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="pff_8h.html#aab755aa1b4f81f4aabee4a5d4738cfb0">FS_FAT12</a>:</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;            bc = clst;</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;            bc += bc / 2;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            res = move_window(fs, fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a4c158f002bd87f70c1595baef8888d96">fatbase</a> + (bc / <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs)));</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;            <span class="keywordflow">if</span> (res != <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>)</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;            p = &amp;fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a54541860d8273ee2709def80ccc3e271">win</a>[bc % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs)];</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;            *p = (clst &amp; 1) ? ((*p &amp; 0x0F) | ((<a class="code" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a>) val &lt;&lt; 4))</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                    : (<a class="code" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a>) val;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;            bc++;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;            fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a34eeef694e75229e1608f07acba3ed1c">wflag</a> = 1;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;            res = move_window(fs, fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a4c158f002bd87f70c1595baef8888d96">fatbase</a> + (bc / <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs)));</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;            <span class="keywordflow">if</span> (res != <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>)</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;            p = &amp;fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a54541860d8273ee2709def80ccc3e271">win</a>[bc % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs)];</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;            *p = (clst &amp; 1) ? (<a class="code" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a>) (val &gt;&gt; 4) : ((*p &amp; 0xF0)</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;                    | ((<a class="code" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a>) (val &gt;&gt; 8) &amp; 0x0F));</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="pff_8h.html#a7ef90a36d99edfc0138a2155a17a79b9">FS_FAT16</a>:</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;            res = move_window(fs, fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a4c158f002bd87f70c1595baef8888d96">fatbase</a> + (clst / (<a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs) / 2)));</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;            <span class="keywordflow">if</span> (res != <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>)</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;            p = &amp;fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a54541860d8273ee2709def80ccc3e271">win</a>[clst * 2 % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs)];</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;            <a class="code" href="pff_8h.html#a95ceb4c25b216e71baa7102939edfd0d">ST_WORD</a>(p, (<a class="code" href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#a3f29df22680f9b74773a028915984992">PF_WORD</a>)val)</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;            ;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="pff_8h.html#ac63e0796095a789cefdbc3c3c676c9ce">FS_FAT32</a>:</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;            res = move_window(fs, fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a4c158f002bd87f70c1595baef8888d96">fatbase</a> + (clst / (<a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs) / 4)));</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;            <span class="keywordflow">if</span> (res != <a class="code" href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>)</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;            p = &amp;fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a54541860d8273ee2709def80ccc3e271">win</a>[clst * 4 % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs)];</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;            val |= <a class="code" href="pff_8h.html#a4690304ddc975516f7dc02575c96e34e">LD_DWORD</a>(p) &amp; 0xF0000000;</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;            <a class="code" href="pff_8h.html#abf5aba973d95ac5843b80aa7379cdd66">ST_DWORD</a>(p, val)</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;            ;</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;            res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;        }</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a34eeef694e75229e1608f07acba3ed1c">wflag</a> = 1;</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    }</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a>;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;}</div>
<div class="ttc" id="struct_f_a_t_f_s_html_a4c158f002bd87f70c1595baef8888d96"><div class="ttname"><a href="struct_f_a_t_f_s.html#a4c158f002bd87f70c1595baef8888d96">FATFS::fatbase</a></div><div class="ttdeci">dword fatbase</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00086">tff.h:86</a></div></div>
<div class="ttc" id="pff_8h_html_abf5aba973d95ac5843b80aa7379cdd66"><div class="ttname"><a href="pff_8h.html#abf5aba973d95ac5843b80aa7379cdd66">ST_DWORD</a></div><div class="ttdeci">#define ST_DWORD(ptr, val)</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00237">pff.h:237</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_a388eb0fa0f3f1449a6ab88c6674e16fc"><div class="ttname"><a href="struct_f_a_t_f_s.html#a388eb0fa0f3f1449a6ab88c6674e16fc">FATFS::n_fatent</a></div><div class="ttdeci">DWORD n_fatent</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00100">ff.h:100</a></div></div>
<div class="ttc" id="pff_8h_html_a7ef90a36d99edfc0138a2155a17a79b9"><div class="ttname"><a href="pff_8h.html#a7ef90a36d99edfc0138a2155a17a79b9">FS_FAT16</a></div><div class="ttdeci">#define FS_FAT16</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00156">pff.h:156</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_aee58d0bf64f06146927e78ad026b06ac"><div class="ttname"><a href="struct_f_a_t_f_s.html#aee58d0bf64f06146927e78ad026b06ac">FATFS::fs_type</a></div><div class="ttdeci">byte fs_type</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00100">tff.h:100</a></div></div>
<div class="ttc" id="pff_8h_html_a4690304ddc975516f7dc02575c96e34e"><div class="ttname"><a href="pff_8h.html#a4690304ddc975516f7dc02575c96e34e">LD_DWORD</a></div><div class="ttdeci">#define LD_DWORD(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00235">pff.h:235</a></div></div>
<div class="ttc" id="ff_8h_html_a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76"><div class="ttname"><a href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a></div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00180">ff.h:180</a></div></div>
<div class="ttc" id="p32_2include_2pinguino_2libraries_2sd_2integer_8h_html_aa1e36ce100a7ff1291e95b4515d42e65"><div class="ttname"><a href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#aa1e36ce100a7ff1291e95b4515d42e65">PF_BYTE</a></div><div class="ttdeci">unsigned char PF_BYTE</div><div class="ttdef"><b>Definition:</b> <a href="p32_2include_2pinguino_2libraries_2sd_2integer_8h_source.html#l00008">integer.h:8</a></div></div>
<div class="ttc" id="p32_2include_2pinguino_2libraries_2sd_2integer_8h_html_a3f29df22680f9b74773a028915984992"><div class="ttname"><a href="p32_2include_2pinguino_2libraries_2sd_2integer_8h.html#a3f29df22680f9b74773a028915984992">PF_WORD</a></div><div class="ttdeci">unsigned short PF_WORD</div><div class="ttdef"><b>Definition:</b> <a href="p32_2include_2pinguino_2libraries_2sd_2integer_8h_source.html#l00009">integer.h:9</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a></div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00120">pff.h:120</a></div></div>
<div class="ttc" id="pff_8h_html_a49d0171ecbd362cda5680a0d360db44c"><div class="ttname"><a href="pff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a></div><div class="ttdeci">FRESULT</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00119">pff.h:119</a></div></div>
<div class="ttc" id="pff_8h_html_a95ceb4c25b216e71baa7102939edfd0d"><div class="ttname"><a href="pff_8h.html#a95ceb4c25b216e71baa7102939edfd0d">ST_WORD</a></div><div class="ttdeci">#define ST_WORD(ptr, val)</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00236">pff.h:236</a></div></div>
<div class="ttc" id="pff_8h_html_ac63e0796095a789cefdbc3c3c676c9ce"><div class="ttname"><a href="pff_8h.html#ac63e0796095a789cefdbc3c3c676c9ce">FS_FAT32</a></div><div class="ttdeci">#define FS_FAT32</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00157">pff.h:157</a></div></div>
<div class="ttc" id="p8_2pinguino_2libraries_2integer_8h_html_a36cb3b01d81ffd844bbbfb54003e06ec"><div class="ttname"><a href="p8_2pinguino_2libraries_2integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a></div><div class="ttdeci">unsigned int UINT</div><div class="ttdef"><b>Definition:</b> <a href="p8_2pinguino_2libraries_2integer_8h_source.html#l00017">integer.h:17</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_a34eeef694e75229e1608f07acba3ed1c"><div class="ttname"><a href="struct_f_a_t_f_s.html#a34eeef694e75229e1608f07acba3ed1c">FATFS::wflag</a></div><div class="ttdeci">PF_BYTE wflag</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00082">ff.h:82</a></div></div>
<div class="ttc" id="pff_8h_html_aab755aa1b4f81f4aabee4a5d4738cfb0"><div class="ttname"><a href="pff_8h.html#aab755aa1b4f81f4aabee4a5d4738cfb0">FS_FAT12</a></div><div class="ttdeci">#define FS_FAT12</div><div class="ttdef"><b>Definition:</b> <a href="pff_8h_source.html#l00155">pff.h:155</a></div></div>
<div class="ttc" id="tff_8c_html_aab43d7bcfb87e7ef71138d651ce1bea1"><div class="ttname"><a href="tff_8c.html#aab43d7bcfb87e7ef71138d651ce1bea1">res</a></div><div class="ttdeci">FRESULT res</div><div class="ttdef"><b>Definition:</b> <a href="tff_8c_source.html#l00065">tff.c:65</a></div></div>
<div class="ttc" id="ff_8c_html_a42b5140fc5e09a53c8f4cba66dc0e6c1"><div class="ttname"><a href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a></div><div class="ttdeci">#define SS(fs)</div><div class="ttdef"><b>Definition:</b> <a href="ff_8c_source.html#l00118">ff.c:118</a></div></div>
<div class="ttc" id="struct_f_a_t_f_s_html_a54541860d8273ee2709def80ccc3e271"><div class="ttname"><a href="struct_f_a_t_f_s.html#a54541860d8273ee2709def80ccc3e271">FATFS::win</a></div><div class="ttdeci">byte win[512]</div><div class="ttdef"><b>Definition:</b> <a href="tff_8h_source.html#l00104">tff.h:104</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Apr 23 2014 11:42:11 for Pinguino by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
